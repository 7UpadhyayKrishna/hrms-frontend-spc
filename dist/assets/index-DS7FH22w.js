import{r as u,a as Da,b as tt}from"./vendor-Gm9i_4Ku.js";import{N as He,u as Nt,L as Ot,a as Ie,O as Ls,b as Bt,c as Ta,B as Ra,R as Pa,d as de}from"./router-BLj_dDj7.js";import{X as oe,L as La,U as he,a as Qe,B as be,F as ve,S as Fe,M as Os,b as Oa,c as za,d as Ia,e as Ba,f as zs,g as Ze,h as Is,C as Bs,i as zt,A as $a,j as _a,k as $s,z as T,l as vt,m as Oe,n as jt,o as Se,p as _s,E as Ms,q as st,r as Us,s as Je,G as Ma,t as at,u as ns,v as ye,w as we,x as xe,y as Ua,D as Ee,H as fe,I as yt,P as xs,J as Xt,K as Ae,N as Jt,O as ls,T as is,Q as $e,R as Vt,V as Ha,W as Hs,Y as Qt,Z as qa,_ as qs,$ as Js,a0 as Vs,a1 as Ws,a2 as Ja,a3 as bt,a4 as Gs,a5 as Va,a6 as Wa,a7 as Ga,a8 as Ka,a9 as Ya,aa as Xa,ab as Qa,ac as Za,ad as ht,ae as us,af as er}from"./ui-BkOmFAc0.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();var Ks={exports:{}},$t={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tr=u,sr=Symbol.for("react.element"),ar=Symbol.for("react.fragment"),rr=Object.prototype.hasOwnProperty,nr=tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lr={key:!0,ref:!0,__self:!0,__source:!0};function Ys(t,a,n){var r,s={},l=null,i=null;n!==void 0&&(l=""+n),a.key!==void 0&&(l=""+a.key),a.ref!==void 0&&(i=a.ref);for(r in a)rr.call(a,r)&&!lr.hasOwnProperty(r)&&(s[r]=a[r]);if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:sr,type:t,key:l,ref:i,props:s,_owner:nr.current}}$t.Fragment=ar;$t.jsx=Ys;$t.jsxs=Ys;Ks.exports=$t;var e=Ks.exports,Zt={},ps=Da;Zt.createRoot=ps.createRoot,Zt.hydrateRoot=ps.hydrateRoot;function Xs(t,a){return function(){return t.apply(a,arguments)}}const{toString:ir}=Object.prototype,{getPrototypeOf:os}=Object,{iterator:_t,toStringTag:Qs}=Symbol,Mt=(t=>a=>{const n=ir.call(a);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Te=t=>(t=t.toLowerCase(),a=>Mt(a)===t),Ut=t=>a=>typeof a===t,{isArray:xt}=Array,mt=Ut("undefined");function wt(t){return t!==null&&!mt(t)&&t.constructor!==null&&!mt(t.constructor)&&Ce(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Zs=Te("ArrayBuffer");function or(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&Zs(t.buffer),a}const cr=Ut("string"),Ce=Ut("function"),ea=Ut("number"),Ct=t=>t!==null&&typeof t=="object",dr=t=>t===!0||t===!1,Rt=t=>{if(Mt(t)!=="object")return!1;const a=os(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Qs in t)&&!(_t in t)},mr=t=>{if(!Ct(t)||wt(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},xr=Te("Date"),ur=Te("File"),pr=Te("Blob"),hr=Te("FileList"),gr=t=>Ct(t)&&Ce(t.pipe),fr=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||Ce(t.append)&&((a=Mt(t))==="formdata"||a==="object"&&Ce(t.toString)&&t.toString()==="[object FormData]"))},br=Te("URLSearchParams"),[jr,yr,Nr,vr]=["ReadableStream","Request","Response","Headers"].map(Te),wr=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kt(t,a,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),xt(t))for(r=0,s=t.length;r<s;r++)a.call(null,t[r],r,t);else{if(wt(t))return;const l=n?Object.getOwnPropertyNames(t):Object.keys(t),i=l.length;let d;for(r=0;r<i;r++)d=l[r],a.call(null,t[d],d,t)}}function ta(t,a){if(wt(t))return null;a=a.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],a===s.toLowerCase())return s;return null}const Ye=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sa=t=>!mt(t)&&t!==Ye;function es(){const{caseless:t,skipUndefined:a}=sa(this)&&this||{},n={},r=(s,l)=>{const i=t&&ta(n,l)||l;Rt(n[i])&&Rt(s)?n[i]=es(n[i],s):Rt(s)?n[i]=es({},s):xt(s)?n[i]=s.slice():(!a||!mt(s))&&(n[i]=s)};for(let s=0,l=arguments.length;s<l;s++)arguments[s]&&kt(arguments[s],r);return n}const Cr=(t,a,n,{allOwnKeys:r}={})=>(kt(a,(s,l)=>{n&&Ce(s)?t[l]=Xs(s,n):t[l]=s},{allOwnKeys:r}),t),kr=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Sr=(t,a,n,r)=>{t.prototype=Object.create(a.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),n&&Object.assign(t.prototype,n)},Ar=(t,a,n,r)=>{let s,l,i;const d={};if(a=a||{},t==null)return a;do{for(s=Object.getOwnPropertyNames(t),l=s.length;l-- >0;)i=s[l],(!r||r(i,t,a))&&!d[i]&&(a[i]=t[i],d[i]=!0);t=n!==!1&&os(t)}while(t&&(!n||n(t,a))&&t!==Object.prototype);return a},Fr=(t,a,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=a.length;const r=t.indexOf(a,n);return r!==-1&&r===n},Er=t=>{if(!t)return null;if(xt(t))return t;let a=t.length;if(!ea(a))return null;const n=new Array(a);for(;a-- >0;)n[a]=t[a];return n},Dr=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&os(Uint8Array)),Tr=(t,a)=>{const r=(t&&t[_t]).call(t);let s;for(;(s=r.next())&&!s.done;){const l=s.value;a.call(t,l[0],l[1])}},Rr=(t,a)=>{let n;const r=[];for(;(n=t.exec(a))!==null;)r.push(n);return r},Pr=Te("HTMLFormElement"),Lr=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),hs=(({hasOwnProperty:t})=>(a,n)=>t.call(a,n))(Object.prototype),Or=Te("RegExp"),aa=(t,a)=>{const n=Object.getOwnPropertyDescriptors(t),r={};kt(n,(s,l)=>{let i;(i=a(s,l,t))!==!1&&(r[l]=i||s)}),Object.defineProperties(t,r)},zr=t=>{aa(t,(a,n)=>{if(Ce(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Ce(r)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Ir=(t,a)=>{const n={},r=s=>{s.forEach(l=>{n[l]=!0})};return xt(t)?r(t):r(String(t).split(a)),n},Br=()=>{},$r=(t,a)=>t!=null&&Number.isFinite(t=+t)?t:a;function _r(t){return!!(t&&Ce(t.append)&&t[Qs]==="FormData"&&t[_t])}const Mr=t=>{const a=new Array(10),n=(r,s)=>{if(Ct(r)){if(a.indexOf(r)>=0)return;if(wt(r))return r;if(!("toJSON"in r)){a[s]=r;const l=xt(r)?[]:{};return kt(r,(i,d)=>{const h=n(i,s+1);!mt(h)&&(l[d]=h)}),a[s]=void 0,l}}return r};return n(t,0)},Ur=Te("AsyncFunction"),Hr=t=>t&&(Ct(t)||Ce(t))&&Ce(t.then)&&Ce(t.catch),ra=((t,a)=>t?setImmediate:a?((n,r)=>(Ye.addEventListener("message",({source:s,data:l})=>{s===Ye&&l===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Ye.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ce(Ye.postMessage)),qr=typeof queueMicrotask<"u"?queueMicrotask.bind(Ye):typeof process<"u"&&process.nextTick||ra,Jr=t=>t!=null&&Ce(t[_t]),S={isArray:xt,isArrayBuffer:Zs,isBuffer:wt,isFormData:fr,isArrayBufferView:or,isString:cr,isNumber:ea,isBoolean:dr,isObject:Ct,isPlainObject:Rt,isEmptyObject:mr,isReadableStream:jr,isRequest:yr,isResponse:Nr,isHeaders:vr,isUndefined:mt,isDate:xr,isFile:ur,isBlob:pr,isRegExp:Or,isFunction:Ce,isStream:gr,isURLSearchParams:br,isTypedArray:Dr,isFileList:hr,forEach:kt,merge:es,extend:Cr,trim:wr,stripBOM:kr,inherits:Sr,toFlatObject:Ar,kindOf:Mt,kindOfTest:Te,endsWith:Fr,toArray:Er,forEachEntry:Tr,matchAll:Rr,isHTMLForm:Pr,hasOwnProperty:hs,hasOwnProp:hs,reduceDescriptors:aa,freezeMethods:zr,toObjectSet:Ir,toCamelCase:Lr,noop:Br,toFiniteNumber:$r,findKey:ta,global:Ye,isContextDefined:sa,isSpecCompliantForm:_r,toJSONObject:Mr,isAsyncFn:Ur,isThenable:Hr,setImmediate:ra,asap:qr,isIterable:Jr};function ee(t,a,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}S.inherits(ee,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:S.toJSONObject(this.config),code:this.code,status:this.status}}});const na=ee.prototype,la={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{la[t]={value:t}});Object.defineProperties(ee,la);Object.defineProperty(na,"isAxiosError",{value:!0});ee.from=(t,a,n,r,s,l)=>{const i=Object.create(na);S.toFlatObject(t,i,function(m){return m!==Error.prototype},p=>p!=="isAxiosError");const d=t&&t.message?t.message:"Error",h=a==null&&t?t.code:a;return ee.call(i,d,h,n,r,s),t&&i.cause==null&&Object.defineProperty(i,"cause",{value:t,configurable:!0}),i.name=t&&t.name||"Error",l&&Object.assign(i,l),i};const Vr=null;function ts(t){return S.isPlainObject(t)||S.isArray(t)}function ia(t){return S.endsWith(t,"[]")?t.slice(0,-2):t}function gs(t,a,n){return t?t.concat(a).map(function(s,l){return s=ia(s),!n&&l?"["+s+"]":s}).join(n?".":""):a}function Wr(t){return S.isArray(t)&&!t.some(ts)}const Gr=S.toFlatObject(S,{},null,function(a){return/^is[A-Z]/.test(a)});function Ht(t,a,n){if(!S.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,n=S.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,k){return!S.isUndefined(k[v])});const r=n.metaTokens,s=n.visitor||m,l=n.dots,i=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&S.isSpecCompliantForm(a);if(!S.isFunction(s))throw new TypeError("visitor must be a function");function p(x){if(x===null)return"";if(S.isDate(x))return x.toISOString();if(S.isBoolean(x))return x.toString();if(!h&&S.isBlob(x))throw new ee("Blob is not supported. Use a Buffer instead.");return S.isArrayBuffer(x)||S.isTypedArray(x)?h&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function m(x,v,k){let A=x;if(x&&!k&&typeof x=="object"){if(S.endsWith(v,"{}"))v=r?v:v.slice(0,-2),x=JSON.stringify(x);else if(S.isArray(x)&&Wr(x)||(S.isFileList(x)||S.endsWith(v,"[]"))&&(A=S.toArray(x)))return v=ia(v),A.forEach(function(F,N){!(S.isUndefined(F)||F===null)&&a.append(i===!0?gs([v],N,l):i===null?v:v+"[]",p(F))}),!1}return ts(x)?!0:(a.append(gs(k,v,l),p(x)),!1)}const o=[],f=Object.assign(Gr,{defaultVisitor:m,convertValue:p,isVisitable:ts});function j(x,v){if(!S.isUndefined(x)){if(o.indexOf(x)!==-1)throw Error("Circular reference detected in "+v.join("."));o.push(x),S.forEach(x,function(A,w){(!(S.isUndefined(A)||A===null)&&s.call(a,A,S.isString(w)?w.trim():w,v,f))===!0&&j(A,v?v.concat(w):[w])}),o.pop()}}if(!S.isObject(t))throw new TypeError("data must be an object");return j(t),a}function fs(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return a[r]})}function cs(t,a){this._pairs=[],t&&Ht(t,this,a)}const oa=cs.prototype;oa.append=function(a,n){this._pairs.push([a,n])};oa.toString=function(a){const n=a?function(r){return a.call(this,r,fs)}:fs;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Kr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ca(t,a,n){if(!a)return t;const r=n&&n.encode||Kr;S.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let l;if(s?l=s(a,n):l=S.isURLSearchParams(a)?a.toString():new cs(a,n).toString(r),l){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class bs{constructor(){this.handlers=[]}use(a,n,r){return this.handlers.push({fulfilled:a,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){S.forEach(this.handlers,function(r){r!==null&&a(r)})}}const da={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yr=typeof URLSearchParams<"u"?URLSearchParams:cs,Xr=typeof FormData<"u"?FormData:null,Qr=typeof Blob<"u"?Blob:null,Zr={isBrowser:!0,classes:{URLSearchParams:Yr,FormData:Xr,Blob:Qr},protocols:["http","https","file","blob","url","data"]},ds=typeof window<"u"&&typeof document<"u",ss=typeof navigator=="object"&&navigator||void 0,en=ds&&(!ss||["ReactNative","NativeScript","NS"].indexOf(ss.product)<0),tn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sn=ds&&window.location.href||"http://localhost",an=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ds,hasStandardBrowserEnv:en,hasStandardBrowserWebWorkerEnv:tn,navigator:ss,origin:sn},Symbol.toStringTag,{value:"Module"})),je={...an,...Zr};function rn(t,a){return Ht(t,new je.classes.URLSearchParams,{visitor:function(n,r,s,l){return je.isNode&&S.isBuffer(n)?(this.append(r,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...a})}function nn(t){return S.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function ln(t){const a={},n=Object.keys(t);let r;const s=n.length;let l;for(r=0;r<s;r++)l=n[r],a[l]=t[l];return a}function ma(t){function a(n,r,s,l){let i=n[l++];if(i==="__proto__")return!0;const d=Number.isFinite(+i),h=l>=n.length;return i=!i&&S.isArray(s)?s.length:i,h?(S.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!d):((!s[i]||!S.isObject(s[i]))&&(s[i]=[]),a(n,r,s[i],l)&&S.isArray(s[i])&&(s[i]=ln(s[i])),!d)}if(S.isFormData(t)&&S.isFunction(t.entries)){const n={};return S.forEachEntry(t,(r,s)=>{a(nn(r),s,n,0)}),n}return null}function on(t,a,n){if(S.isString(t))try{return(a||JSON.parse)(t),S.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const St={transitional:da,adapter:["xhr","http","fetch"],transformRequest:[function(a,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,l=S.isObject(a);if(l&&S.isHTMLForm(a)&&(a=new FormData(a)),S.isFormData(a))return s?JSON.stringify(ma(a)):a;if(S.isArrayBuffer(a)||S.isBuffer(a)||S.isStream(a)||S.isFile(a)||S.isBlob(a)||S.isReadableStream(a))return a;if(S.isArrayBufferView(a))return a.buffer;if(S.isURLSearchParams(a))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let d;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return rn(a,this.formSerializer).toString();if((d=S.isFileList(a))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Ht(d?{"files[]":a}:a,h&&new h,this.formSerializer)}}return l||s?(n.setContentType("application/json",!1),on(a)):a}],transformResponse:[function(a){const n=this.transitional||St.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(S.isResponse(a)||S.isReadableStream(a))return a;if(a&&S.isString(a)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(a,this.parseReviver)}catch(d){if(i)throw d.name==="SyntaxError"?ee.from(d,ee.ERR_BAD_RESPONSE,this,null,this.response):d}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:je.classes.FormData,Blob:je.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};S.forEach(["delete","get","head","post","put","patch"],t=>{St.headers[t]={}});const cn=S.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dn=t=>{const a={};let n,r,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||a[n]&&cn[n])&&(n==="set-cookie"?a[n]?a[n].push(r):a[n]=[r]:a[n]=a[n]?a[n]+", "+r:r)}),a},js=Symbol("internals");function gt(t){return t&&String(t).trim().toLowerCase()}function Pt(t){return t===!1||t==null?t:S.isArray(t)?t.map(Pt):String(t)}function mn(t){const a=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)a[r[1]]=r[2];return a}const xn=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Wt(t,a,n,r,s){if(S.isFunction(r))return r.call(this,a,n);if(s&&(a=n),!!S.isString(a)){if(S.isString(r))return a.indexOf(r)!==-1;if(S.isRegExp(r))return r.test(a)}}function un(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,n,r)=>n.toUpperCase()+r)}function pn(t,a){const n=S.toCamelCase(" "+a);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,l,i){return this[r].call(this,a,s,l,i)},configurable:!0})})}let ke=class{constructor(a){a&&this.set(a)}set(a,n,r){const s=this;function l(d,h,p){const m=gt(h);if(!m)throw new Error("header name must be a non-empty string");const o=S.findKey(s,m);(!o||s[o]===void 0||p===!0||p===void 0&&s[o]!==!1)&&(s[o||h]=Pt(d))}const i=(d,h)=>S.forEach(d,(p,m)=>l(p,m,h));if(S.isPlainObject(a)||a instanceof this.constructor)i(a,n);else if(S.isString(a)&&(a=a.trim())&&!xn(a))i(dn(a),n);else if(S.isObject(a)&&S.isIterable(a)){let d={},h,p;for(const m of a){if(!S.isArray(m))throw TypeError("Object iterator must return a key-value pair");d[p=m[0]]=(h=d[p])?S.isArray(h)?[...h,m[1]]:[h,m[1]]:m[1]}i(d,n)}else a!=null&&l(n,a,r);return this}get(a,n){if(a=gt(a),a){const r=S.findKey(this,a);if(r){const s=this[r];if(!n)return s;if(n===!0)return mn(s);if(S.isFunction(n))return n.call(this,s,r);if(S.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,n){if(a=gt(a),a){const r=S.findKey(this,a);return!!(r&&this[r]!==void 0&&(!n||Wt(this,this[r],r,n)))}return!1}delete(a,n){const r=this;let s=!1;function l(i){if(i=gt(i),i){const d=S.findKey(r,i);d&&(!n||Wt(r,r[d],d,n))&&(delete r[d],s=!0)}}return S.isArray(a)?a.forEach(l):l(a),s}clear(a){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const l=n[r];(!a||Wt(this,this[l],l,a,!0))&&(delete this[l],s=!0)}return s}normalize(a){const n=this,r={};return S.forEach(this,(s,l)=>{const i=S.findKey(r,l);if(i){n[i]=Pt(s),delete n[l];return}const d=a?un(l):String(l).trim();d!==l&&delete n[l],n[d]=Pt(s),r[d]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const n=Object.create(null);return S.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=a&&S.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,n])=>a+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...n){const r=new this(a);return n.forEach(s=>r.set(s)),r}static accessor(a){const r=(this[js]=this[js]={accessors:{}}).accessors,s=this.prototype;function l(i){const d=gt(i);r[d]||(pn(s,i),r[d]=!0)}return S.isArray(a)?a.forEach(l):l(a),this}};ke.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);S.reduceDescriptors(ke.prototype,({value:t},a)=>{let n=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(r){this[n]=r}}});S.freezeMethods(ke);function Gt(t,a){const n=this||St,r=a||n,s=ke.from(r.headers);let l=r.data;return S.forEach(t,function(d){l=d.call(n,l,s.normalize(),a?a.status:void 0)}),s.normalize(),l}function xa(t){return!!(t&&t.__CANCEL__)}function ut(t,a,n){ee.call(this,t??"canceled",ee.ERR_CANCELED,a,n),this.name="CanceledError"}S.inherits(ut,ee,{__CANCEL__:!0});function ua(t,a,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):a(new ee("Request failed with status code "+n.status,[ee.ERR_BAD_REQUEST,ee.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function hn(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function gn(t,a){t=t||10;const n=new Array(t),r=new Array(t);let s=0,l=0,i;return a=a!==void 0?a:1e3,function(h){const p=Date.now(),m=r[l];i||(i=p),n[s]=h,r[s]=p;let o=l,f=0;for(;o!==s;)f+=n[o++],o=o%t;if(s=(s+1)%t,s===l&&(l=(l+1)%t),p-i<a)return;const j=m&&p-m;return j?Math.round(f*1e3/j):void 0}}function fn(t,a){let n=0,r=1e3/a,s,l;const i=(p,m=Date.now())=>{n=m,s=null,l&&(clearTimeout(l),l=null),t(...p)};return[(...p)=>{const m=Date.now(),o=m-n;o>=r?i(p,m):(s=p,l||(l=setTimeout(()=>{l=null,i(s)},r-o)))},()=>s&&i(s)]}const It=(t,a,n=3)=>{let r=0;const s=gn(50,250);return fn(l=>{const i=l.loaded,d=l.lengthComputable?l.total:void 0,h=i-r,p=s(h),m=i<=d;r=i;const o={loaded:i,total:d,progress:d?i/d:void 0,bytes:h,rate:p||void 0,estimated:p&&d&&m?(d-i)/p:void 0,event:l,lengthComputable:d!=null,[a?"download":"upload"]:!0};t(o)},n)},ys=(t,a)=>{const n=t!=null;return[r=>a[0]({lengthComputable:n,total:t,loaded:r}),a[1]]},Ns=t=>(...a)=>S.asap(()=>t(...a)),bn=je.hasStandardBrowserEnv?((t,a)=>n=>(n=new URL(n,je.origin),t.protocol===n.protocol&&t.host===n.host&&(a||t.port===n.port)))(new URL(je.origin),je.navigator&&/(msie|trident)/i.test(je.navigator.userAgent)):()=>!0,jn=je.hasStandardBrowserEnv?{write(t,a,n,r,s,l){const i=[t+"="+encodeURIComponent(a)];S.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),S.isString(r)&&i.push("path="+r),S.isString(s)&&i.push("domain="+s),l===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yn(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Nn(t,a){return a?t.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):t}function pa(t,a,n){let r=!yn(a);return t&&(r||n==!1)?Nn(t,a):a}const vs=t=>t instanceof ke?{...t}:t;function et(t,a){a=a||{};const n={};function r(p,m,o,f){return S.isPlainObject(p)&&S.isPlainObject(m)?S.merge.call({caseless:f},p,m):S.isPlainObject(m)?S.merge({},m):S.isArray(m)?m.slice():m}function s(p,m,o,f){if(S.isUndefined(m)){if(!S.isUndefined(p))return r(void 0,p,o,f)}else return r(p,m,o,f)}function l(p,m){if(!S.isUndefined(m))return r(void 0,m)}function i(p,m){if(S.isUndefined(m)){if(!S.isUndefined(p))return r(void 0,p)}else return r(void 0,m)}function d(p,m,o){if(o in a)return r(p,m);if(o in t)return r(void 0,p)}const h={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:d,headers:(p,m,o)=>s(vs(p),vs(m),o,!0)};return S.forEach(Object.keys({...t,...a}),function(m){const o=h[m]||s,f=o(t[m],a[m],m);S.isUndefined(f)&&o!==d||(n[m]=f)}),n}const ha=t=>{const a=et({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:l,headers:i,auth:d}=a;if(a.headers=i=ke.from(i),a.url=ca(pa(a.baseURL,a.url,a.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&i.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),S.isFormData(n)){if(je.hasStandardBrowserEnv||je.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(S.isFunction(n.getHeaders)){const h=n.getHeaders(),p=["content-type","content-length"];Object.entries(h).forEach(([m,o])=>{p.includes(m.toLowerCase())&&i.set(m,o)})}}if(je.hasStandardBrowserEnv&&(r&&S.isFunction(r)&&(r=r(a)),r||r!==!1&&bn(a.url))){const h=s&&l&&jn.read(l);h&&i.set(s,h)}return a},vn=typeof XMLHttpRequest<"u",wn=vn&&function(t){return new Promise(function(n,r){const s=ha(t);let l=s.data;const i=ke.from(s.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:p}=s,m,o,f,j,x;function v(){j&&j(),x&&x(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let k=new XMLHttpRequest;k.open(s.method.toUpperCase(),s.url,!0),k.timeout=s.timeout;function A(){if(!k)return;const F=ke.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),b={data:!d||d==="text"||d==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:F,config:t,request:k};ua(function(C){n(C),v()},function(C){r(C),v()},b),k=null}"onloadend"in k?k.onloadend=A:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(A)},k.onabort=function(){k&&(r(new ee("Request aborted",ee.ECONNABORTED,t,k)),k=null)},k.onerror=function(N){const b=N&&N.message?N.message:"Network Error",c=new ee(b,ee.ERR_NETWORK,t,k);c.event=N||null,r(c),k=null},k.ontimeout=function(){let N=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const b=s.transitional||da;s.timeoutErrorMessage&&(N=s.timeoutErrorMessage),r(new ee(N,b.clarifyTimeoutError?ee.ETIMEDOUT:ee.ECONNABORTED,t,k)),k=null},l===void 0&&i.setContentType(null),"setRequestHeader"in k&&S.forEach(i.toJSON(),function(N,b){k.setRequestHeader(b,N)}),S.isUndefined(s.withCredentials)||(k.withCredentials=!!s.withCredentials),d&&d!=="json"&&(k.responseType=s.responseType),p&&([f,x]=It(p,!0),k.addEventListener("progress",f)),h&&k.upload&&([o,j]=It(h),k.upload.addEventListener("progress",o),k.upload.addEventListener("loadend",j)),(s.cancelToken||s.signal)&&(m=F=>{k&&(r(!F||F.type?new ut(null,t,k):F),k.abort(),k=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));const w=hn(s.url);if(w&&je.protocols.indexOf(w)===-1){r(new ee("Unsupported protocol "+w+":",ee.ERR_BAD_REQUEST,t));return}k.send(l||null)})},Cn=(t,a)=>{const{length:n}=t=t?t.filter(Boolean):[];if(a||n){let r=new AbortController,s;const l=function(p){if(!s){s=!0,d();const m=p instanceof Error?p:this.reason;r.abort(m instanceof ee?m:new ut(m instanceof Error?m.message:m))}};let i=a&&setTimeout(()=>{i=null,l(new ee(`timeout ${a} of ms exceeded`,ee.ETIMEDOUT))},a);const d=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(p=>{p.unsubscribe?p.unsubscribe(l):p.removeEventListener("abort",l)}),t=null)};t.forEach(p=>p.addEventListener("abort",l));const{signal:h}=r;return h.unsubscribe=()=>S.asap(d),h}},kn=function*(t,a){let n=t.byteLength;if(n<a){yield t;return}let r=0,s;for(;r<n;)s=r+a,yield t.slice(r,s),r=s},Sn=async function*(t,a){for await(const n of An(t))yield*kn(n,a)},An=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const a=t.getReader();try{for(;;){const{done:n,value:r}=await a.read();if(n)break;yield r}}finally{await a.cancel()}},ws=(t,a,n,r)=>{const s=Sn(t,a);let l=0,i,d=h=>{i||(i=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:p,value:m}=await s.next();if(p){d(),h.close();return}let o=m.byteLength;if(n){let f=l+=o;n(f)}h.enqueue(new Uint8Array(m))}catch(p){throw d(p),p}},cancel(h){return d(h),s.return()}},{highWaterMark:2})},Cs=64*1024,{isFunction:Et}=S,Fn=(({Request:t,Response:a})=>({Request:t,Response:a}))(S.global),{ReadableStream:ks,TextEncoder:Ss}=S.global,As=(t,...a)=>{try{return!!t(...a)}catch{return!1}},En=t=>{t=S.merge.call({skipUndefined:!0},Fn,t);const{fetch:a,Request:n,Response:r}=t,s=a?Et(a):typeof fetch=="function",l=Et(n),i=Et(r);if(!s)return!1;const d=s&&Et(ks),h=s&&(typeof Ss=="function"?(x=>v=>x.encode(v))(new Ss):async x=>new Uint8Array(await new n(x).arrayBuffer())),p=l&&d&&As(()=>{let x=!1;const v=new n(je.origin,{body:new ks,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!v}),m=i&&d&&As(()=>S.isReadableStream(new r("").body)),o={stream:m&&(x=>x.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!o[x]&&(o[x]=(v,k)=>{let A=v&&v[x];if(A)return A.call(v);throw new ee(`Response type '${x}' is not supported`,ee.ERR_NOT_SUPPORT,k)})});const f=async x=>{if(x==null)return 0;if(S.isBlob(x))return x.size;if(S.isSpecCompliantForm(x))return(await new n(je.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(S.isArrayBufferView(x)||S.isArrayBuffer(x))return x.byteLength;if(S.isURLSearchParams(x)&&(x=x+""),S.isString(x))return(await h(x)).byteLength},j=async(x,v)=>{const k=S.toFiniteNumber(x.getContentLength());return k??f(v)};return async x=>{let{url:v,method:k,data:A,signal:w,cancelToken:F,timeout:N,onDownloadProgress:b,onUploadProgress:c,responseType:C,headers:R,withCredentials:E="same-origin",fetchOptions:g}=ha(x),P=a||fetch;C=C?(C+"").toLowerCase():"text";let O=Cn([w,F&&F.toAbortSignal()],N),Q=null;const H=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let te;try{if(c&&p&&k!=="get"&&k!=="head"&&(te=await j(R,A))!==0){let Y=new n(v,{method:"POST",body:A,duplex:"half"}),se;if(S.isFormData(A)&&(se=Y.headers.get("content-type"))&&R.setContentType(se),Y.body){const[D,X]=ys(te,It(Ns(c)));A=ws(Y.body,Cs,D,X)}}S.isString(E)||(E=E?"include":"omit");const J=l&&"credentials"in n.prototype,W={...g,signal:O,method:k.toUpperCase(),headers:R.normalize().toJSON(),body:A,duplex:"half",credentials:J?E:void 0};Q=l&&new n(v,W);let K=await(l?P(Q,g):P(v,W));const L=m&&(C==="stream"||C==="response");if(m&&(b||L&&H)){const Y={};["status","statusText","headers"].forEach(Z=>{Y[Z]=K[Z]});const se=S.toFiniteNumber(K.headers.get("content-length")),[D,X]=b&&ys(se,It(Ns(b),!0))||[];K=new r(ws(K.body,Cs,D,()=>{X&&X(),H&&H()}),Y)}C=C||"text";let _=await o[S.findKey(o,C)||"text"](K,x);return!L&&H&&H(),await new Promise((Y,se)=>{ua(Y,se,{data:_,headers:ke.from(K.headers),status:K.status,statusText:K.statusText,config:x,request:Q})})}catch(J){throw H&&H(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new ee("Network Error",ee.ERR_NETWORK,x,Q),{cause:J.cause||J}):ee.from(J,J&&J.code,x,Q)}}},Dn=new Map,ga=t=>{let a=t?t.env:{};const{fetch:n,Request:r,Response:s}=a,l=[r,s,n];let i=l.length,d=i,h,p,m=Dn;for(;d--;)h=l[d],p=m.get(h),p===void 0&&m.set(h,p=d?new Map:En(a)),m=p;return p};ga();const as={http:Vr,xhr:wn,fetch:{get:ga}};S.forEach(as,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});const Fs=t=>`- ${t}`,Tn=t=>S.isFunction(t)||t===null||t===!1,fa={getAdapter:(t,a)=>{t=S.isArray(t)?t:[t];const{length:n}=t;let r,s;const l={};for(let i=0;i<n;i++){r=t[i];let d;if(s=r,!Tn(r)&&(s=as[(d=String(r)).toLowerCase()],s===void 0))throw new ee(`Unknown adapter '${d}'`);if(s&&(S.isFunction(s)||(s=s.get(a))))break;l[d||"#"+i]=s}if(!s){const i=Object.entries(l).map(([h,p])=>`adapter ${h} `+(p===!1?"is not supported by the environment":"is not available in the build"));let d=n?i.length>1?`since :
`+i.map(Fs).join(`
`):" "+Fs(i[0]):"as no adapter specified";throw new ee("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return s},adapters:as};function Kt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ut(null,t)}function Es(t){return Kt(t),t.headers=ke.from(t.headers),t.data=Gt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),fa.getAdapter(t.adapter||St.adapter,t)(t).then(function(r){return Kt(t),r.data=Gt.call(t,t.transformResponse,r),r.headers=ke.from(r.headers),r},function(r){return xa(r)||(Kt(t),r&&r.response&&(r.response.data=Gt.call(t,t.transformResponse,r.response),r.response.headers=ke.from(r.response.headers))),Promise.reject(r)})}const ba="1.12.2",qt={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{qt[t]=function(r){return typeof r===t||"a"+(a<1?"n ":" ")+t}});const Ds={};qt.transitional=function(a,n,r){function s(l,i){return"[Axios v"+ba+"] Transitional option '"+l+"'"+i+(r?". "+r:"")}return(l,i,d)=>{if(a===!1)throw new ee(s(i," has been removed"+(n?" in "+n:"")),ee.ERR_DEPRECATED);return n&&!Ds[i]&&(Ds[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),a?a(l,i,d):!0}};qt.spelling=function(a){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${a}`),!0)};function Rn(t,a,n){if(typeof t!="object")throw new ee("options must be an object",ee.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const l=r[s],i=a[l];if(i){const d=t[l],h=d===void 0||i(d,l,t);if(h!==!0)throw new ee("option "+l+" must be "+h,ee.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ee("Unknown option "+l,ee.ERR_BAD_OPTION)}}const Lt={assertOptions:Rn,validators:qt},Le=Lt.validators;let Xe=class{constructor(a){this.defaults=a||{},this.interceptors={request:new bs,response:new bs}}async request(a,n){try{return await this._request(a,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(a,n){typeof a=="string"?(n=n||{},n.url=a):n=a||{},n=et(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:l}=n;r!==void 0&&Lt.assertOptions(r,{silentJSONParsing:Le.transitional(Le.boolean),forcedJSONParsing:Le.transitional(Le.boolean),clarifyTimeoutError:Le.transitional(Le.boolean)},!1),s!=null&&(S.isFunction(s)?n.paramsSerializer={serialize:s}:Lt.assertOptions(s,{encode:Le.function,serialize:Le.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Lt.assertOptions(n,{baseUrl:Le.spelling("baseURL"),withXsrfToken:Le.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=l&&S.merge(l.common,l[n.method]);l&&S.forEach(["delete","get","head","post","put","patch","common"],x=>{delete l[x]}),n.headers=ke.concat(i,l);const d=[];let h=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(h=h&&v.synchronous,d.unshift(v.fulfilled,v.rejected))});const p=[];this.interceptors.response.forEach(function(v){p.push(v.fulfilled,v.rejected)});let m,o=0,f;if(!h){const x=[Es.bind(this),void 0];for(x.unshift(...d),x.push(...p),f=x.length,m=Promise.resolve(n);o<f;)m=m.then(x[o++],x[o++]);return m}f=d.length;let j=n;for(;o<f;){const x=d[o++],v=d[o++];try{j=x(j)}catch(k){v.call(this,k);break}}try{m=Es.call(this,j)}catch(x){return Promise.reject(x)}for(o=0,f=p.length;o<f;)m=m.then(p[o++],p[o++]);return m}getUri(a){a=et(this.defaults,a);const n=pa(a.baseURL,a.url,a.allowAbsoluteUrls);return ca(n,a.params,a.paramsSerializer)}};S.forEach(["delete","get","head","options"],function(a){Xe.prototype[a]=function(n,r){return this.request(et(r||{},{method:a,url:n,data:(r||{}).data}))}});S.forEach(["post","put","patch"],function(a){function n(r){return function(l,i,d){return this.request(et(d||{},{method:a,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}Xe.prototype[a]=n(),Xe.prototype[a+"Form"]=n(!0)});let Pn=class ja{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const r=this;this.promise.then(s=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](s);r._listeners=null}),this.promise.then=s=>{let l;const i=new Promise(d=>{r.subscribe(d),l=d}).then(s);return i.cancel=function(){r.unsubscribe(l)},i},a(function(l,i,d){r.reason||(r.reason=new ut(l,i,d),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const n=this._listeners.indexOf(a);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const a=new AbortController,n=r=>{a.abort(r)};return this.subscribe(n),a.signal.unsubscribe=()=>this.unsubscribe(n),a.signal}static source(){let a;return{token:new ja(function(s){a=s}),cancel:a}}};function Ln(t){return function(n){return t.apply(null,n)}}function On(t){return S.isObject(t)&&t.isAxiosError===!0}const rs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(rs).forEach(([t,a])=>{rs[a]=t});function ya(t){const a=new Xe(t),n=Xs(Xe.prototype.request,a);return S.extend(n,Xe.prototype,a,{allOwnKeys:!0}),S.extend(n,a,null,{allOwnKeys:!0}),n.create=function(s){return ya(et(t,s))},n}const le=ya(St);le.Axios=Xe;le.CanceledError=ut;le.CancelToken=Pn;le.isCancel=xa;le.VERSION=ba;le.toFormData=Ht;le.AxiosError=ee;le.Cancel=le.CanceledError;le.all=function(a){return Promise.all(a)};le.spread=Ln;le.isAxiosError=On;le.mergeConfig=et;le.AxiosHeaders=ke;le.formToJSON=t=>ma(S.isHTMLForm(t)?new FormData(t):t);le.getAdapter=fa.getAdapter;le.HttpStatusCode=rs;le.default=le;const{Axios:Ul,AxiosError:Hl,CanceledError:ql,isCancel:Jl,CancelToken:Vl,VERSION:Wl,all:Gl,Cancel:Kl,isAxiosError:Yl,spread:Xl,toFormData:Ql,AxiosHeaders:Zl,HttpStatusCode:ei,formToJSON:ti,getAdapter:si,mergeConfig:ai}=le,ze={DEVELOPMENT:"development",PRODUCTION:"production",STAGING:"staging"},zn=()=>ze.PRODUCTION,In=t=>{switch(t){case ze.DEVELOPMENT:return"/api";case ze.STAGING:return"https://hrms-backend-staging.onrender.com/api";case ze.PRODUCTION:default:return"/api"}},Bn=t=>{switch(t){case ze.DEVELOPMENT:return"http://localhost:5173";case ze.STAGING:return"https://hrms-staging.vercel.app";case ze.PRODUCTION:default:return"https://hrms-frontend-blush.vercel.app"}},dt=zn(),De={env:dt,isDevelopment:dt===ze.DEVELOPMENT,isProduction:dt===ze.PRODUCTION,isStaging:dt===ze.STAGING,apiBaseUrl:In(dt),frontendUrl:Bn(dt),apiTimeout:3e5,features:{aiAnalysis:!0,notifications:!0}},M=le.create({baseURL:De.apiBaseUrl,timeout:De.apiTimeout,headers:{"Content-Type":"application/json"}});M.interceptors.request.use(t=>{const a=localStorage.getItem("token");return a&&(t.headers.Authorization=`Bearer ${a}`),t},t=>Promise.reject(t));M.interceptors.response.use(t=>t,t=>{var a,n,r,s,l,i,d;return((a=t.response)==null?void 0:a.status)===401?(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login",Promise.reject(t)):(((n=t.response)==null?void 0:n.status)===404&&((l=(s=(r=t.response)==null?void 0:r.data)==null?void 0:s.message)!=null&&l.includes("User not found")||((d=(i=t.response)==null?void 0:i.data)==null?void 0:d.code)==="USER_NOT_FOUND")&&(console.warn("⚠️ User not found - redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(t))});const Na=u.createContext(null),_e=()=>{const t=u.useContext(Na);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},$n=({children:t})=>{const[a,n]=u.useState(null),[r,s]=u.useState(!0),[l,i]=u.useState(localStorage.getItem("token"));u.useEffect(()=>{(async()=>{var k,A,w;const x=localStorage.getItem("token"),v=localStorage.getItem("user");if(x&&v){i(x);let F=JSON.parse(v);F&&F.role==="admin"&&((k=F.email)!=null&&k.includes("admin")||(A=F.email)!=null&&A.includes("@spc")||(w=F.email)!=null&&w.includes("@company"))&&(F={...F,role:"company_admin"},localStorage.setItem("user",JSON.stringify(F))),n(F)}s(!1)})()},[]);const f={user:a,token:l,loading:r,login:async(j,x,v=null)=>{var k,A,w,F,N;try{const b=await M.post("/auth/login",{email:j,password:x,...v&&{companyId:v}}),{token:c,user:C}=b.data.data;let R=C;return C&&C.role==="admin"&&((k=C.email)!=null&&k.includes("admin")||(A=C.email)!=null&&A.includes("@spc")||(w=C.email)!=null&&w.includes("@company"))&&(R={...C,role:"company_admin"}),localStorage.setItem("token",c),localStorage.setItem("user",JSON.stringify(R)),R.themePreference&&localStorage.setItem("theme",R.themePreference),i(c),n(R),{success:!0}}catch(b){return{success:!1,message:((N=(F=b.response)==null?void 0:F.data)==null?void 0:N.message)||"Login failed"}}},googleLogin:async j=>{var x,v;try{const k=await M.post("/auth/google",{credential:j}),{token:A,user:w}=k.data.data;return localStorage.setItem("token",A),localStorage.setItem("user",JSON.stringify(w)),w.themePreference&&localStorage.setItem("theme",w.themePreference),i(A),n(w),{success:!0}}catch(k){return{success:!1,message:((v=(x=k.response)==null?void 0:x.data)==null?void 0:v.message)||"Google login failed"}}},register:async j=>{var x,v;try{const k=await M.post("/auth/register",j),{token:A,user:w}=k.data.data;return localStorage.setItem("token",A),localStorage.setItem("user",JSON.stringify(w)),i(A),n(w),{success:!0}}catch(k){return{success:!1,message:((v=(x=k.response)==null?void 0:x.data)==null?void 0:v.message)||"Registration failed"}}},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),i(null),n(null)},updateUser:j=>{n(j),localStorage.setItem("user",JSON.stringify(j))},isAuthenticated:!!l};return e.jsx(Na.Provider,{value:f,children:t})},Yt={light:{name:"Light",description:"Clean and bright",colors:{primary:"#3b82f6",primaryHover:"#2563eb",background:"#ffffff",surface:"#f8fafc",surfaceHover:"#f1f5f9",text:"#1e293b",textSecondary:"#64748b",border:"#e2e8f0",accent:"#3b82f6"},preview:"bg-gradient-to-br from-blue-50 to-slate-100"},dark:{name:"Dark",description:"Easy on the eyes",colors:{primary:"#3b82f6",primaryHover:"#2563eb",background:"#0f172a",surface:"#1e293b",surfaceHover:"#334155",text:"#f8fafc",textSecondary:"#94a3b8",border:"#334155",accent:"#3b82f6"},preview:"bg-gradient-to-br from-slate-900 to-slate-800"},blue:{name:"Ocean Blue",description:"Professional and calm",colors:{primary:"#0ea5e9",primaryHover:"#0284c7",background:"#051923",surface:"#0a2540",surfaceHover:"#0f3554",text:"#e0f2fe",textSecondary:"#7dd3fc",border:"#1e3a5f",accent:"#38bdf8"},preview:"bg-gradient-to-br from-blue-900 to-cyan-900"},green:{name:"Forest Green",description:"Natural and refreshing",colors:{primary:"#10b981",primaryHover:"#059669",background:"#041a0f",surface:"#0d2818",surfaceHover:"#1a3d28",text:"#d1fae5",textSecondary:"#6ee7b7",border:"#1e4d2b",accent:"#34d399"},preview:"bg-gradient-to-br from-green-900 to-emerald-900"},purple:{name:"Royal Purple",description:"Creative and elegant",colors:{primary:"#a855f7",primaryHover:"#9333ea",background:"#0f0520",surface:"#1e0f3d",surfaceHover:"#2d1b5a",text:"#f3e8ff",textSecondary:"#d8b4fe",border:"#4c1d95",accent:"#c084fc"},preview:"bg-gradient-to-br from-purple-900 to-violet-900"},orange:{name:"Sunset Orange",description:"Warm and energetic",colors:{primary:"#f97316",primaryHover:"#ea580c",background:"#1a0a03",surface:"#331508",surfaceHover:"#4d2410",text:"#fed7aa",textSecondary:"#fdba74",border:"#7c2d12",accent:"#fb923c"},preview:"bg-gradient-to-br from-orange-900 to-amber-900"},red:{name:"Ruby Red",description:"Bold and powerful",colors:{primary:"#ef4444",primaryHover:"#dc2626",background:"#1a0404",surface:"#330a0a",surfaceHover:"#4d1010",text:"#fee2e2",textSecondary:"#fca5a5",border:"#7f1d1d",accent:"#f87171"},preview:"bg-gradient-to-br from-red-900 to-rose-900"},teal:{name:"Teal Wave",description:"Modern and balanced",colors:{primary:"#14b8a6",primaryHover:"#0d9488",background:"#041614",surface:"#0a2826",surfaceHover:"#103d38",text:"#ccfbf1",textSecondary:"#5eead4",border:"#134e4a",accent:"#2dd4bf"},preview:"bg-gradient-to-br from-teal-900 to-cyan-900"},grey:{name:"Monochrome",description:"Minimalist and focused",colors:{primary:"#6b7280",primaryHover:"#4b5563",background:"#111827",surface:"#1f2937",surfaceHover:"#374151",text:"#f9fafb",textSecondary:"#d1d5db",border:"#374151",accent:"#9ca3af"},preview:"bg-gradient-to-br from-gray-900 to-slate-800"},custom:{name:"Custom",description:"Your personalized theme",colors:{primary:"#8b5cf6",primaryHover:"#7c3aed",background:"#0f0a1f",surface:"#1a1333",surfaceHover:"#251c47",text:"#ede9fe",textSecondary:"#c4b5fd",border:"#2e1f5a",accent:"#a78bfa"},preview:"bg-gradient-to-br from-indigo-900 to-purple-900"}},va=t=>{if(t==="custom"){const a=localStorage.getItem("customThemeColors");if(a)try{const n=JSON.parse(a);return{...Yt.custom,colors:n}}catch(n){console.error("Failed to parse custom theme colors",n)}}return Yt[t]||Yt.dark},Ts=t=>{const a=va(t),n=document.documentElement,r=document.body;Object.entries(a.colors).forEach(([s,l])=>{n.style.setProperty(`--color-${s}`,l)}),n.setAttribute("data-theme",t),r.style.backgroundColor=a.colors.background,r.style.color=a.colors.text,t==="light"?(n.classList.remove("dark"),r.classList.remove("dark")):(n.classList.add("dark"),r.classList.add("dark"))},_n=async t=>(await M.put("/user/theme",{themePreference:t})).data,wa=u.createContext({theme:"dark",themeConfig:null,setTheme:()=>{},toggleTheme:()=>{},isChanging:!1}),Mn=({children:t})=>{const[a,n]=u.useState(()=>localStorage.getItem("theme")||"dark"),[r,s]=u.useState(!1);u.useEffect(()=>{Ts(a),localStorage.setItem("theme",a)},[a]);const l=async(p,m=!1)=>{if(!(p===a&&p!=="custom")){if(s(!0),Ts(p),n(p),!m)try{if(localStorage.getItem("token")){await _n(p);const f=localStorage.getItem("user");if(f){const j=JSON.parse(f);j.themePreference=p,localStorage.setItem("user",JSON.stringify(j))}}}catch(o){console.error("Failed to sync theme preference:",o)}setTimeout(()=>s(!1),300)}},i=()=>{l(a==="dark"?"light":"dark")},d=va(a),h={theme:a,themeConfig:d,setTheme:l,toggleTheme:i,isChanging:r};return e.jsx(wa.Provider,{value:h,children:t})},Un=()=>{const t=u.useContext(wa);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},Hn=()=>{const{user:t}=_e();return t?t.role==="hr"?e.jsx(He,{to:"/job-desk",replace:!0}):t.role==="admin"||t.role==="company_admin"?e.jsx(He,{to:"/dashboard",replace:!0}):e.jsx(He,{to:"/unauthorized",replace:!0}):e.jsx(He,{to:"/login",replace:!0})},ft=({children:t,roles:a=[]})=>{const{isAuthenticated:n,user:r,loading:s}=_e(),l=["hr","admin","company_admin"];return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-400",children:"Loading..."})]})}):n?l.includes(r==null?void 0:r.role)?(r==null?void 0:r.role)==="company_admin"?t:a.length>0&&!a.includes(r==null?void 0:r.role)?e.jsx(He,{to:"/unauthorized",replace:!0}):t:e.jsx(He,{to:"/unauthorized",replace:!0}):e.jsx(He,{to:"/login",replace:!0})},qn=({isOpen:t,setIsOpen:a})=>{var f,j,x;const n=Nt(),{user:r}=_e();let s=r;r&&r.role==="admin"&&((f=r.email)!=null&&f.includes("admin")||(j=r.email)!=null&&j.includes("@spc")||(x=r.email)!=null&&x.includes("@company"))&&(s={...r,role:"company_admin"},JSON.parse(localStorage.getItem("user")||"{}").role==="admin"&&localStorage.setItem("user",JSON.stringify(s)));const l=s||r,i=(l==null?void 0:l.role)==="admin"||(l==null?void 0:l.role)==="company_admin",d=(l==null?void 0:l.role)==="hr"||(l==null?void 0:l.role)==="company_admin",h=v=>n.pathname===v,p=[{key:"jobdesk",label:"Job Desk",icon:be,path:"/job-desk"},{key:"onboarding",label:"Onboarding",icon:Qe,path:"/employees/onboarding"},{key:"candidate-pool",label:"Candidate Pool",icon:he,path:"/employee/hr/candidate-pool"},{key:"resume-parser",label:"Resume Parser",icon:ve,path:"/employee/hr/resume-parser"},{key:"resume-search",label:"Resume Search",icon:Fe,path:"/employee/hr/resume-search"}],m=[{key:"dashboard",label:"Dashboard",icon:La,path:"/dashboard"},{key:"candidates",label:"Candidates",icon:he,path:"/candidates"}];let o=[];return(l==null?void 0:l.role)==="company_admin"?o=[...m,{key:"hr-management",label:"HR Management",icon:he,path:"/hr-management"},{key:"onboarding",label:"Onboarding (View)",icon:Qe,path:"/employees/onboarding"}]:d?o=p:i?o=m:o=[],e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>a(!1)}),e.jsxs("aside",{className:`fixed top-0 left-0 h-screen theme-surface border-r theme-border z-50 transition-transform duration-300 overflow-y-auto overflow-x-hidden ${t?"translate-x-0":"-translate-x-full"} lg:translate-x-0 w-64`,style:{backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)"},children:[e.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between h-16 px-4 border-b theme-border theme-surface",style:{backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)"},children:[e.jsx("div",{className:"flex items-center justify-center w-full py-2",children:e.jsx("span",{className:"text-4xl font-black font-sans bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent tracking-wider",children:"HRMS"})}),e.jsx("button",{onClick:()=>a(!1),className:"lg:hidden text-gray-400 hover:text-white",children:e.jsx(oe,{size:20})})]}),e.jsx("nav",{className:"flex-1 py-4 px-3",children:o.map(v=>e.jsx("div",{className:"mb-1",children:e.jsxs(Ot,{to:v.path,className:`flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${h(v.path)?"sidebar-menu-item active":"sidebar-menu-item"}`,onMouseEnter:k=>k.currentTarget.classList.add("hover:bg-gray-800","hover:text-white"),onMouseLeave:k=>k.currentTarget.classList.remove("hover:bg-gray-800","hover:text-white"),children:[e.jsx(v.icon,{size:20}),e.jsx("span",{children:v.label})]})},v.key))})]})]})},Jn=({toggleSidebar:t})=>{var f,j;const a=Ie(),{user:n,logout:r}=_e(),{theme:s,toggleTheme:l}=Un(),[i,d]=u.useState(!1),[h,p]=u.useState(!1),m=()=>{r(),a("/login")},o=()=>{document.fullscreenElement?(document.exitFullscreen(),p(!1)):(document.documentElement.requestFullscreen(),p(!0))};return e.jsxs("header",{className:"h-16 theme-surface border-b theme-border flex items-center justify-between px-6",style:{backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)"},children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:t,className:"lg:hidden theme-text-secondary",style:{color:"var(--color-textSecondary)"},children:e.jsx(Os,{size:24})}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsx("h1",{className:"text-xl font-semibold theme-text",style:{color:"var(--color-text)"},children:"Welcome to HRMS"}),e.jsx("p",{className:"text-sm theme-text-secondary",style:{color:"var(--color-textSecondary)"},children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:l,className:"p-2 theme-text-secondary rounded-lg transition-colors",style:{color:"var(--color-textSecondary)"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:x=>x.currentTarget.style.backgroundColor="transparent",title:s==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:s==="dark"?e.jsx(Oa,{size:20}):e.jsx(za,{size:20})}),e.jsx("button",{onClick:o,className:"p-2 theme-text-secondary rounded-lg transition-colors",style:{color:"var(--color-textSecondary)"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:x=>x.currentTarget.style.backgroundColor="transparent",title:h?"Exit Fullscreen":"Enter Fullscreen",children:h?e.jsx(Ia,{size:20}):e.jsx(Ba,{size:20})}),e.jsxs("button",{className:"relative p-2 theme-text-secondary rounded-lg transition-colors",style:{color:"var(--color-textSecondary)"},onMouseEnter:x=>x.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:x=>x.currentTarget.style.backgroundColor="transparent",children:[e.jsx(zs,{size:20}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>d(!i),className:"flex items-center space-x-3 p-2 rounded-lg transition-colors",onMouseEnter:x=>x.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:x=>x.currentTarget.style.backgroundColor="transparent",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--color-primary)"},children:e.jsx(Ze,{size:18,className:"text-white"})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsxs("p",{className:"text-sm font-medium theme-text",style:{color:"var(--color-text)"},children:[(f=n==null?void 0:n.employee)==null?void 0:f.firstName," ",(j=n==null?void 0:n.employee)==null?void 0:j.lastName]}),e.jsx("p",{className:"text-xs theme-text-secondary capitalize",style:{color:"var(--color-textSecondary)"},children:n==null?void 0:n.role})]})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),e.jsx("div",{className:"absolute right-0 mt-2 w-56 theme-surface theme-border rounded-lg shadow-lg z-20",style:{backgroundColor:"var(--color-surface)",borderColor:"var(--color-border)",borderWidth:"1px",borderStyle:"solid"},children:e.jsxs("div",{className:"py-1",children:[e.jsx("hr",{className:"my-1 theme-border",style:{borderColor:"var(--color-border)"}}),e.jsxs("button",{onClick:m,className:"w-full flex items-center space-x-2 px-4 py-2 text-sm text-red-600",onMouseEnter:x=>x.currentTarget.style.backgroundColor="var(--color-surfaceHover)",onMouseLeave:x=>x.currentTarget.style.backgroundColor="transparent",children:[e.jsx(Is,{size:16}),e.jsx("span",{children:"Logout"})]})]})})]})]})]})]})},Dt=()=>{const[t,a]=u.useState(!1),n=()=>{a(!t)};return e.jsxs("div",{className:"min-h-screen theme-bg",style:{backgroundColor:"var(--color-background)"},children:[e.jsx(qn,{isOpen:t,setIsOpen:a}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx(Jn,{toggleSidebar:n}),e.jsx("main",{className:"p-6",children:e.jsx(Ls,{})})]})]})},Vn=()=>{var j;const{user:t,logout:a}=_e(),n=Nt(),r=Ie(),[s,l]=u.useState(!1),[i,d]=u.useState(!1),m=(t==null?void 0:t.role)==="hr"?[{name:"Job Desk",href:"/job-desk",icon:be},{name:"Onboarding",href:"/employees/onboarding",icon:he},{name:"Candidate Pool",href:"/employee/hr/candidate-pool",icon:he},{name:"Resume Parser",href:"/employee/hr/resume-parser",icon:ve},{name:"Resume Search",href:"/employee/hr/resume-search",icon:Fe},{name:"My Profile",href:"/employee/profile",icon:Ze}]:[],o=()=>{a(),r("/login")},f=x=>n.pathname===x||n.pathname.startsWith(x+"/");return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A]",children:[e.jsx("aside",{className:`fixed top-0 left-0 z-40 h-screen transition-transform bg-[#2A2A3A] border-r border-gray-800 ${s?"translate-x-0":"-translate-x-full"} md:translate-x-0`,style:{width:"260px"},children:e.jsxs("div",{className:"h-full px-3 py-4 overflow-y-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-6 px-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"H"})}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-white",children:"HRMS Portal"})})]})}),e.jsx("nav",{className:"space-y-1",children:m.map(x=>{const v=x.icon,k=f(x.href);return e.jsxs(Ot,{to:x.href,className:`flex items-center px-3 py-2.5 text-sm font-medium rounded-xl transition-all ${k?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white shadow-lg":"text-gray-400 hover:bg-[#1E1E2A] hover:text-white"}`,children:[e.jsx(v,{className:"w-5 h-5 mr-3"}),x.name]},x.name)})})]})}),e.jsxs("div",{className:"md:ml-[260px] transition-all duration-300",children:[e.jsx("header",{className:"sticky top-0 z-30 bg-[#2A2A3A] border-b border-gray-800",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>l(!s),className:"p-2 rounded-xl text-gray-400 hover:bg-[#1E1E2A] hover:text-white transition-colors",children:s?e.jsx(oe,{className:"w-5 h-5"}):e.jsx(Os,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{className:"p-2 rounded-xl text-gray-400 hover:bg-[#1E1E2A] hover:text-white transition-colors relative",children:[e.jsx(zs,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-[#A88BFF] rounded-full"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>d(!i),className:"flex items-center space-x-3 px-3 py-2 rounded-xl text-gray-300 hover:bg-[#1E1E2A] transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#A88BFF] to-[#8B6FE8] rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:(j=t==null?void 0:t.email)==null?void 0:j.charAt(0).toUpperCase()})}),e.jsx(Bs,{className:"w-4 h-4"})]}),i&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 rounded-xl shadow-lg bg-[#2A2A3A] border border-gray-700",children:e.jsxs("div",{className:"py-1",children:[e.jsxs(Ot,{to:"/employee/profile",className:"block px-4 py-2 text-sm text-gray-300 hover:bg-[#1E1E2A] rounded-lg transition-colors",onClick:()=>d(!1),children:[e.jsx(Ze,{className:"w-4 h-4 inline mr-2"}),"My Profile"]}),e.jsx("hr",{className:"my-1 border-gray-700"}),e.jsxs("button",{onClick:o,className:"block w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-[#1E1E2A] rounded-lg transition-colors",children:[e.jsx(Is,{className:"w-4 h-4 inline mr-2"}),"Logout"]})]})})]})]})]})})}),e.jsx("main",{className:"p-4 sm:p-6 lg:p-8",children:e.jsx(Ls,{})})]}),s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",onClick:()=>l(!1)})]})},Wn=[{icon:_a,title:"Compliance Ready",description:"Enforce SPC policies with audited workflows and secure access controls."},{icon:he,title:"People Operations",description:"Coordinate HR, Admin, and recruitment activity across every SPC client."},{icon:$s,title:"360° Insights",description:"Spot bottlenecks instantly with dynamic dashboards and SLA monitoring."}],Gn=()=>{const t=Ie();return e.jsxs("div",{className:"relative min-h-screen overflow-hidden bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-slate-100",children:[e.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[e.jsx("div",{className:"absolute -top-32 -left-32 h-96 w-96 rounded-full bg-emerald-500/10 blur-3xl"}),e.jsx("div",{className:"absolute top-1/2 right-[-10%] h-[420px] w-[420px] -translate-y-1/2 rounded-full bg-sky-500/10 blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-1/2 h-48 w-[720px] -translate-x-1/2 bg-gradient-to-t from-slate-900 via-slate-900/0 to-transparent blur-3xl"})]}),e.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center px-4 py-16",children:e.jsxs("div",{className:"grid w-full max-w-6xl gap-12 lg:grid-cols-[1.25fr_1fr]",children:[e.jsxs("div",{className:"space-y-10",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-500/40 bg-emerald-500/10 px-4 py-2 text-sm font-medium text-emerald-300",children:[e.jsx(zt,{size:16}),"SPC Management Portal"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-4xl font-semibold tracking-tight text-slate-100 md:text-5xl",children:"A dedicated launchpad for every SPC engagement"}),e.jsx("p",{className:"max-w-2xl text-lg leading-relaxed text-slate-300",children:"Seamlessly onboard consultants, monitor progress, and deliver compliant HR services from a single, unified workspace. Tailored controls and curated insights keep your SPC operations laser-focused."})]}),e.jsxs("button",{onClick:()=>t("/login/spc-management"),className:"group inline-flex w-full items-center justify-center gap-2 rounded-2xl bg-emerald-500 px-6 py-4 text-lg font-semibold text-slate-900 shadow-[0_20px_45px_-20px_rgba(16,185,129,0.9)] transition-transform duration-200 hover:-translate-y-0.5 hover:bg-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-300 md:w-auto",children:["Access SPC Portal",e.jsx($a,{size:20,className:"transition-transform group-hover:translate-x-1"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Wn.map(({icon:a,title:n,description:r})=>e.jsxs("div",{className:"rounded-2xl border border-white/5 bg-white/5 p-5 backdrop-blur-sm transition hover:border-emerald-400/60 hover:bg-emerald-500/10",children:[e.jsx("div",{className:"mb-4 inline-flex h-12 w-12 items-center justify-center rounded-xl bg-emerald-500/15 text-emerald-300",children:e.jsx(a,{size:22})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:n}),e.jsx("p",{className:"mt-2 text-sm text-slate-300/90",children:r})]},n))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 -z-10 rounded-[32px] bg-gradient-to-br from-white/10 via-white/5 to-transparent blur-2xl"}),e.jsxs("div",{className:"rounded-[32px] border border-white/5 bg-slate-950/70 px-8 py-10 shadow-[0_35px_60px_-35px_rgba(30,64,175,0.45)] backdrop-blur-xl",children:[e.jsxs("div",{className:"mb-8 space-y-4 text-center",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-emerald-500/15 text-emerald-300",children:e.jsx(be,{size:28})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-slate-100",children:"Purpose-built for SPC crews"}),e.jsx("p",{className:"mt-2 text-sm leading-relaxed text-slate-300/90",children:"Log in with your authorized SPC credentials to continue tracking consultants, clients, and deliverables across the HRMS ecosystem."})]})]}),e.jsxs("div",{className:"space-y-5 rounded-2xl border border-white/5 bg-white/5 p-6 text-left",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-emerald-300/80",children:"What you get"}),e.jsx("h3",{className:"mt-3 text-xl font-semibold text-slate-100",children:"Operational clarity in minutes"})]}),e.jsxs("ul",{className:"space-y-3 text-sm text-slate-300/95",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-emerald-400"}),"Unified access for HR and Admin teams with granular permissions."]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-emerald-400"}),"Real-time candidate pipelines synced with the SPC tenant database."]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"mt-1 h-2.5 w-2.5 rounded-full bg-emerald-400"}),"Automated compliance alerts so deadlines never slip through the cracks."]})]})]}),e.jsx("div",{className:"rounded-2xl border border-emerald-400/30 bg-emerald-500/10 px-5 py-4 text-sm text-emerald-200",children:"Need access? Contact the SPC administration desk to provision your secure login."})]})]})]})]})}),e.jsx("div",{className:"relative z-10 px-6 pb-8 pt-4 text-center text-xs text-slate-500",children:"Need help? Reach out to the SPC system administrator."})]})},Kn=()=>{const t=Ie(),[a,n]=u.useState([]),[r,s]=u.useState([]),[l,i]=u.useState(""),[d,h]=u.useState(!0);u.useEffect(()=>{p()},[]),u.useEffect(()=>{if(l.trim()==="")s(a);else{const o=a.filter(f=>f.companyName.toLowerCase().includes(l.toLowerCase())||f.companyCode.toLowerCase().includes(l.toLowerCase()));s(o)}},[l,a]);const p=async()=>{try{console.log("Fetching companies from:",`${De.apiBaseUrl}/auth/companies`);const o=await le.get(`${De.apiBaseUrl}/auth/companies`);console.log("Companies response:",o.data),o.data.success&&(n(o.data.data),s(o.data.data))}catch(o){T.error("Failed to load companies"),console.error("Error fetching companies:",o)}finally{h(!1)}},m=o=>{const f={id:o.companyId||o._id,name:o.companyName,code:o.companyCode,databaseName:o.tenantDatabaseName||o.databaseName};localStorage.setItem("selectedCompany",JSON.stringify(f));const j=o.companyName.toLowerCase().replace(/\s+/g,"-");t(`/login/${j}`,{state:{company:f}})};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4 py-8",children:e.jsxs("div",{className:"w-full max-w-4xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/logo2.png",alt:"Company Logo",className:"h-16 w-auto rounded-2xl shadow-md border-2 border-white/10"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Select Your Company"}),e.jsx("p",{className:"text-gray-400",children:"Choose your organization to continue"})]}),e.jsxs("button",{onClick:()=>t("/login"),className:"flex items-center text-gray-400 hover:text-white mb-6 transition-colors",children:[e.jsx(vt,{size:20,className:"mr-2"}),"Back to login options"]}),e.jsx("div",{className:"card mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Fe,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:"text",value:l,onChange:o=>i(o.target.value),className:"input-field pl-10",placeholder:"Search by company name or code..."})]})}),e.jsx("div",{className:"card",children:d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Oe,{size:40,className:"text-primary-500 animate-spin"})}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(jt,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:l?"No companies found matching your search":"No companies available"})]}):e.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:e.jsx("div",{className:"grid gap-3",children:r.map(o=>{var f;return e.jsxs("button",{onClick:()=>m(o),className:"flex items-center p-4 rounded-lg bg-dark-800 hover:bg-dark-700 border border-dark-700 hover:border-primary-500 transition-all text-left group",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-primary-500/10 group-hover:bg-primary-500/20 transition-colors mr-4",children:e.jsx(jt,{size:24,className:"text-primary-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-semibold mb-1",children:o.companyName}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[e.jsxs("span",{children:["Code: ",o.companyCode]}),((f=o.subscription)==null?void 0:f.plan)&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-primary-500/20 text-primary-400 text-xs",children:o.subscription.plan}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${o.status==="active"?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:o.status})]})]})]},o._id)})})})}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-6",children:"Can't find your company? Contact your system administrator"})]})})};function Yn(t={}){const{nonce:a,onScriptLoadSuccess:n,onScriptLoadError:r}=t,[s,l]=u.useState(!1),i=u.useRef(n);i.current=n;const d=u.useRef(r);return d.current=r,u.useEffect(()=>{const h=document.createElement("script");return h.src="https://accounts.google.com/gsi/client",h.async=!0,h.defer=!0,h.nonce=a,h.onload=()=>{var p;l(!0),(p=i.current)===null||p===void 0||p.call(i)},h.onerror=()=>{var p;l(!1),(p=d.current)===null||p===void 0||p.call(d)},document.body.appendChild(h),()=>{document.body.removeChild(h)}},[a]),s}const Ca=u.createContext(null);function Xn({clientId:t,nonce:a,onScriptLoadSuccess:n,onScriptLoadError:r,children:s}){const l=Yn({nonce:a,onScriptLoadSuccess:n,onScriptLoadError:r}),i=u.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:l}),[t,l]);return tt.createElement(Ca.Provider,{value:i},s)}function Qn(){const t=u.useContext(Ca);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function Zn(t){var a;return(a=t==null?void 0:t.clientId)!==null&&a!==void 0?a:t==null?void 0:t.client_id}const el={large:40,medium:32,small:20};function tl({onSuccess:t,onError:a,useOneTap:n,promptMomentNotification:r,type:s="standard",theme:l="outline",size:i="large",text:d,shape:h,logo_alignment:p,width:m,locale:o,click_listener:f,containerProps:j,...x}){const v=u.useRef(null),{clientId:k,scriptLoadedSuccessfully:A}=Qn(),w=u.useRef(t);w.current=t;const F=u.useRef(a);F.current=a;const N=u.useRef(r);return N.current=r,u.useEffect(()=>{var b,c,C,R,E,g,P,O,Q;if(A)return(C=(c=(b=window==null?void 0:window.google)===null||b===void 0?void 0:b.accounts)===null||c===void 0?void 0:c.id)===null||C===void 0||C.initialize({client_id:k,callback:H=>{var te;if(!(H!=null&&H.credential))return(te=F.current)===null||te===void 0?void 0:te.call(F);const{credential:J,select_by:W}=H;w.current({credential:J,clientId:Zn(H),select_by:W})},...x}),(g=(E=(R=window==null?void 0:window.google)===null||R===void 0?void 0:R.accounts)===null||E===void 0?void 0:E.id)===null||g===void 0||g.renderButton(v.current,{type:s,theme:l,size:i,text:d,shape:h,logo_alignment:p,width:m,locale:o,click_listener:f}),n&&((Q=(O=(P=window==null?void 0:window.google)===null||P===void 0?void 0:P.accounts)===null||O===void 0?void 0:O.id)===null||Q===void 0||Q.prompt(N.current)),()=>{var H,te,J;n&&((J=(te=(H=window==null?void 0:window.google)===null||H===void 0?void 0:H.accounts)===null||te===void 0?void 0:te.id)===null||J===void 0||J.cancel())}},[k,A,n,s,l,i,d,h,p,m,o]),tt.createElement("div",{...j,ref:v,style:{height:el[i],...j==null?void 0:j.style}})}const sl=()=>{const t=Ie();Nt();const{companySlug:a}=Bt(),{login:n,googleLogin:r}=_e(),[s,l]=u.useState(null),[i,d]=u.useState({email:"",password:""}),[h,p]=u.useState(!1),[m,o]=u.useState(!1),[f,j]=u.useState(!0);u.useEffect(()=>{a?(async()=>{try{const N=JSON.parse(localStorage.getItem("selectedCompany")||"null");if(N&&N.name.toLowerCase().replace(/\s+/g,"-")===a){l(N),j(!1);return}const b=await le.get(`${De.apiBaseUrl}/auth/companies`);if(b.data.success){const c=b.data.data.find(C=>C.companyName.toLowerCase().replace(/\s+/g,"-")===a);if(c){const C={id:c.companyId||c._id,name:c.companyName,code:c.companyCode,databaseName:c.tenantDatabaseName||c.databaseName};l(C),localStorage.setItem("selectedCompany",JSON.stringify(C))}else T.error("Company not found"),t("/login/company-select")}}catch(N){console.error("Error fetching company:",N),T.error("Failed to load company"),t("/login/company-select")}finally{j(!1)}})():(T.error("Please select a company first"),t("/login/company-select"))},[a,t]);const x=F=>{d({...i,[F.target.name]:F.target.value})},v=async F=>{F.preventDefault(),o(!0),console.log("🔐 Login attempt:",{email:i.email,companyId:s==null?void 0:s.id,companyName:s==null?void 0:s.name});const N=await n(i.email,i.password,s==null?void 0:s.id);if(console.log("📊 Login result:",N),N.success){T.success("Login successful!");const b=JSON.parse(localStorage.getItem("user"));(b==null?void 0:b.role)==="employee"||(b==null?void 0:b.role)==="manager"||(b==null?void 0:b.role)==="hr"?t("/employee/dashboard"):((b==null?void 0:b.role)==="company_admin"||(b==null||b.role),t("/dashboard"))}else T.error(N.message||"Invalid credentials");o(!1)},k=async F=>{o(!0);const N=await r(F.credential,s==null?void 0:s.databaseName);if(N.success){T.success("Login successful!");const b=JSON.parse(localStorage.getItem("user"));(b==null?void 0:b.role)==="employee"?t("/employee/dashboard"):t("/dashboard")}else T.error(N.message||"Google login failed");o(!1)},A=()=>{T.error("Google login failed. Please try again.")},w=()=>{localStorage.removeItem("selectedCompany"),t("/login/company-select")};return f?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading company..."})]})}):s?e.jsx(Xn,{clientId:void 0,children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("button",{onClick:w,className:"flex items-center text-gray-400 hover:text-white mb-6 transition-colors",children:[e.jsx(vt,{size:20,className:"mr-2"}),"Change company"]}),e.jsx("div",{className:"card mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-primary-500/10 mr-4",children:e.jsx(jt,{size:24,className:"text-primary-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Code: ",s.code]})]})]})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/logo2.png",alt:"Company Logo",className:"h-16 w-auto rounded-2xl shadow-md border-2 border-white/10"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-400",children:"Sign in to your account"})]}),e.jsxs("div",{className:"card",children:[e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Se,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:"email",name:"email",value:i.email,onChange:x,className:"input-field pl-10",placeholder:"you@example.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(_s,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:h?"text":"password",name:"password",value:i.password,onChange:x,className:"input-field pl-10 pr-10",placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",onClick:()=>p(!h),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-300",children:h?e.jsx(Ms,{size:20}):e.jsx(st,{size:20})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-primary-600 bg-dark-800 border-dark-700 rounded focus:ring-primary-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-400",children:"Remember me"})]}),e.jsx("button",{type:"button",className:"text-sm text-primary-500 hover:text-primary-400",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:m,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Signing in...":"Sign In"})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-dark-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-dark-900 text-gray-400",children:"Or continue with"})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(tl,{onSuccess:k,onError:A,theme:"filled_black",size:"large",width:"100%",text:"signin_with"})})]}),e.jsxs("p",{className:"text-center text-sm text-gray-400 mt-6",children:["Need help?"," ",e.jsx("button",{className:"text-primary-500 hover:text-primary-400",children:"Contact your HR department"})]})]})})}):null},al="SPC Management",rl=()=>{const t=Ie(),{login:a,updateUser:n}=_e(),[r,s]=u.useState(null),[l,i]=u.useState(!0),[d,h]=u.useState(!1),[p,m]=u.useState(!1),[o,f]=u.useState({email:"",password:""});u.useEffect(()=>{(async()=>{try{const k=await le.get(`${De.apiBaseUrl}/auth/companies`);if(k.data.success){const A=k.data.data.find(F=>F.companyName===al);if(!A){T.error("SPC Management company not found"),t("/login");return}const w={id:A.companyId||A._id,name:A.companyName,code:A.companyCode,databaseName:A.tenantDatabaseName||A.databaseName};s(w),localStorage.setItem("selectedCompany",JSON.stringify(w))}}catch(k){console.error("Error fetching SPC company:",k),T.error("Failed to load SPC company"),t("/login")}finally{i(!1)}})()},[t]);const j=v=>{f({...o,[v.target.name]:v.target.value})},x=async v=>{v.preventDefault(),m(!0);const k=await a(o.email,o.password,r==null?void 0:r.id);if(k.success){const A=JSON.parse(localStorage.getItem("user"));if((A==null?void 0:A.role)==="company_admin"){const F={...A,role:"admin"};n(F)}T.success("Login successful!");const w=JSON.parse(localStorage.getItem("user"));(w==null?void 0:w.role)==="hr"?t("/job-desk"):t("/dashboard")}else T.error(k.message||"Invalid credentials");m(!1)};return l?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading SPC Management..."})]})}):r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("button",{onClick:()=>t("/login"),className:"flex items-center text-gray-400 hover:text-white mb-6 transition-colors",children:[e.jsx(vt,{size:20,className:"mr-2"}),"Back to login options"]}),e.jsx("div",{className:"card mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-emerald-500/10 mr-4",children:e.jsx(be,{size:24,className:"text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Code: ",r.code]})]})]})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/logo2.png",alt:"Company Logo",className:"h-16 w-auto rounded-2xl shadow-md border-2 border-white/10"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"SPC Management Login"}),e.jsx("p",{className:"text-gray-400",children:"Sign in with your SPC credentials"})]}),e.jsx("div",{className:"card",children:e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Se,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:"email",name:"email",value:o.email,onChange:j,className:"input-field pl-10",placeholder:"you@spc.com",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(_s,{size:20,className:"text-gray-500"})}),e.jsx("input",{type:d?"text":"password",name:"password",value:o.password,onChange:j,className:"input-field pl-10 pr-10",placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-300",children:d?e.jsx(Ms,{size:20}):e.jsx(st,{size:20})})]})]}),e.jsx("button",{type:"submit",disabled:p,className:"w-full btn-primary py-3 text-base font-medium",children:p?"Signing in...":"Sign In"})]})})]})}):null},nl=({job:t,onClose:a,onSubmit:n})=>{var R;const[r,s]=u.useState(!1),[l,i]=u.useState({firstName:"",lastName:"",email:"",phone:"",alternatePhone:"",currentLocation:"",preferredLocation:[],experience:{years:"",months:""},professionalExperience:[{company:"",designation:"",startDate:"",endDate:"",currentlyWorking:!1,responsibilities:"",achievements:"",technologies:[],ctc:"",reasonForLeaving:""}],currentCompany:"",currentDesignation:"",currentCTC:"",expectedCTC:"",noticePeriod:"",skills:[],education:[{degree:"",specialization:"",institution:"",passingYear:"",percentage:""}],resume:null}),[d,h]=u.useState(""),[p,m]=u.useState(""),o=E=>{const{name:g,value:P}=E.target;if(g.includes(".")){const[O,Q]=g.split(".");i(H=>({...H,[O]:{...H[O],[Q]:P}}))}else i(O=>({...O,[g]:P}))},f=(E,g,P)=>{const O=[...l.education];O[E][g]=P,i(Q=>({...Q,education:O}))},j=()=>{i(E=>({...E,education:[...E.education,{degree:"",specialization:"",institution:"",passingYear:"",percentage:""}]}))},x=E=>{l.education.length>1&&i(g=>({...g,education:g.education.filter((P,O)=>O!==E)}))},v=()=>{d.trim()&&!l.skills.includes(d.trim())&&(i(E=>({...E,skills:[...E.skills,d.trim()]})),h(""))},k=E=>{i(g=>({...g,skills:g.skills.filter(P=>P!==E)}))},A=()=>{p.trim()&&!l.preferredLocation.includes(p.trim())&&(i(E=>({...E,preferredLocation:[...E.preferredLocation,p.trim()]})),m(""))},w=E=>{i(g=>({...g,preferredLocation:g.preferredLocation.filter(P=>P!==E)}))},F=()=>{i(E=>({...E,professionalExperience:[...E.professionalExperience,{company:"",designation:"",startDate:"",endDate:"",currentlyWorking:!1,responsibilities:"",achievements:"",technologies:[],ctc:"",reasonForLeaving:""}]}))},N=E=>{i(g=>({...g,professionalExperience:g.professionalExperience.filter((P,O)=>O!==E)}))},b=(E,g,P)=>{i(O=>({...O,professionalExperience:O.professionalExperience.map((Q,H)=>H===E?{...Q,[g]:P}:Q)}))},c=E=>{const g=E.target.files[0];if(g){if(g.type!=="application/pdf"){T.error("Please upload only PDF files");return}if(g.size>5*1024*1024){T.error("File size must be less than 5MB");return}i(P=>({...P,resume:g}))}},C=async E=>{if(E.preventDefault(),!l.firstName||!l.lastName||!l.email||!l.phone){T.error("Please fill in all required fields");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)){T.error("Please enter a valid email address");return}if(!/^[0-9]{10,15}$/.test(l.phone.replace(/[\s\-\(\)]/g,""))){T.error("Please enter a valid phone number (10-15 digits)");return}s(!0);try{const O=new FormData;console.log("Preparing form data:",l),O.append("firstName",l.firstName),O.append("lastName",l.lastName),O.append("email",l.email),O.append("phone",l.phone),O.append("alternatePhone",l.alternatePhone||""),O.append("currentLocation",l.currentLocation||""),O.append("preferredLocation",JSON.stringify(l.preferredLocation)),O.append("experience[years]",parseInt(l.experience.years)||0),O.append("experience[months]",parseInt(l.experience.months)||0);const Q=l.professionalExperience.filter(W=>W.company&&W.designation);O.append("professionalExperience",JSON.stringify(Q)),O.append("currentCompany",l.currentCompany||""),O.append("currentDesignation",l.currentDesignation||"");const H=parseFloat(l.currentCTC);!isNaN(H)&&H>0&&O.append("currentCTC",H);const te=parseFloat(l.expectedCTC);!isNaN(te)&&te>0&&O.append("expectedCTC",te);const J=parseInt(l.noticePeriod);!isNaN(J)&&J>=0&&O.append("noticePeriod",J),O.append("skills",JSON.stringify(l.skills)),O.append("education",JSON.stringify(l.education.filter(W=>W.degree&&W.institution))),l.resume&&(O.append("resume",l.resume),console.log("Resume file added:",l.resume.name)),console.log("FormData entries:");for(let[W,K]of O.entries())console.log(W,typeof K=="object"?"File":K);await n(O)}catch{}finally{s(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-dark-900 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-gray-700 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Apply for ",t.title]}),e.jsxs("p",{className:"text-gray-400 mt-1",children:[(R=t.department)==null?void 0:R.name," • ",t.location]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-dark-800 rounded-lg transition-colors",children:e.jsx(oe,{size:24,className:"text-gray-400"})})]}),e.jsxs("form",{onSubmit:C,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(Ze,{size:20,className:"text-primary-400"}),e.jsx("span",{children:"Personal Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstName",value:l.firstName,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastName",value:l.lastName,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:l.email,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone *"}),e.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Alternate Phone"}),e.jsx("input",{type:"tel",name:"alternatePhone",value:l.alternatePhone,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Location"}),e.jsx("input",{type:"text",name:"currentLocation",value:l.currentLocation,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preferred Locations"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:p,onChange:E=>m(E.target.value),onKeyPress:E=>E.key==="Enter"&&(E.preventDefault(),A()),placeholder:"Add location and press Enter",className:"flex-1 px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg",children:"Add"})]}),l.preferredLocation.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:l.preferredLocation.map((E,g)=>e.jsxs("span",{className:"inline-flex items-center space-x-1 bg-primary-900/30 text-primary-400 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:E}),e.jsx("button",{type:"button",onClick:()=>w(E),className:"hover:text-primary-300",children:e.jsx(oe,{size:14})})]},g))})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(be,{size:20,className:"text-primary-400"}),e.jsx("span",{children:"Professional Experience"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Experience (Years)"}),e.jsx("input",{type:"number",name:"experience.years",value:l.experience.years,onChange:o,min:"0",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Months"}),e.jsx("input",{type:"number",name:"experience.months",value:l.experience.months,onChange:o,min:"0",max:"11",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Company"}),e.jsx("input",{type:"text",name:"currentCompany",value:l.currentCompany,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Designation"}),e.jsx("input",{type:"text",name:"currentDesignation",value:l.currentDesignation,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current CTC (Annual)"}),e.jsx("input",{type:"number",name:"currentCTC",value:l.currentCTC,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expected CTC (Annual)"}),e.jsx("input",{type:"number",name:"expectedCTC",value:l.expectedCTC,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notice Period (Days)"}),e.jsx("input",{type:"number",name:"noticePeriod",value:l.noticePeriod,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(Us,{size:20,className:"text-primary-400"}),e.jsx("span",{children:"Skills"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:d,onChange:E=>h(E.target.value),onKeyPress:E=>E.key==="Enter"&&(E.preventDefault(),v()),placeholder:"Add skill and press Enter",className:"flex-1 px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg",children:"Add"})]}),l.skills.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:l.skills.map((E,g)=>e.jsxs("span",{className:"inline-flex items-center space-x-1 bg-primary-900/30 text-primary-400 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:E}),e.jsx("button",{type:"button",onClick:()=>k(E),className:"hover:text-primary-300",children:e.jsx(oe,{size:14})})]},g))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(be,{size:20,className:"text-primary-400"}),e.jsx("span",{children:"Detailed Work Experience"})]}),l.professionalExperience.map((E,g)=>e.jsxs("div",{className:"mb-4 p-4 bg-dark-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-white font-medium",children:["Experience ",g+1]}),l.professionalExperience.length>1&&e.jsx("button",{type:"button",onClick:()=>N(g),className:"text-red-400 hover:text-red-300",children:e.jsx(oe,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Company Name *"}),e.jsx("input",{type:"text",value:E.company,onChange:P=>b(g,"company",P.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Designation *"}),e.jsx("input",{type:"text",value:E.designation,onChange:P=>b(g,"designation",P.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:E.startDate,onChange:P=>b(g,"startDate",P.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:E.endDate,onChange:P=>b(g,"endDate",P.target.value),disabled:E.currentlyWorking,className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center space-x-2 text-sm text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:E.currentlyWorking,onChange:P=>b(g,"currentlyWorking",P.target.checked),className:"rounded bg-dark-700 border-gray-600 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{children:"Currently working here"})]})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key Responsibilities"}),e.jsx("textarea",{value:E.responsibilities,onChange:P=>b(g,"responsibilities",P.target.value),rows:3,className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Describe your key responsibilities..."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key Achievements"}),e.jsx("textarea",{value:E.achievements,onChange:P=>b(g,"achievements",P.target.value),rows:2,className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Highlight your key achievements..."})]})]})]},g)),e.jsx("button",{type:"button",onClick:F,className:"w-full py-2 border-2 border-dashed border-gray-600 rounded-lg text-gray-400 hover:border-primary-500 hover:text-primary-400 transition-colors",children:"+ Add Another Experience"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(Je,{size:20,className:"text-primary-400"}),e.jsx("span",{children:"Resume Upload"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",id:"resume-upload",accept:".pdf",onChange:c,className:"hidden"}),e.jsxs("label",{htmlFor:"resume-upload",className:"cursor-pointer flex flex-col items-center space-y-2",children:[e.jsx(Je,{size:48,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:l.resume?l.resume.name:"Upload your resume"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"PDF files only, max 5MB"})]})]}),l.resume&&e.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-2",children:[e.jsxs("span",{className:"text-green-400 text-sm",children:["✓ ",l.resume.name," (",(l.resume.size/1024/1024).toFixed(2)," MB)"]}),e.jsx("button",{type:"button",onClick:()=>i(E=>({...E,resume:null})),className:"text-red-400 hover:text-red-300",children:e.jsx(oe,{size:16})})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[e.jsx(Ma,{size:20,className:"text-primary-400"}),e.jsx("span",{children:"Education"})]}),l.education.map((E,g)=>e.jsxs("div",{className:"mb-4 p-4 bg-dark-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-white font-medium",children:["Education ",g+1]}),l.education.length>1&&e.jsx("button",{type:"button",onClick:()=>x(g),className:"text-red-400 hover:text-red-300",children:e.jsx(oe,{size:18})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Degree"}),e.jsx("input",{type:"text",value:E.degree,onChange:P=>f(g,"degree",P.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Specialization"}),e.jsx("input",{type:"text",value:E.specialization,onChange:P=>f(g,"specialization",P.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Institution"}),e.jsx("input",{type:"text",value:E.institution,onChange:P=>f(g,"institution",P.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Passing Year"}),e.jsx("input",{type:"number",value:E.passingYear,onChange:P=>f(g,"passingYear",P.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Percentage/CGPA"}),e.jsx("input",{type:"number",step:"0.01",value:E.percentage,onChange:P=>f(g,"percentage",P.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]},g)),e.jsx("button",{type:"button",onClick:j,className:"text-primary-400 hover:text-primary-300 text-sm font-medium",children:"+ Add Another Education"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-2 bg-dark-800 hover:bg-dark-700 text-white rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:r,className:"px-6 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:r?e.jsxs(e.Fragment,{children:[e.jsx(at,{size:20,className:"animate-spin"}),e.jsx("span",{children:"Submitting..."})]}):e.jsx("span",{children:"Submit Application"})})]})]})]})})},ll=({isOpen:t,onClose:a})=>{const[n,r]=u.useState(!1),[s,l]=u.useState({name:"",email:"",phone:"",desiredDepartment:"",desiredPosition:"",experience:{years:"",months:""},currentCompany:"",currentDesignation:"",currentCTC:"",expectedCTC:"",noticePeriod:"",skills:[],education:[{degree:"",specialization:"",institution:"",passingYear:"",percentage:""}],currentLocation:"",preferredLocation:[],comments:""}),[i,d]=u.useState(""),[h,p]=u.useState(""),m=De.apiBaseUrl,o=A=>{const{name:w,value:F}=A.target;if(w.includes(".")){const[N,b]=w.split(".");l(c=>({...c,[N]:{...c[N],[b]:F}}))}else l(N=>({...N,[w]:F}))},f=()=>{i.trim()&&!s.skills.includes(i.trim())&&(l(A=>({...A,skills:[...A.skills,i.trim()]})),d(""))},j=A=>{l(w=>({...w,skills:w.skills.filter(F=>F!==A)}))},x=()=>{h.trim()&&!s.preferredLocation.includes(h.trim())&&(l(A=>({...A,preferredLocation:[...A.preferredLocation,h.trim()]})),p(""))},v=A=>{l(w=>({...w,preferredLocation:w.preferredLocation.filter(F=>F!==A)}))},k=async A=>{var N,b;if(A.preventDefault(),!s.name||!s.email||!s.phone||!s.desiredDepartment||!s.desiredPosition){T.error("Please fill in all required fields");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)){T.error("Please enter a valid email address");return}if(!/^[0-9]{10,15}$/.test(s.phone.replace(/[\s\-\(\)]/g,""))){T.error("Please enter a valid phone number (10-15 digits)");return}r(!0);try{const c={...s,experience:{years:parseInt(s.experience.years)||0,months:parseInt(s.experience.months)||0},currentCTC:parseFloat(s.currentCTC)||void 0,expectedCTC:parseFloat(s.expectedCTC)||void 0,noticePeriod:parseInt(s.noticePeriod)||void 0,education:s.education.filter(R=>R.degree&&R.institution)},C=await le.post(`${m}/public/jobs/talent-pool/submit`,c);T.success(C.data.message),a(),l({name:"",email:"",phone:"",desiredDepartment:"",desiredPosition:"",experience:{years:"",months:""},currentCompany:"",currentDesignation:"",currentCTC:"",expectedCTC:"",noticePeriod:"",skills:[],education:[{degree:"",specialization:"",institution:"",passingYear:"",percentage:""}],currentLocation:"",preferredLocation:[],comments:""})}catch(c){const C=((b=(N=c.response)==null?void 0:N.data)==null?void 0:b.message)||"Failed to submit resume";T.error(C)}finally{r(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-dark-900 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-gray-700 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Submit Your Resume"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"We'll contact you when a suitable opportunity arises"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-dark-800 rounded-lg transition-colors",children:e.jsx(oe,{size:24,className:"text-gray-400"})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone *"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Location"}),e.jsx("input",{type:"text",name:"currentLocation",value:s.currentLocation,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Desired Position"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Department of Interest *"}),e.jsx("input",{type:"text",name:"desiredDepartment",value:s.desiredDepartment,onChange:o,placeholder:"e.g., Engineering, Sales, Marketing",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Desired Position *"}),e.jsx("input",{type:"text",name:"desiredPosition",value:s.desiredPosition,onChange:o,placeholder:"e.g., Software Engineer, Sales Manager",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preferred Locations"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:h,onChange:A=>p(A.target.value),onKeyPress:A=>A.key==="Enter"&&(A.preventDefault(),x()),placeholder:"Add location and press Enter",className:"flex-1 px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg",children:"Add"})]}),s.preferredLocation.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.preferredLocation.map((A,w)=>e.jsxs("span",{className:"inline-flex items-center space-x-1 bg-primary-900/30 text-primary-400 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:A}),e.jsx("button",{type:"button",onClick:()=>v(A),className:"hover:text-primary-300",children:e.jsx(oe,{size:14})})]},w))})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Professional Experience"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Years of Experience"}),e.jsx("input",{type:"number",name:"experience.years",value:s.experience.years,onChange:o,min:"0",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Months"}),e.jsx("input",{type:"number",name:"experience.months",value:s.experience.months,onChange:o,min:"0",max:"11",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Company"}),e.jsx("input",{type:"text",name:"currentCompany",value:s.currentCompany,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Designation"}),e.jsx("input",{type:"text",name:"currentDesignation",value:s.currentDesignation,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current CTC (Annual)"}),e.jsx("input",{type:"number",name:"currentCTC",value:s.currentCTC,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expected CTC (Annual)"}),e.jsx("input",{type:"number",name:"expectedCTC",value:s.expectedCTC,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notice Period (Days)"}),e.jsx("input",{type:"number",name:"noticePeriod",value:s.noticePeriod,onChange:o,className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Skills"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:i,onChange:A=>d(A.target.value),onKeyPress:A=>A.key==="Enter"&&(A.preventDefault(),f()),placeholder:"Add skill and press Enter",className:"flex-1 px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg",children:"Add"})]}),s.skills.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.skills.map((A,w)=>e.jsxs("span",{className:"inline-flex items-center space-x-1 bg-primary-900/30 text-primary-400 px-3 py-1 rounded-full text-sm",children:[e.jsx("span",{children:A}),e.jsx("button",{type:"button",onClick:()=>j(A),className:"hover:text-primary-300",children:e.jsx(oe,{size:14})})]},w))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Comments"}),e.jsx("textarea",{name:"comments",value:s.comments,onChange:o,rows:"4",placeholder:"Tell us more about yourself, your career goals, or any specific requirements...",className:"w-full px-4 py-2 bg-dark-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-2 bg-dark-800 hover:bg-dark-700 text-white rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs(e.Fragment,{children:[e.jsx(at,{size:20,className:"animate-spin"}),e.jsx("span",{children:"Submitting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{size:20}),e.jsx("span",{children:"Submit Resume"})]})})]})]})]})}):null},Rs=()=>{var W,K;const[t,a]=u.useState([]),[n,r]=u.useState([]),[s,l]=u.useState(!0),[i,d]=u.useState(""),[h,p]=u.useState(""),[m,o]=u.useState(""),[f,j]=u.useState(""),[x,v]=u.useState(null),[k,A]=u.useState(!1),[w,F]=u.useState(!1),[N,b]=u.useState(null),c=De.apiBaseUrl;u.useEffect(()=>{C(),R()},[]),u.useEffect(()=>{E()},[t,i,h,m,f]);const C=async()=>{var L,_,Y,se;try{l(!0);const D=await le.get(`${c}/public/jobs`,{params:{companyId:"696b515db6c9fd5fd51aed1c",_t:Date.now()},headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});console.log("📋 Public Jobs API Response:",D.data),console.log("📊 Jobs Data:",D.data.data),console.log("📈 Jobs Count:",(L=D.data.data)==null?void 0:L.length),D.data.success&&D.data.data?(a(D.data.data),r(D.data.data)):(console.warn("⚠️ Unexpected response format:",D.data),a([]),r([]))}catch(D){console.error("❌ Error fetching jobs:",D),console.error("Error response:",(_=D.response)==null?void 0:_.data),T.error(((se=(Y=D.response)==null?void 0:Y.data)==null?void 0:se.message)||"Failed to load job postings"),a([]),r([])}finally{l(!1)}},R=async()=>{try{const L=await le.get(`${c}/public/jobs/stats`,{params:{companyId:"696b515db6c9fd5fd51aed1c"}});b(L.data.data)}catch(L){console.error("Error fetching stats:",L)}},E=()=>{let L=[...t];i&&(L=L.filter(_=>{var Y;return _.title.toLowerCase().includes(i.toLowerCase())||_.description.toLowerCase().includes(i.toLowerCase())||((Y=_.department)==null?void 0:Y.name.toLowerCase().includes(i.toLowerCase()))})),h&&(L=L.filter(_=>{var Y;return((Y=_.department)==null?void 0:Y._id)===h})),m&&(L=L.filter(_=>_.location===m)),f&&(L=L.filter(_=>_.employmentType===f)),r(L)},g=L=>{v(L),A(!0)},P=async L=>{var _,Y;try{const se=await le.post(`${c}/public/jobs/${x._id}/apply`,L,{headers:{"Content-Type":"multipart/form-data"}});T.success(se.data.message),A(!1),v(null)}catch(se){const D=((Y=(_=se.response)==null?void 0:_.data)==null?void 0:Y.message)||"Failed to submit application";throw T.error(D),se}},O=()=>{d(""),p(""),o(""),j("")},Q=[...new Set(t.map(L=>L.department).filter(Boolean))],H=[...new Set(t.map(L=>L.location).filter(Boolean))],te=[...new Set(t.map(L=>L.employmentType).filter(Boolean))],J=i||h||m||f;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-dark-900 to-gray-900",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-800 text-white py-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Join Our Team"}),e.jsx("p",{className:"text-xl md:text-2xl text-primary-100 mb-8",children:"Discover exciting career opportunities and grow with us"}),N&&e.jsxs("div",{className:"flex justify-center space-x-8 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold",children:N.totalJobs}),e.jsx("div",{className:"text-primary-200",children:"Open Positions"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold",children:((W=N.byDepartment)==null?void 0:W.length)||0}),e.jsx("div",{className:"text-primary-200",children:"Departments"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold",children:((K=N.byLocation)==null?void 0:K.length)||0}),e.jsx("div",{className:"text-primary-200",children:"Locations"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8",children:e.jsxs("div",{className:"bg-dark-800 rounded-lg shadow-xl p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2 relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search jobs...",value:i,onChange:L=>d(L.target.value),className:"w-full pl-10 pr-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("select",{value:h,onChange:L=>p(L.target.value),className:"px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Departments"}),Q.map(L=>e.jsx("option",{value:L._id,children:L.name},L._id))]}),e.jsxs("select",{value:m,onChange:L=>o(L.target.value),className:"px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Locations"}),H.map(L=>e.jsx("option",{value:L,children:L},L))]}),e.jsxs("select",{value:f,onChange:L=>j(L.target.value),className:"px-4 py-2 bg-dark-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Types"}),te.map(L=>e.jsx("option",{value:L,children:L.split("-").map(_=>_.charAt(0).toUpperCase()+_.slice(1)).join(" ")},L))]})]}),J&&e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing ",n.length," of ",t.length," jobs"]}),e.jsxs("button",{onClick:O,className:"flex items-center space-x-2 text-primary-400 hover:text-primary-300 text-sm",children:[e.jsx(oe,{size:16}),e.jsx("span",{children:"Clear Filters"})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(be,{size:64,className:"mx-auto text-gray-600 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Jobs Found"}),e.jsx("p",{className:"text-gray-400",children:J?"Try adjusting your filters to see more results":"No job openings available at the moment. Check back soon!"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(L=>{var _;return e.jsx("div",{className:"bg-dark-800 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 overflow-hidden border border-gray-700 hover:border-primary-500",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2 line-clamp-2",children:L.title}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-400 text-sm",children:[e.jsx(jt,{size:16}),e.jsx("span",{children:((_=L.department)==null?void 0:_.name)||"N/A"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-300 text-sm",children:[e.jsx(ns,{size:16,className:"text-primary-400"}),e.jsx("span",{children:L.location})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-300 text-sm",children:[e.jsx(ye,{size:16,className:"text-primary-400"}),e.jsx("span",{className:"capitalize",children:L.employmentType.split("-").join(" ")})]}),L.experience&&e.jsxs("div",{className:"flex items-center space-x-2 text-gray-300 text-sm",children:[e.jsx(be,{size:16,className:"text-primary-400"}),e.jsxs("span",{children:[L.experience.min,"-",L.experience.max," years"]})]})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-4 line-clamp-3",children:L.description}),L.openings>1&&e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"inline-block bg-primary-900/30 text-primary-400 text-xs px-3 py-1 rounded-full",children:[L.openings," Openings"]})}),e.jsx("button",{onClick:()=>g(L),className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200",children:"Apply Now"})]})},L._id)})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-primary-800 rounded-lg p-8 text-center",children:[e.jsx(Je,{size:48,className:"mx-auto text-white mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Didn't Find a Suitable Job?"}),e.jsx("p",{className:"text-primary-100 mb-6",children:"Submit your resume and we'll contact you when a matching opportunity becomes available"}),e.jsx("button",{onClick:()=>F(!0),className:"bg-white text-primary-600 hover:bg-primary-50 font-semibold py-3 px-8 rounded-lg transition-colors duration-200",children:"Submit Your Resume"})]})}),k&&x&&e.jsx(nl,{job:x,onClose:()=>{A(!1),v(null)},onSubmit:P}),e.jsx(ll,{isOpen:w,onClose:()=>F(!1)})]})},il=()=>{const[t,a]=u.useState("login"),[n,r]=u.useState(""),[s,l]=u.useState(null),[i,d]=u.useState(!1),[h,p]=u.useState(""),[m,o]=u.useState(""),[f,j]=u.useState({aadharFile:null,panFile:null,bankProofFile:null,bankName:"",accountNumber:"",ifscCode:"",accountHolderName:""}),[x,v]=u.useState({aadhar:!1,pan:!1,bankProof:!1}),k=async F=>{var N,b;F.preventDefault(),p(""),d(!0);try{const c=await le.post(`${De.apiBaseUrl}/candidate-documents/public/validate`,{candidateCode:n.trim()});c.data.success&&(l(c.data.data),a("upload"),j(C=>({...C,accountHolderName:c.data.data.name})))}catch(c){p(((b=(N=c.response)==null?void 0:N.data)==null?void 0:b.message)||"Invalid Candidate ID. Please check and try again.")}finally{d(!1)}},A=(F,N)=>{const b=F.target.files[0];if(b){if(b.size>5*1024*1024){p(`${N} file size should not exceed 5MB`);return}if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(b.type)){p(`${N} must be a PDF or image file (JPEG, JPG, PNG)`);return}j(C=>({...C,[N]:b})),p("")}},w=async F=>{var N,b;if(F.preventDefault(),p(""),o(""),d(!0),!f.aadharFile||!f.panFile||!f.bankProofFile){p("Please upload all required documents"),d(!1);return}if(!f.bankName||!f.accountNumber||!f.ifscCode||!f.accountHolderName){p("Please fill all bank details"),d(!1);return}try{const c=new FormData;c.append("candidateCode",n),c.append("aadhar",f.aadharFile),c.append("pan",f.panFile),c.append("bankProof",f.bankProofFile),c.append("bankDetails",JSON.stringify({bankName:f.bankName,accountNumber:f.accountNumber,ifscCode:f.ifscCode,accountHolderName:f.accountHolderName})),(await le.post(`${De.apiBaseUrl}/candidate-documents/public/submit`,c,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:R=>{const E=Math.round(R.loaded*100/R.total);console.log("Upload progress:",E)}})).data.success&&(o("Documents submitted successfully! You will receive a confirmation email shortly."),j({aadharFile:null,panFile:null,bankProofFile:null,bankName:"",accountNumber:"",ifscCode:"",accountHolderName:""}))}catch(c){p(((b=(N=c.response)==null?void 0:N.data)==null?void 0:b.message)||"Failed to submit documents. Please try again.")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Onboarding Document Submission"}),e.jsx("p",{className:"text-gray-600",children:"Submit your documents to complete the onboarding process"})]}),t==="login"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-full mb-4",children:e.jsx(ve,{className:"w-8 h-8 text-indigo-600"})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Enter Your Candidate ID"}),e.jsx("p",{className:"text-gray-600",children:"You received this ID in your onboarding email"})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Candidate ID"}),e.jsx("input",{type:"text",value:n,onChange:F=>r(F.target.value.toUpperCase()),placeholder:"e.g., CAN00001",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-center text-lg font-mono",required:!0})]}),h&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[e.jsx(we,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:h})]}),e.jsx("button",{type:"submit",disabled:i||!n,className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-medium hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-5 h-5 animate-spin"}),"Validating..."]}):"Continue"})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Your Candidate ID was sent to your email when you were moved to onboarding. Please check your inbox."]})})]}),t==="upload"&&s&&e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:[e.jsxs("h3",{className:"font-semibold text-indigo-900 mb-2",children:["Welcome, ",s.name,"!"]}),e.jsxs("p",{className:"text-sm text-indigo-700",children:[e.jsx("strong",{children:"Candidate ID:"})," ",s.candidateCode]}),e.jsxs("p",{className:"text-sm text-indigo-700",children:[e.jsx("strong",{children:"Email:"})," ",s.email]})]}),m&&e.jsxs("div",{className:"mb-6 flex items-center gap-2 p-4 bg-green-50 border border-green-200 rounded-lg text-green-700",children:[e.jsx(xe,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:m})]}),h&&e.jsxs("div",{className:"mb-6 flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[e.jsx(we,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:h})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ve,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Aadhar Card"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:F=>A(F,"aadharFile"),className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",required:!0}),f.aadharFile&&e.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center gap-1",children:[e.jsx(xe,{className:"w-4 h-4"}),f.aadharFile.name]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Ua,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"PAN Card"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:F=>A(F,"panFile"),className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",required:!0}),f.panFile&&e.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center gap-1",children:[e.jsx(xe,{className:"w-4 h-4"}),f.panFile.name]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(jt,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Bank Details"}),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),e.jsx("input",{type:"text",value:f.bankName,onChange:F=>j(N=>({...N,bankName:F.target.value})),placeholder:"e.g., HDFC Bank",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Holder Name"}),e.jsx("input",{type:"text",value:f.accountHolderName,onChange:F=>j(N=>({...N,accountHolderName:F.target.value})),placeholder:"As per bank records",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),e.jsx("input",{type:"text",value:f.accountNumber,onChange:F=>j(N=>({...N,accountNumber:F.target.value})),placeholder:"Enter account number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IFSC Code"}),e.jsx("input",{type:"text",value:f.ifscCode,onChange:F=>j(N=>({...N,ifscCode:F.target.value.toUpperCase()})),placeholder:"e.g., HDFC0001234",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Proof (Cancelled Cheque / Passbook)"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:F=>A(F,"bankProofFile"),className:"w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",required:!0}),f.bankProofFile&&e.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center gap-1",children:[e.jsx(xe,{className:"w-4 h-4"}),f.bankProofFile.name]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{a("login"),l(null),p(""),o("")},className:"px-6 py-3 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Back"}),e.jsx("button",{type:"submit",disabled:i,className:"flex-1 bg-indigo-600 text-white py-3 rounded-lg font-medium hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"w-5 h-5"}),"Submit Documents"]})})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Important:"})," Please ensure all documents are clear and readable. Maximum file size: 5MB per file. Accepted formats: PDF, JPG, PNG."]})})]})]})})},ol=async(t,a)=>(await M.get(`/public/document-upload/validate/${t}`,{params:{tenantId:a}})).data,cl=async(t,a,n,r,s)=>{const l=new FormData;return l.append("document",r),l.append("tenantId",a),l.append("documentType",n),(await M.post(`/public/document-upload/upload/${t}`,l,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:d=>{if(s){const h=Math.round(d.loaded*100/d.total);s(h)}}})).data},dl=async(t,a)=>(await M.get(`/public/document-upload/documents/${t}`,{params:{tenantId:a}})).data,ml=()=>{const{token:t}=Bt(),[a]=Ta(),n=a.get("tenantId"),[r,s]=u.useState(!0),[l,i]=u.useState(!1),[d,h]=u.useState(null),[p,m]=u.useState([]),[o,f]=u.useState([]),[j,x]=u.useState([]),[v,k]=u.useState({}),[A,w]=u.useState({});u.useEffect(()=>{t&&n?F():(T.error("Invalid upload link. Missing token or tenant ID."),s(!1))},[t,n]);const F=async()=>{var g,P;try{const O=await ol(t,n);O.success?(i(!0),h(O.data.candidate),m(O.data.documentConfigurations||[]),f(O.data.uploadedDocuments||[]),x(O.data.rejectedDocuments||[])):T.error(O.message||"Invalid upload link")}catch(O){console.error("Token validation error:",O),T.error(((P=(g=O.response)==null?void 0:g.data)==null?void 0:P.message)||"Failed to validate upload link")}finally{s(!1)}},N=async(g,P)=>{var te,J;if(!P)return;const O=p.find(W=>W.documentType===g);if(!O){T.error("Invalid document type");return}if(P.size/(1024*1024)>O.maxFileSizeMB){T.error(`File size exceeds ${O.maxFileSizeMB}MB limit`);return}const H=P.name.split(".").pop().toLowerCase();if(!O.allowedFormats.includes(H)){T.error(`Invalid file format. Allowed: ${O.allowedFormats.join(", ")}`);return}w(W=>({...W,[g]:!0})),k(W=>({...W,[g]:0}));try{if((await cl(t,n,g,P,K=>{k(L=>({...L,[g]:K}))})).success){T.success("Document uploaded successfully");const K=await dl(t,n);K.success&&f(K.data)}}catch(W){console.error("Upload error:",W),T.error(((J=(te=W.response)==null?void 0:te.data)==null?void 0:J.message)||"Failed to upload document")}finally{w(W=>({...W,[g]:!1})),k(W=>({...W,[g]:0}))}},b=g=>{const P=o.find(O=>O.documentType===g);return P?P.verificationStatus:null},c=g=>{const P=o.find(O=>O.documentType===g);return(P==null?void 0:P.fileName)||null},C=g=>{const P=j.find(O=>O.documentType===g);return(P==null?void 0:P.reason)||null},R=g=>{switch(g){case"verified":return e.jsx(xe,{className:"w-5 h-5 text-green-500"});case"unverified":return e.jsx(Ee,{className:"w-5 h-5 text-red-500"});case"resubmitted":return e.jsx(we,{className:"w-5 h-5 text-blue-500"});case"pending":return e.jsx(we,{className:"w-5 h-5 text-yellow-500"});default:return null}},E=g=>{switch(g){case"verified":return"Verified";case"unverified":return"Rejected";case"resubmitted":return"Re-submitted";case"pending":return"Pending Review";default:return"Not Uploaded"}};return r?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Oe,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Validating upload link..."})]})}):l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Document Upload Portal"}),e.jsx("p",{className:"text-gray-600",children:"Upload your onboarding documents securely"})]}),e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-100 text-sm",children:"Candidate ID"}),e.jsx("p",{className:"font-semibold text-lg",children:d==null?void 0:d.candidateId})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-100 text-sm",children:"Name"}),e.jsx("p",{className:"font-semibold text-lg",children:d==null?void 0:d.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-100 text-sm",children:"Email"}),e.jsx("p",{className:"font-semibold text-lg",children:d==null?void 0:d.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-100 text-sm",children:"Position"}),e.jsx("p",{className:"font-semibold text-lg",children:d==null?void 0:d.position})]})]})})]}),j.length>0&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(we,{className:"w-6 h-6 text-red-500 mt-0.5 mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Documents Requiring Re-submission"}),e.jsx("p",{className:"text-red-700 mb-3",children:"The following documents were rejected. Please review the reasons and re-upload corrected versions."}),e.jsx("ul",{className:"space-y-2",children:j.map((g,P)=>e.jsxs("li",{className:"text-red-700",children:[e.jsxs("strong",{children:[g.documentType.replace(/_/g," ").toUpperCase(),":"]})," ",g.reason]},P))})]})]})}),e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Upload Guidelines"}),e.jsxs("ul",{className:"text-blue-700 space-y-1 text-sm",children:[e.jsx("li",{children:"• Ensure all documents are clear and readable"}),e.jsx("li",{children:"• Upload documents in the correct format (PDF, JPG, PNG)"}),e.jsx("li",{children:"• File size should not exceed the specified limit"}),e.jsx("li",{children:"• Make sure all required information is visible"})]})]}),e.jsx("div",{className:"space-y-4",children:p.map(g=>{const P=b(g.documentType),O=c(g.documentType),Q=C(g.documentType),H=A[g.documentType],te=v[g.documentType]||0;return e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ve,{className:"w-5 h-5 text-indigo-600"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[g.displayName,g.isMandatory&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]}),g.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:g.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Formats: ",g.allowedFormats.join(", ").toUpperCase()," | Max size: ",g.maxFileSizeMB,"MB"]}),g.uploadInstructions&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:g.uploadInstructions})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[P&&R(P),P&&e.jsx("span",{className:`text-sm font-medium ${P==="verified"?"text-green-600":P==="unverified"?"text-red-600":P==="resubmitted"?"text-blue-600":"text-yellow-600"}`,children:E(P)})]})]}),O&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Uploaded:"})," ",O]})}),Q&&e.jsx("div",{className:"bg-red-50 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-red-700",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",Q]})}),H?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Uploading..."}),e.jsxs("span",{className:"text-indigo-600 font-medium",children:[te,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${te}%`}})})]}):e.jsxs("div",{children:[e.jsx("input",{type:"file",id:`file-${g.documentType}`,className:"hidden",accept:g.allowedFormats.map(J=>`.${J}`).join(","),onChange:J=>N(g.documentType,J.target.files[0])}),e.jsxs("label",{htmlFor:`file-${g.documentType}`,className:`flex items-center justify-center gap-2 px-4 py-2 rounded-lg cursor-pointer transition-colors ${P==="verified"?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:[e.jsx(Je,{className:"w-4 h-4"}),P?"Re-upload Document":"Upload Document"]})]})]},g.documentType)})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mt-6 text-center",children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"If you have any questions or need assistance, please contact our HR team."}),e.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"This is a secure upload portal. Your documents are encrypted and stored safely."})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[e.jsx(Ee,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Invalid Upload Link"}),e.jsx("p",{className:"text-gray-600",children:"This upload link is invalid, expired, or has been revoked. Please contact HR for assistance."})]})})},xl=()=>{const{user:t,isAuthenticated:a}=_e();return u.useEffect(()=>{},[t,a]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark-950 text-gray-200 px-6",children:e.jsxs("div",{className:"max-w-md text-center space-y-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Unauthorized"}),e.jsx("p",{className:"text-gray-400",children:"You don't have permission to access this area."}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg text-left text-sm",children:[e.jsx("h3",{className:"font-bold mb-2",children:"Debug Info:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Authenticated:"})," ",a?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Role:"})," ",(t==null?void 0:t.role)||"None"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User Email:"})," ",(t==null?void 0:t.email)||"None"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Token:"})," ",localStorage.getItem("token")?"Present":"Missing"]})]}),e.jsx(Ot,{to:"/",className:"btn-primary inline-flex justify-center",children:"Go Home"})]})})},ul=()=>{var i,d,h,p,m,o,f,j,x,v,k,A;const[t,a]=u.useState(null),[n,r]=u.useState(!0);u.useEffect(()=>{s()},[]);const s=async()=>{try{const w=await M.get("/dashboard/stats");a(w.data.data)}catch{T.error("Failed to load dashboard data")}finally{r(!1)}};if(n)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})});const l=[{title:"Total Employees",value:((i=t==null?void 0:t.employees)==null?void 0:i.total)||0,icon:he,color:"bg-blue-500"},{title:"Active Employees",value:((d=t==null?void 0:t.employees)==null?void 0:d.active)||0,icon:he,color:"bg-green-500"},{title:"On Leave Today",value:((h=t==null?void 0:t.employees)==null?void 0:h.onLeave)||0,icon:fe,color:"bg-yellow-500"},{title:"Today Attendance",value:((p=t==null?void 0:t.attendance)==null?void 0:p.today)||0,icon:ye,color:"bg-purple-500"},{title:"Pending Payroll",value:((m=t==null?void 0:t.payroll)==null?void 0:m.pending)||0,icon:yt,color:"bg-red-500"},{title:"Active Jobs",value:((o=t==null?void 0:t.jobs)==null?void 0:o.active)||0,icon:be,color:"bg-indigo-500"},{title:"Total Assets",value:((f=t==null?void 0:t.assets)==null?void 0:f.total)||0,icon:xs,color:"bg-pink-500"},{title:"Assigned Assets",value:((j=t==null?void 0:t.assets)==null?void 0:j.assigned)||0,icon:xs,color:"bg-orange-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Dashboard"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Overview of your organization"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:l.map((w,F)=>e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:w.title}),e.jsx("h3",{className:"text-2xl font-bold text-white",children:w.value})]}),e.jsx("div",{className:`${w.color} w-12 h-12 rounded-lg flex items-center justify-center`,children:e.jsx(w.icon,{size:24,className:"text-white"})})]})},F))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Employees by Department"}),e.jsx("div",{className:"space-y-3",children:(x=t==null?void 0:t.employeesByDepartment)==null?void 0:x.map((w,F)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-300",children:w.department}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-32 bg-dark-800 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${w.count/t.employees.active*100}%`}})}),e.jsx("span",{className:"text-white font-medium w-8 text-right",children:w.count})]})]},F))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Leave Requests"}),e.jsx("div",{className:"space-y-3",children:(v=t==null?void 0:t.recentLeaves)==null?void 0:v.map((w,F)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-dark-800 last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:w.employeeName}),e.jsx("p",{className:"text-sm text-gray-400 capitalize",children:w.leaveType})]}),e.jsx("span",{className:`badge ${w.status==="approved"?"badge-success":w.status==="pending"?"badge-warning":"badge-danger"}`,children:w.status})]},F))})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Attendance Trend (Last 7 Days)"}),e.jsx("div",{className:"h-64 flex items-end justify-between space-x-2",children:(A=(k=t==null?void 0:t.attendance)==null?void 0:k.trend)==null?void 0:A.map((w,F)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsxs("div",{className:"w-full space-y-1",children:[e.jsx("div",{className:"bg-green-600 rounded-t",style:{height:`${w.present/t.employees.active*200}px`},title:`Present: ${w.present}`}),e.jsx("div",{className:"bg-red-600",style:{height:`${w.absent/t.employees.active*200}px`},title:`Absent: ${w.absent}`})]}),e.jsx("span",{className:"text-xs text-gray-400 mt-2",children:new Date(w._id).toLocaleDateString("en-US",{weekday:"short"})})]},F))}),e.jsxs("div",{className:"flex items-center justify-center space-x-6 mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Present"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Absent"})]})]})]})]})},pl=()=>{const t=Ie(),[a,n]=u.useState([]),[r,s]=u.useState(!0),[l,i]=u.useState("all");u.useEffect(()=>{d()},[]);const d=async()=>{try{const o=await M.get("/candidates");n(o.data.data)}catch{T.error("Failed to load candidates")}finally{s(!1)}},h=o=>{t(`/candidates/${o}/timeline`)},p=a.filter(o=>l==="all"||o.stage===l),m=o=>({applied:"badge-info",screening:"badge-warning",shortlisted:"badge-success","interview-scheduled":"badge-info","interview-completed":"badge-warning","offer-extended":"badge-success","offer-accepted":"badge-success","offer-rejected":"badge-danger",joined:"badge-success",rejected:"badge-danger"})[o]||"badge-default";return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Candidates"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage recruitment pipeline"})]})}),e.jsx("div",{className:"card",children:e.jsxs("select",{value:l,onChange:o=>i(o.target.value),className:"input-field w-64",children:[e.jsx("option",{value:"all",children:"All Stages"}),e.jsx("option",{value:"applied",children:"Applied"}),e.jsx("option",{value:"screening",children:"Screening"}),e.jsx("option",{value:"shortlisted",children:"Shortlisted"}),e.jsx("option",{value:"interview-scheduled",children:"Interview Scheduled"}),e.jsx("option",{value:"interview-completed",children:"Interview Completed"}),e.jsx("option",{value:"offer-extended",children:"Offer Extended"}),e.jsx("option",{value:"offer-accepted",children:"Offer Accepted"}),e.jsx("option",{value:"joined",children:"Joined"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})}),e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Candidate"}),e.jsx("th",{children:"Applied For"}),e.jsx("th",{children:"Experience"}),e.jsx("th",{children:"Current CTC"}),e.jsx("th",{children:"Expected CTC"}),e.jsx("th",{children:"Source"}),e.jsx("th",{children:"Stage"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:p.map(o=>{var f,j,x,v,k;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-medium text-white",children:[o.firstName," ",o.lastName]}),o.isDuplicate&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs bg-yellow-500/20 text-yellow-400 rounded border border-yellow-500/30",title:"Duplicate candidate detected",children:[e.jsx(Xt,{size:12}),"Duplicate"]})]}),e.jsx("p",{className:"text-sm text-gray-400",children:o.email}),e.jsx("p",{className:"text-sm text-gray-400",children:o.phone}),o.isDuplicate&&o.duplicateOf&&e.jsx("button",{onClick:()=>h(o.duplicateOf),className:"text-xs text-blue-400 hover:text-blue-300 mt-1",children:"View Original →"})]})}),e.jsx("td",{children:((f=o.appliedFor)==null?void 0:f.title)||"N/A"}),e.jsxs("td",{children:[((j=o.experience)==null?void 0:j.years)||0,"y ",((x=o.experience)==null?void 0:x.months)||0,"m"]}),e.jsxs("td",{children:["$",((v=o.currentCTC)==null?void 0:v.toLocaleString())||0]}),e.jsxs("td",{children:["$",((k=o.expectedCTC)==null?void 0:k.toLocaleString())||0]}),e.jsx("td",{className:"capitalize",children:o.source}),e.jsx("td",{children:e.jsx("span",{className:`badge ${m(o.stage)}`,children:o.stage})}),e.jsx("td",{children:e.jsx("button",{onClick:()=>h(o._id),className:"p-2 text-blue-400 hover:bg-dark-800 rounded",children:"View Details"})})]},o._id)})})]})})}),p.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qe,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No candidates found"})]})]})},hl=()=>{var F,N;const[t,a]=u.useState([]),[n,r]=u.useState(!0),[s,l]=u.useState(""),[i,d]=u.useState("all"),[h,p]=u.useState(!1),[m,o]=u.useState(null),[f,j]=u.useState(!1);u.useEffect(()=>{x()},[]);const x=async()=>{var b,c,C;try{r(!0);const R=await M.get("/user/all");if(R.data&&R.data.data){const E=R.data.data.filter(g=>g.role==="hr"||g.role==="admin"||g.role==="company_admin");a(E)}else console.warn("No data in response:",R.data),a([])}catch(R){console.error("Error fetching HR users:",R),console.error("Error details:",(b=R.response)==null?void 0:b.data),T.error(((C=(c=R.response)==null?void 0:c.data)==null?void 0:C.message)||"Failed to load HR users"),a([])}finally{r(!1)}},v=t.filter(b=>{const c=b.email.toLowerCase().includes(s.toLowerCase())||`${b.firstName} ${b.lastName}`.toLowerCase().includes(s.toLowerCase()),C=i==="all"||b.isActive===(i==="active");return c&&C}),k=async(b,c)=>{try{T.success(`User ${c?"activated":"deactivated"} successfully`),x()}catch{T.error("Failed to update user status")}},A=async b=>{var c,C,R,E,g;if(window.confirm(`Are you sure you want to remove ${b.firstName} ${b.lastName} (${b.email})? This action cannot be undone.`))try{let P=`/user/${b._id}`;(b.role==="company_admin"||b.role==="admin")&&(P=`/user/delete/${b._id}`),await M.delete(P),T.success("User removed successfully"),x()}catch(P){if(console.error("Error deleting user:",P),((c=P.response)==null?void 0:c.status)===404&&deleteEndpoint===`/user/${b._id}`)try{await M.delete(`/user/delete/${b._id}`),T.success("User removed successfully"),x()}catch(O){T.error(((R=(C=O.response)==null?void 0:C.data)==null?void 0:R.message)||"Failed to remove user")}else T.error(((g=(E=P.response)==null?void 0:E.data)==null?void 0:g.message)||"Failed to remove user")}},w=b=>{const c={hr:{label:"HR",color:"bg-blue-500",icon:he},admin:{label:"Admin",color:"bg-purple-500",icon:Jt},company_admin:{label:"Company Admin",color:"bg-green-500",icon:Jt}},C=c[b]||c.hr,R=C.icon;return e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${C.color} text-white`,children:[e.jsx(R,{size:12,className:"mr-1"}),C.label]})};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"HR Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage HR users and administrators"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ae,{size:16}),e.jsx("span",{children:"Add HR User"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg border border-dark-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:e.jsx(he,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Total HR Users"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.length})]})]})}),e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg border border-dark-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:e.jsx(xe,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.filter(b=>b.isActive).length})]})]})}),e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg border border-dark-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:e.jsx(Jt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Administrators"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:t.filter(b=>b.role==="admin"||b.role==="company_admin").length})]})]})})]}),e.jsx("div",{className:"bg-dark-800 p-4 rounded-lg border border-dark-700",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:s,onChange:b=>l(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ls,{className:"h-4 w-4 text-gray-400"}),e.jsxs("select",{value:i,onChange:b=>d(b.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"inactive",children:"Inactive Only"})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:n?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading HR users..."})]}):v.length===0&&t.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(he,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No HR users found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Get started by adding your first HR user."}),e.jsxs("button",{onClick:()=>p(!0),className:"mt-4 btn-primary",children:[e.jsx(Ae,{size:16,className:"inline mr-2"}),"Add HR User"]})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-dark-800 divide-y divide-dark-700",children:v.map(b=>{var c,C;return e.jsxs("tr",{className:"hover:bg-dark-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[(c=b.firstName)==null?void 0:c[0],(C=b.lastName)==null?void 0:C[0]]})})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-white",children:[b.firstName," ",b.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:b.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w(b.role)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${b.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.createdAt?new Date(b.createdAt).toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{o(b),j(!0)},className:"text-blue-400 hover:text-blue-300 p-1",title:"View Details",children:e.jsx(st,{size:16})}),e.jsx("button",{onClick:()=>k(b._id,!b.isActive),className:`p-1 ${b.isActive?"text-red-400 hover:text-red-300":"text-green-400 hover:text-green-300"}`,title:b.isActive?"Deactivate":"Activate",children:b.isActive?e.jsx(Ee,{size:16}):e.jsx(xe,{size:16})}),e.jsx("button",{onClick:()=>A(b),className:"text-red-500 hover:text-red-400 p-1",title:"Remove User",children:e.jsx(is,{size:16})})]})})]},b._id)})})]}),v.length===0&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(he,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-white",children:"No HR users found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s||i!=="all"?"Try adjusting your search or filters.":"Get started by adding your first HR user."})]})]})}),f&&m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"User Details"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-300",children:e.jsx(Ee,{size:24})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-600 flex items-center justify-center",children:e.jsxs("span",{className:"text-lg font-medium text-white",children:[(F=m.firstName)==null?void 0:F[0],(N=m.lastName)==null?void 0:N[0]]})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-medium text-white",children:[m.firstName," ",m.lastName]}),w(m.role)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-gray-300",children:m.email})]}),m.phone&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-gray-300",children:m.phone})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{size:16,className:"text-gray-400"}),e.jsxs("span",{className:"text-gray-300",children:["Joined ",m.createdAt?new Date(m.createdAt).toLocaleDateString():"N/A"]})]})]}),e.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-gray-300 border border-gray-600 rounded-lg hover:bg-gray-700",children:"Close"})})]})]})}),h&&e.jsx(gl,{isOpen:h,onClose:()=>p(!1),onUserCreated:x})]})},gl=({isOpen:t,onClose:a,onUserCreated:n})=>{const[r,s]=u.useState({email:"",firstName:"",lastName:"",role:"hr",phone:""}),[l,i]=u.useState(!1),[d,h]=u.useState({}),p=()=>{const f={};return r.email?/\S+@\S+\.\S+/.test(r.email)||(f.email="Please enter a valid email address"):f.email="Email is required",r.firstName.trim()||(f.firstName="First name is required"),r.lastName.trim()||(f.lastName="Last name is required"),r.role||(f.role="Role is required"),h(f),Object.keys(f).length===0},m=async f=>{var j,x,v,k,A;if(f.preventDefault(),!!p()){i(!0);try{const w=await M.post("/user/create",r);w.data.success&&(w.data.emailSent?T.success("HR user created successfully! Welcome email with credentials sent."):w.data.emailError?(T.success("HR user created successfully!",{duration:3e3}),T.error(`Email could not be sent: ${w.data.emailError}. Temporary password: ${w.data.tempPassword}`,{duration:8e3})):T.success("HR user created successfully!"),s({email:"",firstName:"",lastName:"",role:"hr",phone:""}),n(),a())}catch(w){console.error("Error creating user:",w);const F=((x=(j=w.response)==null?void 0:j.data)==null?void 0:x.message)||"Failed to create user";T.error(F),(A=(k=(v=w.response)==null?void 0:v.data)==null?void 0:k.message)!=null&&A.includes("already exists")&&h({email:"A user with this email already exists"})}finally{i(!1)}}},o=(f,j)=>{s(x=>({...x,[f]:j})),d[f]&&h(x=>({...x,[f]:""}))};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Add New HR User"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-300",children:e.jsx(Ee,{size:24})})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),e.jsx("input",{type:"email",value:r.email,onChange:f=>o("email",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${d.email?"border-red-500":"border-gray-300"}`,placeholder:"hr@example.com"}),d.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",value:r.firstName,onChange:f=>o("firstName",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${d.firstName?"border-red-500":"border-gray-300"}`,placeholder:"John"}),d.firstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",value:r.lastName,onChange:f=>o("lastName",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${d.lastName?"border-red-500":"border-gray-300"}`,placeholder:"Doe"}),d.lastName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),e.jsxs("select",{value:r.role,onChange:f=>o("role",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${d.role?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"hr",children:"HR"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"employee",children:"Employee"})]}),d.role&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:d.role}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Note: Only Company Admins can create Admin-level users"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number (Optional)"}),e.jsx("input",{type:"tel",value:r.phone,onChange:f=>o("phone",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+1 (555) 123-4567"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Se,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Email Notification"}),e.jsx("p",{className:"text-sm text-blue-700",children:"A welcome email with login credentials will be sent to the new user automatically."})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-300 border border-gray-600 rounded-lg hover:bg-gray-700",disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Creating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{size:16}),e.jsx("span",{children:"Create User"})]})})]})]})]})}):null},fl=({isOpen:t,onClose:a,onJobCreated:n,onJobUpdated:r,editingJob:s})=>{const[l,i]=u.useState({title:"",department:"",location:"",employmentType:"full-time",experience:{min:"",max:""},salary:{min:"",max:"",currency:"USD"},description:"",requirements:[""],responsibilities:[""],skills:[""],openings:1,closingDate:"",status:"draft"}),[d,h]=u.useState([]),[p,m]=u.useState(!1),[o,f]=u.useState({});u.useEffect(()=>{var N,b,c,C;t&&(j(),i(s?{title:s.title||"",department:((N=s.department)==null?void 0:N._id)||"",location:s.location||"",employmentType:s.employmentType||"full-time",experience:s.experience||{min:"",max:""},salary:s.salary||{min:"",max:"",currency:"USD"},description:s.description||"",requirements:((b=s.requirements)==null?void 0:b.length)>0?s.requirements:[""],responsibilities:((c=s.responsibilities)==null?void 0:c.length)>0?s.responsibilities:[""],skills:((C=s.skills)==null?void 0:C.length)>0?s.skills:[""],openings:s.openings||1,closingDate:s.closingDate?s.closingDate.split("T")[0]:"",status:s.status||"draft"}:{title:"",department:"",location:"",employmentType:"full-time",experience:{min:"",max:""},salary:{min:"",max:"",currency:"USD"},description:"",requirements:[""],responsibilities:[""],skills:[""],openings:1,closingDate:"",status:"draft"}))},[t,s]);const j=async()=>{var N,b;try{const c=await M.get("/departments");h(c.data.data||[])}catch(c){T.error(`Failed to load departments: ${((b=(N=c.response)==null?void 0:N.data)==null?void 0:b.message)||c.message}`)}},x=(N,b)=>{i(c=>({...c,[N]:b})),o[N]&&f(c=>({...c,[N]:""}))},v=(N,b,c)=>{i(C=>({...C,[N]:C[N].map((R,E)=>E===b?c:R)}))},k=N=>{i(b=>({...b,[N]:[...b[N],""]}))},A=(N,b)=>{l[N].length>1&&i(c=>({...c,[N]:c[N].filter((C,R)=>R!==b)}))},w=()=>{const N={};return l.title.trim()||(N.title="Job title is required"),l.department||(N.department="Department is required"),l.location.trim()||(N.location="Location is required"),l.description.trim()||(N.description="Description is required"),f(N),Object.keys(N).length===0},F=async N=>{var b,c;if(N.preventDefault(),!w()){T.error("Please fill in all required fields");return}m(!0);try{const C={...l,requirements:l.requirements.filter(E=>E.trim()!==""),responsibilities:l.responsibilities.filter(E=>E.trim()!==""),skills:l.skills.filter(E=>E.trim()!==""),experience:{min:l.experience.min?Number(l.experience.min):void 0,max:l.experience.max?Number(l.experience.max):void 0},salary:{min:l.salary.min?Number(l.salary.min):void 0,max:l.salary.max?Number(l.salary.max):void 0,currency:l.salary.currency},openings:Number(l.openings),closingDate:l.closingDate||void 0};let R;s?(R=await M.put(`/jobs/${s._id}`,C),T.success("Job posting updated successfully"),r(R.data.data)):(R=await M.post("/jobs",C),T.success("Job posting created successfully"),n(R.data.data)),a(),i({title:"",department:"",location:"",employmentType:"full-time",experience:{min:"",max:""},salary:{min:"",max:"",currency:"USD"},description:"",requirements:[""],responsibilities:[""],skills:[""],openings:1,closingDate:""})}catch(C){T.error(((c=(b=C.response)==null?void 0:b.data)==null?void 0:c.message)||`Failed to ${s?"update":"create"} job posting`)}finally{m(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-dark-900 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-dark-800",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:s?"Edit Job Posting":"Post New Job"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(oe,{size:24})})]}),e.jsxs("form",{onSubmit:F,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Job Title *"}),e.jsx("input",{type:"text",value:l.title,onChange:N=>x("title",N.target.value),className:`input-field ${o.title?"border-red-500":""}`,placeholder:"e.g. Senior Software Developer"}),o.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Department *"}),e.jsxs("select",{value:l.department,onChange:N=>x("department",N.target.value),className:`input-field ${o.department?"border-red-500":""}`,children:[e.jsx("option",{value:"",children:"Select Department"}),d.length>0?d.map(N=>e.jsx("option",{value:N._id,children:N.name},N._id)):e.jsx("option",{value:"",disabled:!0,children:"No departments available - please create departments first"})]}),o.department&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.department})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Location *"}),e.jsx("input",{type:"text",value:l.location,onChange:N=>x("location",N.target.value),className:`input-field ${o.location?"border-red-500":""}`,placeholder:"e.g. New York, NY"}),o.location&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.location})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Employment Type"}),e.jsxs("select",{value:l.employmentType,onChange:N=>x("employmentType",N.target.value),className:"input-field",children:[e.jsx("option",{value:"full-time",children:"Full Time"}),e.jsx("option",{value:"part-time",children:"Part Time"}),e.jsx("option",{value:"contract",children:"Contract"}),e.jsx("option",{value:"intern",children:"Intern"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Openings"}),e.jsx("input",{type:"number",min:"1",value:l.openings,onChange:N=>x("openings",N.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Closing Date"}),e.jsx("input",{type:"date",value:l.closingDate,onChange:N=>x("closingDate",N.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:l.status,onChange:N=>x("status",N.target.value),className:"input-field",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"on-hold",children:"On Hold"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:'Only "Active" jobs will be visible on the careers page'})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Experience (years)"}),e.jsx("input",{type:"number",min:"0",value:l.experience.min,onChange:N=>x("experience",{...l.experience,min:N.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Experience (years)"}),e.jsx("input",{type:"number",min:"0",value:l.experience.max,onChange:N=>x("experience",{...l.experience,max:N.target.value}),className:"input-field"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Salary"}),e.jsx("input",{type:"number",min:"0",value:l.salary.min,onChange:N=>x("salary",{...l.salary,min:N.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Salary"}),e.jsx("input",{type:"number",min:"0",value:l.salary.max,onChange:N=>x("salary",{...l.salary,max:N.target.value}),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),e.jsxs("select",{value:l.salary.currency,onChange:N=>x("salary",{...l.salary,currency:N.target.value}),className:"input-field",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"}),e.jsx("option",{value:"INR",children:"INR"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Job Description *"}),e.jsx("textarea",{rows:4,value:l.description,onChange:N=>x("description",N.target.value),className:`input-field ${o.description?"border-red-500":""}`,placeholder:"Describe the role, team, and what the candidate will be doing..."}),o.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Requirements"}),l.requirements.map((N,b)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:N,onChange:c=>v("requirements",b,c.target.value),className:"input-field flex-1",placeholder:"e.g. Bachelor's degree in Computer Science"}),e.jsx("button",{type:"button",onClick:()=>A("requirements",b),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",disabled:l.requirements.length===1,children:e.jsx(Vt,{size:20})})]},b)),e.jsxs("button",{type:"button",onClick:()=>k("requirements"),className:"flex items-center space-x-2 text-primary-500 hover:text-primary-400 transition-colors",children:[e.jsx(Ae,{size:16}),e.jsx("span",{children:"Add Requirement"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Responsibilities"}),l.responsibilities.map((N,b)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:N,onChange:c=>v("responsibilities",b,c.target.value),className:"input-field flex-1",placeholder:"e.g. Develop and maintain web applications"}),e.jsx("button",{type:"button",onClick:()=>A("responsibilities",b),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",disabled:l.responsibilities.length===1,children:e.jsx(Vt,{size:20})})]},b)),e.jsxs("button",{type:"button",onClick:()=>k("responsibilities"),className:"flex items-center space-x-2 text-primary-500 hover:text-primary-400 transition-colors",children:[e.jsx(Ae,{size:16}),e.jsx("span",{children:"Add Responsibility"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Skills"}),l.skills.map((N,b)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:N,onChange:c=>v("skills",b,c.target.value),className:"input-field flex-1",placeholder:"e.g. React, Node.js, MongoDB"}),e.jsx("button",{type:"button",onClick:()=>A("skills",b),className:"p-2 text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",disabled:l.skills.length===1,children:e.jsx(Vt,{size:20})})]},b)),e.jsxs("button",{type:"button",onClick:()=>k("skills"),className:"flex items-center space-x-2 text-primary-500 hover:text-primary-400 transition-colors",children:[e.jsx(Ae,{size:16}),e.jsx("span",{children:"Add Skill"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-dark-800",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-outline",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"btn-primary",children:p?"Creating...":"Create Job Posting"})]})]})]})}):null},bl=()=>{const t=Ie(),a=Nt(),[n,r]=u.useState([]),[s,l]=u.useState(!0),[i,d]=u.useState(""),[h,p]=u.useState("all"),[m,o]=u.useState(!1),[f,j]=u.useState(null);u.useEffect(()=>{x()},[]),u.useEffect(()=>{const c=()=>{document.hidden||x()};return document.addEventListener("visibilitychange",c),()=>document.removeEventListener("visibilitychange",c)},[]);const x=async()=>{var c,C,R,E;try{l(!0);const g=await M.get("/jobs",{params:{_t:Date.now()},headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});console.log("📋 Jobs API Response:",g.data),console.log("📊 Jobs Data:",g.data.data),console.log("📈 Jobs Count:",(c=g.data.data)==null?void 0:c.length),g.data.success&&g.data.data?r(g.data.data):(console.warn("⚠️ Unexpected response format:",g.data),r([]))}catch(g){console.error("❌ Error fetching jobs:",g),console.error("Error response:",(C=g.response)==null?void 0:C.data),T.error(((E=(R=g.response)==null?void 0:R.data)==null?void 0:E.message)||"Failed to load job postings"),r([])}finally{l(!1)}},v=c=>{r(C=>[c,...C]),o(!1)},k=c=>{r(C=>C.map(R=>R._id===c._id?c:R)),o(!1),j(null)},A=c=>{j(c),o(!0)},w=async c=>{var C,R;if(window.confirm("Are you sure you want to delete this job posting?"))try{await M.delete(`/jobs/${c}`),r(E=>E.filter(g=>g._id!==c)),T.success("Job posting deleted successfully")}catch(E){T.error(((R=(C=E.response)==null?void 0:C.data)==null?void 0:R.message)||"Failed to delete job posting")}},F=async(c,C)=>{var R,E;try{const g=await M.put(`/jobs/${c}/status`,{status:C});r(P=>P.map(O=>O._id===c?g.data.data:O)),T.success(`Job status updated to ${C}`)}catch(g){T.error(((E=(R=g.response)==null?void 0:R.data)==null?void 0:E.message)||"Failed to update job status")}},N=n.filter(c=>{const C=c.title.toLowerCase().includes(i.toLowerCase())||c.location.toLowerCase().includes(i.toLowerCase()),R=h==="all"||c.status===h;return C&&R}),b=c=>({active:"badge-success",draft:"badge-warning",closed:"badge-danger","on-hold":"badge-info",archived:"bg-gray-600 text-gray-300"})[c]||"badge-default";return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:a.pathname.includes("/hr/recruitment")?"w-12 h-12 border-4 border-[#A88BFF] border-t-transparent rounded-full animate-spin":"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",style:{backgroundColor:a.pathname.includes("/hr/recruitment")?"#1E1E2A":void 0},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Job Desk"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage job postings and positions"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>x(),className:a.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] text-white px-4 py-2.5 rounded-xl border border-gray-700 hover:border-[#A88BFF] transition-all flex items-center space-x-2":"btn-outline flex items-center space-x-2",title:"Refresh jobs",children:[e.jsx(Ha,{size:18}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>o(!0),className:a.pathname.includes("/hr/recruitment")?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white px-6 py-2.5 rounded-xl font-medium hover:shadow-lg transition-all flex items-center space-x-2":"btn-primary flex items-center space-x-2",children:[e.jsx(Ae,{size:20}),e.jsx("span",{children:"Post New Job"})]})]})]}),e.jsx("div",{className:a.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-800":"card",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:20}),e.jsx("input",{type:"text",placeholder:"Search jobs...",value:i,onChange:c=>d(c.target.value),className:a.pathname.includes("/hr/recruitment")?"w-full bg-[#1E1E2A] text-white pl-10 pr-4 py-2.5 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors":"input-field pl-10"})]}),e.jsxs("select",{value:h,onChange:c=>p(c.target.value),className:a.pathname.includes("/hr/recruitment")?"bg-[#1E1E2A] text-white px-4 py-2.5 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors md:w-48":"input-field md:w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"on-hold",children:"On Hold"}),e.jsx("option",{value:"archived",children:"Archived"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(c=>{var C,R,E;return e.jsxs("div",{className:a.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-800 hover:border-[#A88BFF] transition-all cursor-pointer":"card hover:border-primary-600 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:a.pathname.includes("/hr/recruitment")?"w-12 h-12 bg-gradient-to-br from-[#A88BFF]/20 to-[#8B6FE8]/20 rounded-xl flex items-center justify-center":"w-12 h-12 bg-primary-600/20 rounded-lg flex items-center justify-center",children:e.jsx(be,{size:24,className:a.pathname.includes("/hr/recruitment")?"text-[#A88BFF]":"text-primary-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:c.title}),e.jsx("p",{className:"text-sm text-gray-400",children:(C=c.department)==null?void 0:C.name})]})]}),e.jsxs("select",{value:c.status,onChange:g=>F(c._id,g.target.value),className:`badge ${b(c.status)} cursor-pointer hover:opacity-80`,onClick:g=>g.stopPropagation(),style:{backgroundImage:"none"},children:[e.jsx("option",{value:"draft",className:"bg-gray-800 text-white",children:"Draft"}),e.jsx("option",{value:"active",className:"bg-gray-800 text-white",children:"Active"}),e.jsx("option",{value:"on-hold",className:"bg-gray-800 text-white",children:"On Hold"}),e.jsx("option",{value:"closed",className:"bg-gray-800 text-white",children:"Closed"}),e.jsx("option",{value:"archived",className:"bg-gray-800 text-white",children:"Archived"})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Location:"}),e.jsx("span",{children:c.location})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Type:"}),e.jsx("span",{className:"capitalize",children:c.employmentType})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Experience:"}),e.jsxs("span",{children:[(R=c.experience)==null?void 0:R.min,"-",(E=c.experience)==null?void 0:E.max," years"]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Openings:"}),e.jsx("span",{children:c.openings})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx("span",{className:"font-medium text-gray-300 w-24",children:"Applications:"}),e.jsx("span",{children:c.applications})]})]}),e.jsxs("div",{className:a.pathname.includes("/hr/recruitment")?"flex items-center space-x-2 pt-4 border-t border-gray-700":"flex items-center space-x-2 pt-4 border-t border-dark-800",children:[e.jsxs("button",{onClick:()=>{a.pathname.includes("/hr/recruitment")?t(`/employee/hr/recruitment/${c._id}/applicants`):t(`/job-desk/${c._id}/applicants`)},className:a.pathname.includes("/hr/recruitment")?"flex-1 bg-[#1E1E2A] text-white text-sm py-2 rounded-xl border border-gray-700 hover:border-[#A88BFF] transition-all flex items-center justify-center space-x-1":"flex-1 btn-outline text-sm py-2 flex items-center justify-center space-x-1",children:[e.jsx(st,{size:16}),e.jsx("span",{children:"View"})]}),e.jsxs("button",{onClick:()=>A(c),className:a.pathname.includes("/hr/recruitment")?"flex-1 bg-[#1E1E2A] text-white text-sm py-2 rounded-xl border border-gray-700 hover:border-[#A88BFF] transition-all flex items-center justify-center space-x-1":"flex-1 btn-outline text-sm py-2 flex items-center justify-center space-x-1",children:[e.jsx(Hs,{size:16}),e.jsx("span",{children:"Edit"})]}),e.jsx("button",{onClick:()=>w(c._id),className:a.pathname.includes("/hr/recruitment")?"bg-[#1E1E2A] text-red-400 text-sm py-2 px-3 rounded-xl border border-gray-700 hover:border-red-500 hover:bg-red-500/10 transition-all":"btn-outline text-sm py-2 px-3 text-red-500 hover:bg-red-500/10",children:e.jsx(is,{size:16})})]})]},c._id)})}),N.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(be,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No job postings found"})]}),e.jsx(fl,{isOpen:m,onClose:()=>{o(!1),j(null)},onJobCreated:v,onJobUpdated:k,editingJob:f})]})},Ps=({analysis:t,compact:a=!1})=>{if(!t||!t.isAnalyzed)return null;const{matchScore:n,skillsMatch:r,experienceMatch:s,keyHighlights:l,weaknesses:i,overallFit:d}=t,p=(o=>{const f={excellent:{bg:"bg-green-500/20",text:"text-green-400",label:"Excellent Fit"},good:{bg:"bg-blue-500/20",text:"text-blue-400",label:"Good Fit"},average:{bg:"bg-yellow-500/20",text:"text-yellow-400",label:"Average Fit"},poor:{bg:"bg-red-500/20",text:"text-red-400",label:"Poor Fit"}};return f[o]||f.average})(d),m=o=>o>=80?"text-green-400":o>=60?"text-blue-400":o>=40?"text-yellow-400":"text-red-400";return a?e.jsxs("div",{className:"mt-3 pt-3 border-t border-dark-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qt,{size:16,className:"text-primary-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-400",children:"AI Match Score"})]}),e.jsxs("span",{className:`text-lg font-bold ${m(n)}`,children:[n,"%"]})]}),e.jsx("div",{className:"w-full bg-dark-800 rounded-full h-2 mb-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${n>=80?"bg-green-500":n>=60?"bg-blue-500":n>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${n}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:`px-2 py-1 rounded ${p.bg} ${p.text} font-medium`,children:p.label}),e.jsxs("span",{className:"text-gray-500",children:[(r==null?void 0:r.matchPercentage)||0,"% skills match"]})]}),l&&l.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:l.slice(0,2).map((o,f)=>e.jsxs("div",{className:"flex items-start space-x-1 text-xs text-gray-400",children:[e.jsx(xe,{size:12,className:"text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-1",children:o})]},f))})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-primary-600/20 rounded-lg",children:e.jsx(zt,{size:24,className:"text-primary-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"AI Analysis"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Powered by intelligent matching"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-4xl font-bold ${m(n)}`,children:[n,"%"]}),e.jsx("div",{className:`px-3 py-1 rounded-lg ${p.bg} ${p.text} text-sm font-medium mt-1`,children:p.label})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Overall Match"}),e.jsxs("span",{className:`font-semibold ${m(n)}`,children:[n,"%"]})]}),e.jsx("div",{className:"w-full bg-dark-800 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${n>=80?"bg-gradient-to-r from-green-500 to-emerald-500":n>=60?"bg-gradient-to-r from-blue-500 to-cyan-500":n>=40?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-red-500 to-pink-500"}`,style:{width:`${n}%`}})})]}),r&&e.jsxs("div",{className:"card bg-dark-800/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qa,{size:18,className:"text-blue-400"}),e.jsx("h4",{className:"font-semibold text-white",children:"Skills Analysis"})]}),e.jsxs("span",{className:`font-bold ${m(r.matchPercentage)}`,children:[r.matchPercentage,"%"]})]}),r.matched&&r.matched.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-2 flex items-center",children:[e.jsx(xe,{size:14,className:"mr-1 text-green-500"}),"Matched Skills (",r.matched.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.matched.map((o,f)=>e.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 rounded text-xs font-medium",children:o},f))})]}),r.missing&&r.missing.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-2 flex items-center",children:[e.jsx(Ee,{size:14,className:"mr-1 text-red-500"}),"Missing Skills (",r.missing.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.missing.map((o,f)=>e.jsx("span",{className:"px-2 py-1 bg-red-500/20 text-red-400 rounded text-xs font-medium",children:o},f))})]}),r.additional&&r.additional.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-2 flex items-center",children:[e.jsx(Us,{size:14,className:"mr-1 text-purple-500"}),"Additional Skills (",r.additional.length,")"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.additional.slice(0,5).map((o,f)=>e.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 rounded text-xs font-medium",children:o},f)),r.additional.length>5&&e.jsxs("span",{className:"px-2 py-1 bg-dark-700 text-gray-400 rounded text-xs",children:["+",r.additional.length-5," more"]})]})]})]}),s&&e.jsxs("div",{className:"card bg-dark-800/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qs,{size:18,className:"text-cyan-400"}),e.jsx("h4",{className:"font-semibold text-white",children:"Experience Match"})]}),e.jsxs("span",{className:`font-bold ${m(s.score)}`,children:[s.score,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Candidate"}),e.jsxs("p",{className:"text-white font-medium",children:[s.candidateYears," years"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Required"}),e.jsxs("p",{className:"text-white font-medium",children:[s.requiredYears," years"]})]})]}),e.jsx("div",{className:"mt-2",children:s.isMatch?e.jsxs("span",{className:"text-xs text-green-400 flex items-center",children:[e.jsx(xe,{size:14,className:"mr-1"}),"Experience requirement met"]}):e.jsxs("span",{className:"text-xs text-yellow-400 flex items-center",children:[e.jsx(Xt,{size:14,className:"mr-1"}),"Experience requirement not fully met"]})})]}),l&&l.length>0&&e.jsxs("div",{className:"card bg-dark-800/50",children:[e.jsxs("h4",{className:"font-semibold text-white mb-3 flex items-center",children:[e.jsx(xe,{size:18,className:"mr-2 text-green-500"}),"Key Strengths"]}),e.jsx("ul",{className:"space-y-2",children:l.map((o,f)=>e.jsxs("li",{className:"flex items-start space-x-2 text-sm text-gray-300",children:[e.jsx("span",{className:"text-green-500 mt-1",children:"✓"}),e.jsx("span",{children:o})]},f))})]}),i&&i.length>0&&e.jsxs("div",{className:"card bg-dark-800/50",children:[e.jsxs("h4",{className:"font-semibold text-white mb-3 flex items-center",children:[e.jsx(Xt,{size:18,className:"mr-2 text-yellow-500"}),"Areas of Concern"]}),e.jsx("ul",{className:"space-y-2",children:i.map((o,f)=>e.jsxs("li",{className:"flex items-start space-x-2 text-sm text-gray-300",children:[e.jsx("span",{className:"text-yellow-500 mt-1",children:"⚠"}),e.jsx("span",{children:o})]},f))})]})]})},jl=()=>{const{jobId:t}=Bt(),a=Ie(),n=Nt(),[r,s]=u.useState([]),[l,i]=u.useState(null),[d,h]=u.useState(!0),[p,m]=u.useState(""),[o,f]=u.useState("all"),[j,x]=u.useState("all"),[v,k]=u.useState("date"),[A,w]=u.useState(!1),[F,N]=u.useState(null),[b,c]=u.useState({});u.useEffect(()=>{C(),R()},[t,o,j]);const C=async()=>{try{h(!0);const D=new URLSearchParams;o!=="all"&&D.append("stage",o),j!=="all"&&D.append("status",j),p&&D.append("search",p);const X=await M.get(`/jobs/${t}/applicants?${D.toString()}`);let Z=X.data.data;Z=E(Z,v),s(Z),i(X.data.job)}catch(D){T.error("Failed to load applicants"),console.error(D)}finally{h(!1)}},R=async()=>{try{const D=await M.get(`/ai-analysis/jobs/${t}/stats`);N(D.data.data)}catch(D){console.error("Failed to fetch analysis stats:",D)}},E=(D,X)=>{const Z=[...D];switch(X){case"ai-score":return Z.sort((re,ae)=>{var ge,Re;const Ne=((ge=re.aiAnalysis)==null?void 0:ge.matchScore)||0;return(((Re=ae.aiAnalysis)==null?void 0:Re.matchScore)||0)-Ne});case"date":return Z.sort((re,ae)=>new Date(ae.createdAt)-new Date(re.createdAt));case"name":return Z.sort((re,ae)=>`${re.firstName} ${re.lastName}`.localeCompare(`${ae.firstName} ${ae.lastName}`));default:return Z}},g=async()=>{var D,X;if(window.confirm("Analyze all candidates for this job? This may take a few moments."))try{w(!0);const Z=await M.post(`/ai-analysis/jobs/${t}/analyze`);T.success(Z.data.message),await C(),await R()}catch(Z){T.error(((X=(D=Z.response)==null?void 0:D.data)==null?void 0:X.message)||"Failed to analyze candidates"),console.error(Z)}finally{w(!1)}},P=D=>{c(X=>({...X,[D]:!X[D]}))},O=()=>{C()},Q=D=>{k(D),s(X=>E(X,D))},H=D=>({applied:"bg-blue-500/20 text-blue-400",screening:"bg-yellow-500/20 text-yellow-400",shortlisted:"bg-purple-500/20 text-purple-400","interview-scheduled":"bg-indigo-500/20 text-indigo-400","interview-completed":"bg-cyan-500/20 text-cyan-400","offer-extended":"bg-green-500/20 text-green-400","offer-accepted":"bg-emerald-500/20 text-emerald-400","offer-rejected":"bg-red-500/20 text-red-400","sent-to-onboarding":"bg-orange-500/20 text-orange-400",joined:"bg-teal-500/20 text-teal-400",rejected:"bg-gray-500/20 text-gray-400"})[D]||"bg-gray-500/20 text-gray-400",te=D=>({active:"badge-success",hired:"badge-info",rejected:"badge-danger",withdrawn:"badge-warning"})[D]||"badge-default",J=D=>{if(!D)return"N/A";const{years:X=0,months:Z=0}=D;return X===0&&Z===0?"Fresher":X===0?`${Z} months`:Z===0?`${X} years`:`${X}y ${Z}m`},W=D=>D?new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",K=D=>{n.pathname.includes("/hr/recruitment")?a(`/employee/hr/recruitment/candidates/${D}/timeline`):a(`/candidates/${D}/timeline`)},L=async(D,X)=>{var Z,re,ae;if(X.stopPropagation(),!!window.confirm(`Send ${D.firstName} ${D.lastName} to comprehensive onboarding process?`))try{["offer-accepted","interview-completed","offer-extended","shortlisted"].includes(D.stage)||(console.log(`Moving candidate from ${D.stage} to offer-accepted stage first`),await M.post(`/candidates/${D._id}/move-to-stage`,{targetStage:"offer-accepted",skipIntermediate:!0,reason:"Auto-stage change for onboarding process"}));const ne=await M.post(`/candidates/${D._id}/send-to-onboarding`,{notes:"Candidate sent to onboarding from job application review"});T.success("Candidate successfully sent to onboarding!");const ge=ne.data.data.onboarding;T.success(`Onboarding record created: ${ge.onboardingId}`,{duration:4e3}),C()}catch(Ne){const ne=((re=(Z=Ne.response)==null?void 0:Z.data)==null?void 0:re.message)||"Failed to send candidate to onboarding";T.error(ne),console.error("Onboarding error:",(ae=Ne.response)==null?void 0:ae.data)}},_=D=>{const X=D.stage!=="sent-to-onboarding"&&D.stage!=="joined",Z=D.status==="active";return X&&Z},Y=D=>["sent-to-onboarding","joined","completed"].includes(D.stage),se=()=>{try{const X=[["Candidate Code","Name","Email","Phone","Current Location","Experience","Current Company","Current Designation","Expected CTC","Notice Period","Stage","Status","Applied On","Skills"].join(",")];r.forEach(ne=>{const ge=[ne.candidateCode||"",`"${ne.firstName} ${ne.lastName}"`,ne.email||"",ne.phone||"",`"${ne.currentLocation||""}"`,J(ne.experience),`"${ne.currentCompany||""}"`,`"${ne.currentDesignation||""}"`,ne.expectedCTC||"",ne.noticePeriod!==void 0?ne.noticePeriod:"",ne.stage||"",ne.status||"",W(ne.createdAt),`"${ne.skills?ne.skills.join(", "):""}"`];X.push(ge.join(","))});const Z=X.join(`
`),re=new Blob([Z],{type:"text/csv;charset=utf-8;"}),ae=document.createElement("a"),Ne=URL.createObjectURL(re);ae.setAttribute("href",Ne),ae.setAttribute("download",`applicants_${(l==null?void 0:l.title)||"job"}_${new Date().toISOString().split("T")[0]}.csv`),ae.style.visibility="hidden",document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),T.success("Applicants exported successfully!")}catch(D){T.error("Failed to export applicants"),console.error("Export error:",D)}};return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:n.pathname.includes("/hr/recruitment")?"w-12 h-12 border-4 border-[#A88BFF] border-t-transparent rounded-full animate-spin":"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",style:{backgroundColor:n.pathname.includes("/hr/recruitment")?"#1E1E2A":void 0},children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>{n.pathname.includes("/hr/recruitment")?a("/employee/hr/recruitment"):a("/job-desk")},className:n.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] text-white p-2 rounded-xl border border-gray-700 hover:border-[#A88BFF] transition-all":"btn-outline p-2",children:e.jsx(vt,{size:20})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white",children:[(l==null?void 0:l.title)||"Job"," - Applicants"]}),e.jsxs("p",{className:"text-gray-400 mt-1",children:[r.length," ",r.length===1?"applicant":"applicants"," found",F&&F.analyzed>0&&e.jsxs("span",{className:n.pathname.includes("/hr/recruitment")?"ml-2 text-[#A88BFF]":"ml-2 text-primary-500",children:["• ",F.analyzed," analyzed"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:g,disabled:A,className:n.pathname.includes("/hr/recruitment")?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white px-6 py-2.5 rounded-xl font-medium hover:shadow-lg transition-all flex items-center space-x-2 disabled:opacity-50":"btn-primary flex items-center space-x-2",children:A?e.jsxs(e.Fragment,{children:[e.jsx(at,{size:18,className:"animate-spin"}),e.jsx("span",{children:"Analyzing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(zt,{size:18}),e.jsx("span",{children:"Analyze Candidates"})]})}),e.jsxs("button",{onClick:se,className:n.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] text-white px-6 py-2.5 rounded-xl border border-gray-700 hover:border-[#A88BFF] transition-all flex items-center space-x-2 disabled:opacity-50":"btn-outline flex items-center space-x-2",disabled:r.length===0,children:[e.jsx(Js,{size:18}),e.jsx("span",{children:"Export"})]})]})]}),F&&F.analyzed>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card bg-gradient-to-br from-primary-600/20 to-primary-800/20 border-primary-600/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Average Score"}),e.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:[F.averageScore,"%"]})]}),e.jsx($s,{size:32,className:"text-primary-500"})]})}),e.jsx("div",{className:"card bg-gradient-to-br from-green-600/20 to-green-800/20 border-green-600/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Excellent Fit"}),e.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:F.fitDistribution.excellent})]}),e.jsx(qs,{size:32,className:"text-green-500"})]})}),e.jsx("div",{className:"card bg-gradient-to-br from-blue-600/20 to-blue-800/20 border-blue-600/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Good Fit"}),e.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:F.fitDistribution.good})]}),e.jsx(Qt,{size:32,className:"text-blue-500"})]})}),e.jsx("div",{className:"card bg-gradient-to-br from-purple-600/20 to-purple-800/20 border-purple-600/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Top Score"}),e.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:[F.topScore,"%"]})]}),e.jsx(zt,{size:32,className:"text-purple-500"})]})})]}),e.jsx("div",{className:n.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-800":"card",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:20}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or candidate code...",value:p,onChange:D=>m(D.target.value),onKeyPress:D=>D.key==="Enter"&&O(),className:n.pathname.includes("/hr/recruitment")?"w-full bg-[#1E1E2A] text-white pl-10 pr-4 py-2.5 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors":"input-field pl-10"})]}),e.jsx("button",{onClick:O,className:n.pathname.includes("/hr/recruitment")?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white px-6 py-2.5 rounded-xl font-medium hover:shadow-lg transition-all md:w-auto":"btn-primary md:w-auto",children:"Search"}),e.jsxs("select",{value:v,onChange:D=>Q(D.target.value),className:n.pathname.includes("/hr/recruitment")?"bg-[#1E1E2A] text-white px-4 py-2.5 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors md:w-48":"input-field md:w-48",children:[e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"ai-score",children:"Sort by AI Score"}),e.jsx("option",{value:"name",children:"Sort by Name"})]}),e.jsxs("select",{value:o,onChange:D=>f(D.target.value),className:n.pathname.includes("/hr/recruitment")?"bg-[#1E1E2A] text-white px-4 py-2.5 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors md:w-48":"input-field md:w-48",children:[e.jsx("option",{value:"all",children:"All Stages"}),e.jsx("option",{value:"applied",children:"Applied"}),e.jsx("option",{value:"screening",children:"Screening"}),e.jsx("option",{value:"shortlisted",children:"Shortlisted"}),e.jsx("option",{value:"interview-scheduled",children:"Interview Scheduled"}),e.jsx("option",{value:"interview-completed",children:"Interview Completed"}),e.jsx("option",{value:"offer-extended",children:"Offer Extended"}),e.jsx("option",{value:"offer-accepted",children:"Offer Accepted"}),e.jsx("option",{value:"offer-rejected",children:"Offer Rejected"}),e.jsx("option",{value:"joined",children:"Joined"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("select",{value:j,onChange:D=>x(D.target.value),className:n.pathname.includes("/hr/recruitment")?"bg-[#1E1E2A] text-white px-4 py-2.5 rounded-xl border border-gray-700 focus:border-[#A88BFF] focus:outline-none transition-colors md:w-48":"input-field md:w-48",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"hired",children:"Hired"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"withdrawn",children:"Withdrawn"})]})]})}),r.length===0?e.jsxs("div",{className:n.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] rounded-2xl p-12 border border-gray-800 text-center":"card text-center py-12",children:[e.jsx(Ze,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No applicants found for this job posting"})]}):e.jsx("div",{className:"space-y-4",children:r.map(D=>{var X,Z;return e.jsxs("div",{className:`relative ${n.pathname.includes("/hr/recruitment")?"bg-[#2A2A3A] rounded-2xl p-6 border border-gray-800 hover:border-[#A88BFF] transition-all cursor-pointer":"card hover:border-primary-600 transition-all cursor-pointer"} ${Y(D)?"opacity-75":""}`,onClick:()=>K(D._id),children:[Y(D)&&e.jsx("div",{className:"absolute inset-0 bg-red-600/10 border-2 border-red-600/30 rounded-2xl flex items-center justify-center z-10",children:e.jsxs("div",{className:"bg-red-600/90 text-white px-4 py-2 rounded-lg flex items-center space-x-2 font-medium",children:[e.jsx(Ee,{size:16}),e.jsx("span",{children:"Hiring Process Blocked - In Onboarding"})]})}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:n.pathname.includes("/hr/recruitment")?"w-12 h-12 bg-gradient-to-br from-[#A88BFF]/20 to-[#8B6FE8]/20 rounded-full flex items-center justify-center flex-shrink-0":"w-12 h-12 bg-primary-600/20 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ze,{size:24,className:n.pathname.includes("/hr/recruitment")?"text-[#A88BFF]":"text-primary-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white truncate",children:[D.firstName," ",D.lastName]}),e.jsx("span",{className:`badge ${te(D.status)}`,children:D.status}),e.jsxs("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${H(D.stage)} ${Y(D)?"bg-red-600/20 text-red-400 border border-red-600/30":""}`,children:[D.stage.replace(/-/g," "),Y(D)&&" 🔒"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(Se,{size:14,className:"mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:D.email})]}),e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx($e,{size:14,className:"mr-2 flex-shrink-0"}),e.jsx("span",{children:D.phone})]}),D.currentLocation&&e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(ns,{size:14,className:"mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:D.currentLocation})]}),e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(be,{size:14,className:"mr-2 flex-shrink-0"}),e.jsx("span",{children:J(D.experience)})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 lg:gap-6 text-sm",children:[D.currentCompany&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Current Company"}),e.jsx("p",{className:"text-white font-medium",children:D.currentCompany})]}),D.currentDesignation&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Current Role"}),e.jsx("p",{className:"text-white font-medium",children:D.currentDesignation})]}),D.expectedCTC&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Expected CTC"}),e.jsxs("p",{className:"text-white font-medium flex items-center",children:[e.jsx(yt,{size:14,className:"mr-1"}),D.expectedCTC.toLocaleString()]})]}),D.noticePeriod!==void 0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Notice Period"}),e.jsxs("p",{className:"text-white font-medium flex items-center",children:[e.jsx(ye,{size:14,className:"mr-1"}),D.noticePeriod," days"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 lg:flex-col lg:space-x-0 lg:space-y-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Applied On"}),e.jsxs("p",{className:"text-white text-sm font-medium flex items-center",children:[e.jsx(fe,{size:14,className:"mr-1"}),W(D.createdAt)]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[((X=D.resume)==null?void 0:X.url)&&e.jsxs("a",{href:D.resume.url,target:"_blank",rel:"noopener noreferrer",onClick:re=>re.stopPropagation(),className:n.pathname.includes("/hr/recruitment")?"bg-[#1E1E2A] text-white text-sm py-2 px-4 rounded-xl border border-gray-700 hover:border-[#A88BFF] transition-all flex items-center space-x-2":"btn-outline text-sm py-2 px-4 flex items-center space-x-2",children:[e.jsx(ve,{size:16}),e.jsx("span",{children:"Resume"})]}),Y(D)?e.jsxs("div",{className:n.pathname.includes("/hr/recruitment")?"bg-red-600/20 border border-red-600/50 text-red-400 text-sm py-2 px-4 rounded-xl flex items-center space-x-2 whitespace-nowrap":"bg-red-600/20 border border-red-600/50 text-red-400 text-sm py-2 px-4 rounded-lg flex items-center space-x-2 whitespace-nowrap",children:[e.jsx(Ee,{size:16}),e.jsx("span",{children:"Blocked - In Onboarding"})]}):_(D)?e.jsxs("button",{onClick:re=>L(D,re),className:n.pathname.includes("/hr/recruitment")?"bg-gradient-to-r from-[#A88BFF] to-[#8B6FE8] text-white text-sm py-2 px-4 rounded-xl font-medium hover:shadow-lg transition-all flex items-center space-x-2 whitespace-nowrap":"btn-primary text-sm py-2 px-4 flex items-center space-x-2 whitespace-nowrap",title:`Send ${D.firstName} ${D.lastName} to comprehensive onboarding process`,children:[e.jsx(Qe,{size:16}),e.jsx("span",{children:"Onboarding"})]}):e.jsxs("span",{className:(n.pathname.includes("/hr/recruitment"),"text-gray-500 text-sm py-2 px-4 flex items-center space-x-2 whitespace-nowrap"),children:[e.jsx(ye,{size:16}),e.jsx("span",{children:"Waiting"})]})]})]})]}),D.skills&&D.skills.length>0&&e.jsxs("div",{className:n.pathname.includes("/hr/recruitment")?"mt-4 pt-4 border-t border-gray-700":"mt-4 pt-4 border-t border-dark-800",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-2",children:"Skills"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[D.skills.slice(0,8).map((re,ae)=>e.jsx("span",{className:n.pathname.includes("/hr/recruitment")?"px-2 py-1 bg-[#1E1E2A] text-gray-300 rounded-lg text-xs":"px-2 py-1 bg-dark-800 text-gray-300 rounded text-xs",children:re},ae)),D.skills.length>8&&e.jsxs("span",{className:n.pathname.includes("/hr/recruitment")?"px-2 py-1 bg-[#1E1E2A] text-gray-400 rounded-lg text-xs":"px-2 py-1 bg-dark-800 text-gray-400 rounded text-xs",children:["+",D.skills.length-8," more"]})]})]}),((Z=D.aiAnalysis)==null?void 0:Z.isAnalyzed)&&e.jsxs("div",{children:[e.jsx(Ps,{analysis:D.aiAnalysis,compact:!0}),e.jsxs("button",{onClick:re=>{re.stopPropagation(),P(D._id)},className:n.pathname.includes("/hr/recruitment")?"mt-3 text-sm text-[#A88BFF] hover:text-[#8B6FE8] flex items-center space-x-1":"mt-3 text-sm text-primary-500 hover:text-primary-400 flex items-center space-x-1",children:[e.jsx(Qt,{size:14}),e.jsxs("span",{children:[b[D._id]?"Hide":"View"," Detailed AI Insights"]})]}),b[D._id]&&e.jsx("div",{className:n.pathname.includes("/hr/recruitment")?"mt-4 pt-4 border-t border-gray-700":"mt-4 pt-4 border-t border-dark-800",children:e.jsx(Ps,{analysis:D.aiAnalysis,compact:!1})})]})]},D._id)})})]})},yl=({candidateId:t,onClose:a,onSuccess:n})=>{const[r,s]=u.useState({interviewType:"Technical",round:"",scheduledDate:"",scheduledTime:"",meetingPlatform:"Google Meet",meetingLink:"",interviewer:[]}),[l,i]=u.useState([]),[d,h]=u.useState(!1);u.useEffect(()=>{p()},[]);const p=async()=>{try{const j=await M.get("/employees");i(j.data.data||[])}catch(j){console.error("Failed to fetch employees:",j)}},m=async j=>{var x,v;if(j.preventDefault(),!r.scheduledDate||!r.scheduledTime){T.error("Please fill in all required fields");return}try{h(!0),await M.post(`/candidates/${t}/interview`,r),T.success("Interview scheduled successfully"),n()}catch(k){T.error(((v=(x=k.response)==null?void 0:x.data)==null?void 0:v.message)||"Failed to schedule interview")}finally{h(!1)}},o=j=>{const{name:x,value:v}=j.target;s(k=>({...k,[x]:v}))},f=j=>{const x=Array.from(j.target.selectedOptions,v=>v.value);s(v=>({...v,interviewer:x}))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 rounded-lg border border-dark-800 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-dark-800 p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Schedule Interview"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white",children:e.jsx(oe,{size:24})})]}),e.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Interview Type *"}),e.jsxs("select",{name:"interviewType",value:r.interviewType,onChange:o,className:"input-field",required:!0,children:[e.jsx("option",{value:"Technical",children:"Technical"}),e.jsx("option",{value:"HR",children:"HR"}),e.jsx("option",{value:"Managerial",children:"Managerial"}),e.jsx("option",{value:"Cultural Fit",children:"Cultural Fit"}),e.jsx("option",{value:"Final Round",children:"Final Round"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Round Name"}),e.jsx("input",{type:"text",name:"round",value:r.round,onChange:o,placeholder:"e.g., Round 1, First Technical Interview",className:"input-field"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(fe,{size:16,className:"inline mr-2"}),"Date *"]}),e.jsx("input",{type:"date",name:"scheduledDate",value:r.scheduledDate,onChange:o,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(ye,{size:16,className:"inline mr-2"}),"Time *"]}),e.jsx("input",{type:"time",name:"scheduledTime",value:r.scheduledTime,onChange:o,className:"input-field",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Vs,{size:16,className:"inline mr-2"}),"Meeting Platform"]}),e.jsxs("select",{name:"meetingPlatform",value:r.meetingPlatform,onChange:o,className:"input-field",children:[e.jsx("option",{value:"Google Meet",children:"Google Meet"}),e.jsx("option",{value:"Microsoft Teams",children:"Microsoft Teams"}),e.jsx("option",{value:"Zoom",children:"Zoom"}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"In-Person",children:"In-Person"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Meeting Link"}),e.jsx("input",{type:"url",name:"meetingLink",value:r.meetingLink,onChange:o,placeholder:"https://meet.google.com/...",className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(he,{size:16,className:"inline mr-2"}),"Assign Interviewer(s)"]}),e.jsx("select",{multiple:!0,value:r.interviewer,onChange:f,className:"input-field h-32",children:l.map(j=>e.jsxs("option",{value:j._id,children:[j.firstName," ",j.lastName," - ",j.designation||"N/A"]},j._id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl/Cmd to select multiple"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-dark-800",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-outline",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center space-x-2",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(at,{size:18,className:"animate-spin"}),e.jsx("span",{children:"Scheduling..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{size:18}),e.jsx("span",{children:"Schedule Interview"})]})})]})]})]})})},Nl=({candidateId:t,interview:a,onClose:n,onSuccess:r})=>{const[s,l]=u.useState({feedback:a.feedback||"",rating:a.rating||0,decision:a.decision||"pending",notes:a.notes||"",status:"completed"}),[i,d]=u.useState(!1),[h,p]=u.useState(0),m=async j=>{var x,v;if(j.preventDefault(),!s.feedback||s.rating===0){T.error("Please provide feedback and rating");return}try{d(!0),await M.put(`/candidates/${t}/interview/${a._id}/feedback`,s),T.success("Feedback submitted successfully"),r()}catch(k){T.error(((v=(x=k.response)==null?void 0:x.data)==null?void 0:v.message)||"Failed to submit feedback")}finally{d(!1)}},o=j=>{const{name:x,value:v}=j.target;l(k=>({...k,[x]:v}))},f=j=>{l(x=>({...x,rating:j}))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 rounded-lg border border-dark-800 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-dark-800 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Interview Feedback"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[a.interviewType," - ",new Date(a.scheduledDate).toLocaleDateString()]})]}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white",children:e.jsx(oe,{size:24})})]}),e.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Rating *"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[[1,2,3,4,5].map(j=>e.jsx("button",{type:"button",onClick:()=>f(j),onMouseEnter:()=>p(j),onMouseLeave:()=>p(0),className:"focus:outline-none transition-transform hover:scale-110",children:e.jsx(Ws,{size:32,className:`${j<=(h||s.rating)?"text-yellow-500 fill-yellow-500":"text-gray-600"}`})},j)),e.jsx("span",{className:"ml-4 text-white font-semibold",children:s.rating>0?`${s.rating}/5`:"Not rated"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(Ja,{size:16,className:"inline mr-2"}),"Feedback Summary *"]}),e.jsx("textarea",{name:"feedback",value:s.feedback,onChange:o,rows:4,placeholder:"Provide detailed feedback about the candidate's performance...",className:"input-field resize-none",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Decision *"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>l(j=>({...j,decision:"selected"})),className:`p-4 rounded-lg border-2 transition-all ${s.decision==="selected"?"border-green-500 bg-green-500/20":"border-dark-800 hover:border-green-500/50"}`,children:[e.jsx(xe,{size:24,className:`mx-auto mb-2 ${s.decision==="selected"?"text-green-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${s.decision==="selected"?"text-green-400":"text-gray-400"}`,children:"Selected"})]}),e.jsxs("button",{type:"button",onClick:()=>l(j=>({...j,decision:"rejected"})),className:`p-4 rounded-lg border-2 transition-all ${s.decision==="rejected"?"border-red-500 bg-red-500/20":"border-dark-800 hover:border-red-500/50"}`,children:[e.jsx(Ee,{size:24,className:`mx-auto mb-2 ${s.decision==="rejected"?"text-red-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${s.decision==="rejected"?"text-red-400":"text-gray-400"}`,children:"Rejected"})]}),e.jsxs("button",{type:"button",onClick:()=>l(j=>({...j,decision:"on-hold"})),className:`p-4 rounded-lg border-2 transition-all ${s.decision==="on-hold"?"border-yellow-500 bg-yellow-500/20":"border-dark-800 hover:border-yellow-500/50"}`,children:[e.jsx(ye,{size:24,className:`mx-auto mb-2 ${s.decision==="on-hold"?"text-yellow-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${s.decision==="on-hold"?"text-yellow-400":"text-gray-400"}`,children:"On Hold"})]}),e.jsxs("button",{type:"button",onClick:()=>l(j=>({...j,decision:"pending"})),className:`p-4 rounded-lg border-2 transition-all ${s.decision==="pending"?"border-blue-500 bg-blue-500/20":"border-dark-800 hover:border-blue-500/50"}`,children:[e.jsx(ye,{size:24,className:`mx-auto mb-2 ${s.decision==="pending"?"text-blue-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${s.decision==="pending"?"text-blue-400":"text-gray-400"}`,children:"Pending"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Additional Notes"}),e.jsx("textarea",{name:"notes",value:s.notes,onChange:o,rows:3,placeholder:"Any additional observations or comments...",className:"input-field resize-none"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-dark-800",children:[e.jsx("button",{type:"button",onClick:n,className:"btn-outline",disabled:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center space-x-2",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(at,{size:18,className:"animate-spin"}),e.jsx("span",{children:"Submitting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{size:18}),e.jsx("span",{children:"Submit Feedback"})]})})]})]})]})})},vl=({candidateId:t,hrCall:a,onClose:n,onSuccess:r})=>{const[s,l]=u.useState({status:(a==null?void 0:a.status)||"pending",scheduledDate:a!=null&&a.scheduledDate?new Date(a.scheduledDate).toISOString().split("T")[0]:"",completedDate:a!=null&&a.completedDate?new Date(a.completedDate).toISOString().split("T")[0]:"",summary:(a==null?void 0:a.summary)||"",decision:(a==null?void 0:a.decision)||"pending"}),[i,d]=u.useState(!1),h=async m=>{var o,f;if(m.preventDefault(),s.status==="completed"&&!s.summary){T.error("Please provide a summary for completed calls");return}try{d(!0);const j={...s};s.status==="completed"&&!s.completedDate&&(j.completedDate=new Date().toISOString().split("T")[0]),await M.put(`/candidates/${t}/hr-call`,j),T.success("HR call updated successfully"),r()}catch(j){T.error(((f=(o=j.response)==null?void 0:o.data)==null?void 0:f.message)||"Failed to update HR call")}finally{d(!1)}},p=m=>{const{name:o,value:f}=m.target;l(j=>({...j,[o]:f}))};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 rounded-lg border border-dark-800 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-dark-800 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"HR Call / Final Discussion"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Manage final HR discussion with candidate"})]}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white",children:e.jsx(oe,{size:24})})]}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Call Status *"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>l(m=>({...m,status:"pending"})),className:`p-4 rounded-lg border-2 transition-all ${s.status==="pending"?"border-gray-500 bg-gray-500/20":"border-dark-800 hover:border-gray-500/50"}`,children:[e.jsx(ye,{size:24,className:`mx-auto mb-2 ${s.status==="pending"?"text-gray-400":"text-gray-600"}`}),e.jsx("p",{className:`text-sm font-medium ${s.status==="pending"?"text-gray-300":"text-gray-500"}`,children:"Pending"})]}),e.jsxs("button",{type:"button",onClick:()=>l(m=>({...m,status:"scheduled"})),className:`p-4 rounded-lg border-2 transition-all ${s.status==="scheduled"?"border-blue-500 bg-blue-500/20":"border-dark-800 hover:border-blue-500/50"}`,children:[e.jsx(fe,{size:24,className:`mx-auto mb-2 ${s.status==="scheduled"?"text-blue-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${s.status==="scheduled"?"text-blue-400":"text-gray-400"}`,children:"Scheduled"})]}),e.jsxs("button",{type:"button",onClick:()=>l(m=>({...m,status:"completed"})),className:`p-4 rounded-lg border-2 transition-all ${s.status==="completed"?"border-green-500 bg-green-500/20":"border-dark-800 hover:border-green-500/50"}`,children:[e.jsx(xe,{size:24,className:`mx-auto mb-2 ${s.status==="completed"?"text-green-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${s.status==="completed"?"text-green-400":"text-gray-400"}`,children:"Completed"})]})]})]}),s.status==="scheduled"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(fe,{size:16,className:"inline mr-2"}),"Scheduled Date"]}),e.jsx("input",{type:"date",name:"scheduledDate",value:s.scheduledDate,onChange:p,className:"input-field"})]}),s.status==="completed"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx(fe,{size:16,className:"inline mr-2"}),"Completed Date"]}),e.jsx("input",{type:"date",name:"completedDate",value:s.completedDate,onChange:p,className:"input-field"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[e.jsx($e,{size:16,className:"inline mr-2"}),"Call Summary ",s.status==="completed"&&"*"]}),e.jsx("textarea",{name:"summary",value:s.summary,onChange:p,rows:4,placeholder:"Provide a summary of the HR discussion...",className:"input-field resize-none",required:s.status==="completed"})]}),s.status==="completed"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Final Decision *"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>l(m=>({...m,decision:"move-to-onboarding"})),className:`p-4 rounded-lg border-2 transition-all ${s.decision==="move-to-onboarding"?"border-green-500 bg-green-500/20":"border-dark-800 hover:border-green-500/50"}`,children:[e.jsx(Qe,{size:24,className:`mx-auto mb-2 ${s.decision==="move-to-onboarding"?"text-green-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${s.decision==="move-to-onboarding"?"text-green-400":"text-gray-400"}`,children:"Onboarding"})]}),e.jsxs("button",{type:"button",onClick:()=>l(m=>({...m,decision:"reject"})),className:`p-4 rounded-lg border-2 transition-all ${s.decision==="reject"?"border-red-500 bg-red-500/20":"border-dark-800 hover:border-red-500/50"}`,children:[e.jsx(Ee,{size:24,className:`mx-auto mb-2 ${s.decision==="reject"?"text-red-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${s.decision==="reject"?"text-red-400":"text-gray-400"}`,children:"Reject"})]}),e.jsxs("button",{type:"button",onClick:()=>l(m=>({...m,decision:"on-hold"})),className:`p-4 rounded-lg border-2 transition-all ${s.decision==="on-hold"?"border-yellow-500 bg-yellow-500/20":"border-dark-800 hover:border-yellow-500/50"}`,children:[e.jsx(ye,{size:24,className:`mx-auto mb-2 ${s.decision==="on-hold"?"text-yellow-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${s.decision==="on-hold"?"text-yellow-400":"text-gray-400"}`,children:"On Hold"})]}),e.jsxs("button",{type:"button",onClick:()=>l(m=>({...m,decision:"pending"})),className:`p-4 rounded-lg border-2 transition-all ${s.decision==="pending"?"border-blue-500 bg-blue-500/20":"border-dark-800 hover:border-blue-500/50"}`,children:[e.jsx(ye,{size:24,className:`mx-auto mb-2 ${s.decision==="pending"?"text-blue-500":"text-gray-400"}`}),e.jsx("p",{className:`text-sm font-medium ${s.decision==="pending"?"text-blue-400":"text-gray-400"}`,children:"Pending"})]})]})]}),s.decision==="move-to-onboarding"&&e.jsx("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-green-400",children:"✓ Candidate will be moved to offer-accepted stage and can be moved to onboarding"})}),s.decision==="reject"&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-red-400",children:"⚠ Candidate will be marked as rejected"})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-dark-800",children:[e.jsx("button",{type:"button",onClick:n,className:"btn-outline",disabled:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center space-x-2",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(at,{size:18,className:"animate-spin"}),e.jsx("span",{children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{size:18}),e.jsx("span",{children:"Save HR Call"})]})})]})]})]})})},wl=()=>{var Q,H,te,J,W,K,L,_,Y,se,D,X,Z,re,ae,Ne,ne,ge,Re,Me,Ve,rt,nt,lt,Pe,We,it,Ue,ot;const{candidateId:t}=Bt(),a=Ie(),[n,r]=u.useState(null),[s,l]=u.useState([]),[i,d]=u.useState(!0),[h,p]=u.useState(!1),[m,o]=u.useState(!1),[f,j]=u.useState(!1),[x,v]=u.useState(null),[k,A]=u.useState(!1),[w,F]=u.useState(new Set);u.useEffect(()=>{R()},[t]);const[N,b]=u.useState(!1),[c,C]=u.useState(null),R=async()=>{var I;try{d(!0);const[z,B,q]=await Promise.all([M.get(`/candidates/${t}`),M.get(`/candidates/${t}/timeline`),M.get(`/candidates/${t}/history`).catch(()=>null)]);r(z.data.data);const G=B.data.data;l({timeline:G.timeline||[],interviews:G.interviews||[],notifications:G.notifications||{},hrCall:G.hrCall||{},stage:G.stage,status:G.status}),(I=q==null?void 0:q.data)!=null&&I.success&&C(q.data.data)}catch(z){T.error("Failed to load candidate data"),console.error(z)}finally{d(!1)}},E=async(I,z="")=>{var B,q;try{A(!0);const G=window.location.origin;await M.post(`/candidates/${t}/notification`,{type:I,notes:z,frontendUrl:G}),T.success("Notification sent successfully"),R()}catch(G){T.error(((q=(B=G.response)==null?void 0:B.data)==null?void 0:q.message)||"Failed to send notification")}finally{A(!1)}},g=I=>{var B;return w.has(I)?!0:(B=s.timeline)==null?void 0:B.some(q=>{if(q.skippedStage===I)return!0;const G=(q.action||"").toLowerCase(),ie=(q.description||"").toLowerCase(),me=(q.reason||"").toLowerCase(),Be=G.includes("skip")||ie.includes("skip")||me.includes("skip"),y=ie.includes(`skipped ${I}`)||me.includes(`skipped ${I}`);let $=!1;return y?$=!0:$=I.toLowerCase().split(" ").every(ce=>ie.includes(ce)||me.includes(ce)),Be&&$})},P=(I,z=null)=>g(I)?!1:z?O(I)||g(z):!0,O=I=>{var z,B,q,G,ie,me;switch(I){case"Interview Scheduling":return((B=(z=s.notifications)==null?void 0:z.interviewEmail)==null?void 0:B.sent)||((G=(q=s.notifications)==null?void 0:q.interviewCall)==null?void 0:G.completed);case"HR Call":return g("Interview Scheduling")?!0:((ie=s.interviews)==null?void 0:ie.length)>0;case"Onboarding":return((me=s.hrCall)==null?void 0:me.status)==="completed";default:return!0}};return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(at,{className:"w-12 h-12 text-primary-600 animate-spin"})}):n?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>a(-1),className:"btn-outline p-2",children:e.jsx(vt,{size:20})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white",children:[n.firstName," ",n.lastName]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Hiring Journey Timeline"})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Email"}),e.jsx("p",{className:"text-white font-medium",children:n.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Phone"}),e.jsx("p",{className:"text-white font-medium",children:n.phone})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Applied For"}),e.jsx("p",{className:"text-white font-medium",children:((Q=n.appliedFor)==null?void 0:Q.title)||"N/A"})]})]})}),c&&c.applications&&c.applications.length>1&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"All Applications History"}),e.jsxs("button",{onClick:()=>b(!N),className:"btn-outline btn-sm",children:[N?"Hide":"Show"," All Applications"]})]}),N&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:["Total Applications: ",c.totalApplications]}),e.jsx("div",{className:"space-y-3",children:c.applications.map((I,z)=>e.jsx("div",{className:"bg-dark-800 rounded-lg p-4 border border-dark-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium",children:I.jobTitle||"N/A"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Applied: ",new Date(I.appliedDate).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Stage: ",e.jsx("span",{className:"capitalize",children:I.stage})," | Status: ",e.jsx("span",{className:"capitalize",children:I.status})]}),I.interviews&&I.interviews.length>0&&e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Interviews: ",I.interviews.length]})]}),e.jsx("button",{onClick:()=>a(`/candidates/${I.id}/timeline`),className:"btn-outline btn-sm",children:"View Details"})]})},I.id||z))})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Hiring Process"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-dark-800"}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(Tt,{icon:Se,title:"Interview Notification",color:"bg-blue-500",completed:((te=(H=s.notifications)==null?void 0:H.interviewEmail)==null?void 0:te.sent)||((W=(J=s.notifications)==null?void 0:J.interviewCall)==null?void 0:W.completed),skipped:g("Interview Notification"),children:e.jsxs("div",{className:"space-y-3",children:[!((L=(K=s.notifications)==null?void 0:K.interviewEmail)!=null&&L.sent)&&!((Y=(_=s.notifications)==null?void 0:_.interviewCall)!=null&&Y.completed)&&e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-blue-400 flex items-center",children:[e.jsx(we,{size:16,className:"mr-2"}),"Start by sending an email or marking the call as done to proceed with interview scheduling"]})}),!g("Interview Notification")&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>E("interviewEmail"),disabled:k||((D=(se=s.notifications)==null?void 0:se.interviewEmail)==null?void 0:D.sent),className:`btn-sm ${(Z=(X=s.notifications)==null?void 0:X.interviewEmail)!=null&&Z.sent?"btn-success":"btn-primary"}`,children:[e.jsx(Se,{size:16,className:"mr-2"}),(ae=(re=s.notifications)==null?void 0:re.interviewEmail)!=null&&ae.sent?"Email Sent":"Send Email"]}),e.jsxs("button",{onClick:()=>{const I=prompt("Add call notes:");I!==null&&E("interviewCall",I)},disabled:k||((ne=(Ne=s.notifications)==null?void 0:Ne.interviewCall)==null?void 0:ne.completed),className:`btn-sm ${(Re=(ge=s.notifications)==null?void 0:ge.interviewCall)!=null&&Re.completed?"btn-success":"btn-outline"}`,children:[e.jsx($e,{size:16,className:"mr-2"}),(Ve=(Me=s.notifications)==null?void 0:Me.interviewCall)!=null&&Ve.completed?"Call Done":"Mark Call Done"]})]}),((nt=(rt=s.notifications)==null?void 0:rt.interviewEmail)==null?void 0:nt.sent)&&s.notifications.interviewEmail.sentAt&&e.jsxs("p",{className:"text-sm text-gray-400",children:["Email sent on ",new Date(s.notifications.interviewEmail.sentAt).toLocaleString()]}),((Pe=(lt=s.notifications)==null?void 0:lt.interviewCall)==null?void 0:Pe.completed)&&s.notifications.interviewCall.completedAt&&e.jsxs("p",{className:"text-sm text-gray-400",children:["Call completed on ",new Date(s.notifications.interviewCall.completedAt).toLocaleString(),s.notifications.interviewCall.notes&&` - ${s.notifications.interviewCall.notes}`]}),!g("Interview Notification")&&e.jsxs("button",{onClick:async()=>{var I,z;if(window.confirm("Skip Interview Notification stage and move to Interview Scheduling? This will make this stage inaccessible."))try{const B=await M.post(`/candidates/${t}/move-to-stage`,{targetStage:"interview-scheduled",skipIntermediate:!0,reason:"Skipped Interview Notification stage",skippedStage:"Interview Notification"});F(q=>new Set([...q,"Interview Notification"])),T.success("Interview Notification skipped - you can now schedule interviews"),await R()}catch(B){T.error(((z=(I=B.response)==null?void 0:I.data)==null?void 0:z.message)||"Failed to skip stage")}},className:"btn-outline btn-sm mt-2",children:[e.jsx(bt,{size:16,className:"mr-2"}),"Skip This Stage"]})]})}),e.jsx(Tt,{icon:fe,title:"Interview Scheduling",color:"bg-indigo-500",completed:((We=s.interviews)==null?void 0:We.length)>0,skipped:g("Interview Scheduling"),children:e.jsxs("div",{className:"space-y-3",children:[!P("Interview Scheduling","Interview Notification")&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-yellow-400 flex items-center",children:[e.jsx(we,{size:16,className:"mr-2"}),g("Interview Notification")?"Previous stage was skipped - you can now schedule interviews":"Please send interview notification email before scheduling interviews"]})}),!g("Interview Scheduling")&&e.jsxs("button",{onClick:()=>p(!0),disabled:!P("Interview Scheduling","Interview Notification"),className:`btn-sm ${P("Interview Scheduling","Interview Notification")?"btn-primary":"btn-outline opacity-50 cursor-not-allowed"}`,children:[e.jsx(fe,{size:16,className:"mr-2"}),"Schedule Interview"]}),(it=s.interviews)==null?void 0:it.map((I,z)=>e.jsx("div",{className:"card bg-dark-800/50 p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"font-semibold text-white",children:I.interviewType}),e.jsx("span",{className:`badge ${I.status==="completed"?"badge-success":I.status==="scheduled"?"badge-info":"badge-warning"}`,children:I.status})]}),e.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx(fe,{size:14,className:"inline mr-2"}),new Date(I.scheduledDate).toLocaleDateString()," at ",I.scheduledTime]}),e.jsxs("p",{children:[e.jsx(Vs,{size:14,className:"inline mr-2"}),I.meetingPlatform]}),I.meetingLink&&e.jsx("a",{href:I.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"text-primary-500 hover:underline",children:"Join Meeting"})]}),I.feedback&&e.jsxs("div",{className:"mt-2 p-2 bg-dark-700 rounded",children:[e.jsx("p",{className:"text-sm text-gray-300",children:I.feedback}),I.rating&&e.jsx("div",{className:"flex items-center mt-1",children:[...Array(5)].map((B,q)=>e.jsx(Ws,{size:14,className:q<I.rating?"text-yellow-500 fill-yellow-500":"text-gray-600"},q))})]})]}),(I.status==="scheduled"||I.status==="completed"&&!I.feedback)&&e.jsx("button",{onClick:()=>{v(I),o(!0)},className:`btn-sm ${I.status==="completed"&&!I.feedback?"btn-primary animate-pulse":"btn-outline"}`,children:I.status==="completed"&&!I.feedback?e.jsxs(e.Fragment,{children:[e.jsx(we,{size:14,className:"mr-1"}),"Add Feedback (Required)"]}):"Add Feedback"})]})},I._id)),!g("Interview Scheduling")&&e.jsxs("button",{onClick:async()=>{var I,z;if(window.confirm("Skip Interview Scheduling stage and move to HR Call? This will make this stage inaccessible."))try{await M.post(`/candidates/${t}/move-to-stage`,{targetStage:"interview-completed",skipIntermediate:!0,reason:"Skipped Interview Scheduling stage",skippedStage:"Interview Scheduling"}),F(B=>new Set([...B,"Interview Scheduling"])),T.success("Interview Scheduling skipped - you can now conduct HR Call"),R()}catch(B){T.error(((z=(I=B.response)==null?void 0:I.data)==null?void 0:z.message)||"Failed to skip stage")}},className:"btn-outline btn-sm mt-2",children:[e.jsx(bt,{size:16,className:"mr-2"}),"Skip This Stage"]})]})}),e.jsx(Tt,{icon:$e,title:"HR Call / Final Discussion",color:"bg-purple-500",completed:((Ue=s.hrCall)==null?void 0:Ue.status)==="completed",skipped:g("HR Call"),children:e.jsxs("div",{className:"space-y-3",children:[(()=>{var B;const I=(B=s.interviews)==null?void 0:B.some(q=>q.status==="completed"&&q.feedback&&q.rating);P("HR Call","Interview Scheduling");const z=g("Interview Scheduling");return e.jsx(e.Fragment,{children:!I&&!z&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-yellow-400 flex items-center",children:[e.jsx(we,{size:16,className:"mr-2"}),"Complete at least one interview with feedback before conducting HR call"]})})})})(),!g("HR Call")&&(()=>{var z;const I=P("HR Call","Interview Scheduling");return e.jsxs("button",{onClick:()=>j(!0),disabled:!I,className:`btn-sm ${I?"btn-primary":"btn-outline opacity-50 cursor-not-allowed"}`,title:I?"Conduct HR Call":"Complete interview with feedback first, or skip interview scheduling",children:[e.jsx($e,{size:16,className:"mr-2"}),((z=s.hrCall)==null?void 0:z.status)==="completed"?"Update HR Call":"Conduct HR Call"]})})(),s.hrCall&&s.hrCall.status!=="pending"&&e.jsxs("div",{className:"card bg-dark-800/50 p-4",children:[e.jsxs("p",{className:"text-sm text-gray-400",children:["Status: ",e.jsx("span",{className:"text-white capitalize",children:s.hrCall.status})]}),s.hrCall.summary&&e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:s.hrCall.summary}),s.hrCall.decision&&s.hrCall.decision!=="pending"&&e.jsxs("p",{className:"text-sm mt-2",children:["Decision: ",e.jsx("span",{className:`font-semibold ${s.hrCall.decision==="move-to-onboarding"?"text-green-400":s.hrCall.decision==="reject"?"text-red-400":"text-yellow-400"}`,children:s.hrCall.decision.replace(/-/g," ").toUpperCase()})]})]}),!g("HR Call")&&e.jsxs("button",{onClick:async()=>{var I,z;if(window.confirm("Skip HR Call stage and move to Onboarding? This will make this stage inaccessible."))try{await M.post(`/candidates/${t}/move-to-stage`,{targetStage:"sent-to-onboarding",skipIntermediate:!0,reason:"Skipped HR Call stage",skippedStage:"HR Call"}),F(B=>new Set([...B,"HR Call"])),T.success("HR Call skipped - candidate moved to onboarding"),R()}catch(B){T.error(((z=(I=B.response)==null?void 0:I.data)==null?void 0:z.message)||"Failed to skip stage")}},className:"btn-outline btn-sm mt-2",children:[e.jsx(bt,{size:16,className:"mr-2"}),"Skip This Stage"]})]})}),e.jsxs(Tt,{icon:n.status==="rejected"?Ee:xe,title:n.status==="rejected"?"Rejected":"Onboarding",color:n.status==="rejected"?"bg-red-500":"bg-green-500",completed:n.stage==="joined"||n.status==="rejected",children:[n.stage==="joined"&&e.jsx("p",{className:"text-green-400",children:"Candidate has been moved to onboarding"}),n.status==="rejected"&&e.jsx("p",{className:"text-red-400",children:"Candidate was rejected"}),n.stage!=="joined"&&n.status!=="rejected"&&e.jsxs("button",{onClick:async()=>{var I,z;if(window.confirm("Move candidate directly to onboarding?"))try{await M.post(`/candidates/${t}/move-to-stage`,{directToOnboarding:!0,skipIntermediate:!0,skipStageValidation:!0,forceMove:!0,reason:"Direct move to onboarding from any stage"}),T.success("Candidate moved to onboarding"),R()}catch(B){T.error(((z=(I=B.response)==null?void 0:I.data)==null?void 0:z.message)||"Failed to move to onboarding")}},className:"btn-success btn-sm",children:[e.jsx(Qe,{size:16,className:"mr-2"}),"Move to Onboarding"]})]})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Activity Log"}),e.jsxs("div",{className:"space-y-4",children:[(ot=s.timeline)==null?void 0:ot.map((I,z)=>e.jsxs("div",{className:"flex items-start space-x-4 pb-4 border-b border-dark-800 last:border-0",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full mt-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-white",children:I.action}),e.jsx("p",{className:"text-sm text-gray-400",children:I.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(I.timestamp).toLocaleString(),I.performedBy&&` • by ${I.performedBy.firstName} ${I.performedBy.lastName}`]})]})]},z)),(!s.timeline||s.timeline.length===0)&&e.jsx("p",{className:"text-gray-400 text-center py-4",children:"No activity recorded yet"})]})]}),h&&e.jsx(yl,{candidateId:t,onClose:()=>p(!1),onSuccess:()=>{p(!1),R()}}),m&&x&&e.jsx(Nl,{candidateId:t,interview:x,onClose:()=>{o(!1),v(null)},onSuccess:()=>{o(!1),v(null),R()}}),f&&e.jsx(vl,{candidateId:t,hrCall:s.hrCall,onClose:()=>j(!1),onSuccess:()=>{j(!1),R()}})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-400",children:"Candidate not found"})})},Tt=({icon:t,title:a,color:n,completed:r,skipped:s,children:l})=>e.jsxs("div",{className:`relative flex items-start space-x-4 ${s?"opacity-60 pointer-events-none select-none":""}`,children:[e.jsx("div",{className:`relative z-10 flex items-center justify-center w-12 h-12 rounded-full ${s?"bg-gray-500":r?n:"bg-gray-700 opacity-50"}`,children:s?e.jsx(bt,{size:20,className:"text-white"}):e.jsx(t,{size:24,className:"text-white"})}),e.jsxs("div",{className:"flex-1 pb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("h3",{className:`text-lg font-semibold ${s?"text-gray-500":"text-white"}`,children:[a,s&&e.jsx("span",{className:"ml-2 text-xs bg-gray-600 px-2 py-1 rounded",children:"Skipped"})]})}),s?e.jsx("div",{className:"text-sm text-gray-500 italic",children:"This stage was skipped and is no longer accessible."}):l]})]}),qe={preboarding:{label:"Pre-boarding",color:"bg-blue-500",icon:Wa},offer_sent:{label:"Offer Sent",color:"bg-yellow-500",icon:Se},offer_accepted:{label:"Offer Accepted",color:"bg-green-500",icon:xe},docs_pending:{label:"Documents Pending",color:"bg-orange-500",icon:ve},docs_verified:{label:"Documents Verified",color:"bg-emerald-500",icon:Va},ready_for_joining:{label:"Ready for Joining",color:"bg-purple-500",icon:fe},completed:{label:"Completed",color:"bg-green-600",icon:xe},rejected:{label:"Rejected",color:"bg-red-500",icon:we}},ka=({status:t,onSkipStage:a,itemId:n,canEdit:r=!0})=>{const s=["preboarding","offer_sent","offer_accepted","docs_pending","docs_verified","ready_for_joining","completed"],l=s.indexOf(t),i=t==="rejected",d=async h=>{window.confirm(`Skip to ${qe[h].label} stage?`)&&a&&n&&await a(n,h)};return e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex items-center space-x-2 mb-2",children:s.map((h,p)=>{const m=p<l||t==="completed",o=p===l&&!i,f=p===s.length-1,j=qe[h],x=!m&&!o&&p>l&&t!=="rejected"&&t!=="completed";return e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full transition-all duration-300 ${i?"bg-red-500 text-white":m?"bg-green-500 text-white":o?`${j.color} text-white animate-pulse`:"bg-gray-700 text-gray-400"}`,children:tt.createElement(j.icon,{size:16})}),e.jsx("div",{className:`mt-1 text-xs font-medium text-center max-w-20 ${i?"text-red-400":m?"text-green-400":o?"text-blue-400":"text-gray-500"}`,children:j.label}),x&&a&&r&&e.jsxs("button",{onClick:v=>{v.stopPropagation(),d(h)},className:"mt-1 text-xs text-primary-400 hover:text-primary-300 flex items-center space-x-1",title:`Skip to ${j.label}`,children:[e.jsx(bt,{size:10}),e.jsx("span",{children:"Skip"})]})]}),!f&&e.jsx("div",{className:`mx-2 h-0.5 w-12 transition-all duration-300 ${i?"bg-red-500":m?"bg-green-500":"bg-gray-700"}`})]},h)})})})},Cl=()=>{const{user:t}=_e(),n=!((t==null?void 0:t.role)==="company_admin"),[r,s]=u.useState("onboarding"),[l,i]=u.useState([]),[d,h]=u.useState(!1),[p,m]=u.useState(""),[o,f]=u.useState(""),[j,x]=u.useState(""),[v,k]=u.useState({}),[A,w]=u.useState(null),[F,N]=u.useState(!1),[b,c]=u.useState(!1),[C,R]=u.useState(null),[E,g]=u.useState(""),[P,O]=u.useState(null),[Q,H]=u.useState([]),[te,J]=u.useState(!1),[W,K]=u.useState(!1),[L,_]=u.useState(null),[Y,se]=u.useState({status:"",category:"",search:""}),[D,X]=u.useState(!1),[Z,re]=u.useState(null);u.useEffect(()=>{r==="onboarding"?ae():r==="templates"&&Pe()},[r,p,o,j,Y]);const ae=async()=>{var z,B,q,G,ie,me,Be,y,$;h(!0);try{const U=new URLSearchParams;p&&U.append("status",p),o&&U.append("department",o),j&&U.append("search",j),U.append("_t",Date.now()),console.log("🔍 Fetching onboarding list with params:",U.toString());const V=await M.get(`/onboarding?${U.toString()}`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});console.log("📦 Onboarding API Response:",V==null?void 0:V.data),console.log("📋 Onboarding List Data:",(z=V==null?void 0:V.data)==null?void 0:z.data),console.log("📊 List Length:",(q=(B=V==null?void 0:V.data)==null?void 0:B.data)==null?void 0:q.length),i(((G=V==null?void 0:V.data)==null?void 0:G.data)||[]),k(((ie=V==null?void 0:V.data)==null?void 0:ie.summary)||{}),((Be=(me=V==null?void 0:V.data)==null?void 0:me.data)==null?void 0:Be.length)===0&&console.warn("⚠️ No onboarding records returned from API")}catch(U){console.error("❌ Error fetching onboarding list:",U),T.error((($=(y=U==null?void 0:U.response)==null?void 0:y.data)==null?void 0:$.message)||"Failed to load onboarding list")}finally{h(!1)}},Ne=async(z,B,q="")=>{var G,ie;try{await M.put(`/onboarding/${z}/status`,{status:B,notes:q}),T.success("Status updated successfully"),ae()}catch(me){T.error(((ie=(G=me==null?void 0:me.response)==null?void 0:G.data)==null?void 0:ie.message)||"Failed to update status")}},ne=async(z,B)=>{var q,G,ie,me;try{await M.put(`/onboarding/${z}/status`,{status:B,notes:`Stage skipped to ${((q=qe[B])==null?void 0:q.label)||B}`}),T.success(`Skipped to ${((G=qe[B])==null?void 0:G.label)||B} stage`),ae()}catch(Be){T.error(((me=(ie=Be.response)==null?void 0:ie.data)==null?void 0:me.message)||"Failed to skip stage")}},ge=async(z,B)=>{var q,G;try{const ie=window.location.origin;await M.post(`/onboarding/${z}/send-offer`,{...B,frontendUrl:ie}),T.success("Offer sent successfully"),ae()}catch(ie){T.error(((G=(q=ie==null?void 0:ie.response)==null?void 0:q.data)==null?void 0:G.message)||"Failed to send offer")}},Re=async(z,B,q=!0)=>{var G,ie;try{await M.post(`/onboarding/${z}/set-joining-date`,{joiningDate:B,notifyTeams:q}),T.success("Joining date set and teams notified"),ae()}catch(me){T.error(((ie=(G=me==null?void 0:me.response)==null?void 0:G.data)==null?void 0:ie.message)||"Failed to set joining date")}},Me=async z=>{var B,q;if(confirm("Are you sure you want to complete this onboarding? This will create an employee record."))try{await M.post(`/onboarding/${z}/complete`),T.success("Onboarding completed successfully"),ae()}catch(G){T.error(((q=(B=G==null?void 0:G.response)==null?void 0:B.data)==null?void 0:q.message)||"Failed to complete onboarding")}},Ve=async z=>{var B,q;try{const G=window.location.origin,ie=`${G}/public/upload-documents`,me=await M.post(`/onboarding/${z}/request-documents`,{frontendUrl:G,uploadBaseUrl:ie});T.success(`Document request email sent to ${me.data.data.sentTo}`)}catch(G){T.error(((q=(B=G==null?void 0:G.response)==null?void 0:B.data)==null?void 0:q.message)||"Failed to send document request")}},rt=async z=>{O(z);try{const B=await M.put(`/onboarding/${A._id}/documents/${z}/verify`,{action:"approve",notes:"Document verified and accepted"});if(B.data.success){if(T.success("Document accepted successfully!"),ae(),A){const q=l.find(G=>G._id===A._id);w(q)}}else T.error(B.data.message||"Failed to accept document")}catch(B){console.error("Error accepting document:",B),T.error("Failed to accept document")}finally{O(null)}},nt=z=>{R(z),g(""),c(!0)},lt=async()=>{if(!E.trim()){T.error("Please provide a reason for rejection");return}O(C._id);try{const z=await M.put(`/onboarding/${A._id}/documents/${C._id}/verify`,{action:"reject",notes:E});if(z.data.success){if(T.success("Document rejected and email sent to candidate"),c(!1),R(null),g(""),ae(),A){const B=l.find(q=>q._id===A._id);w(B)}}else T.error(z.data.message||"Failed to reject document")}catch(z){console.error("Error rejecting document:",z),T.error("Failed to reject document")}finally{O(null)}},Pe=async()=>{J(!0);try{const z=new URLSearchParams;Y.status&&z.append("status",Y.status),Y.category&&z.append("category",Y.category),Y.search&&z.append("search",Y.search);const B=await M.get(`/offer-templates?${z.toString()}`);H(B.data.data||[])}catch(z){T.error("Failed to load offer templates"),console.error(z)}finally{J(!1)}},We=async z=>{var B,q;try{L?(await M.put(`/offer-templates/${L._id}`,z),T.success("Template updated successfully")):(await M.post("/offer-templates",z),T.success("Template created successfully")),K(!1),_(null),Pe()}catch(G){T.error(((q=(B=G==null?void 0:G.response)==null?void 0:B.data)==null?void 0:q.message)||"Failed to save template")}},it=async z=>{if(confirm("Are you sure you want to delete this template?"))try{await M.delete(`/offer-templates/${z}`),T.success("Template deleted successfully"),Pe()}catch{T.error("Failed to delete template")}},Ue=async z=>{try{const B={...z,name:`${z.name} (Copy)`,isDefault:!1};delete B._id,delete B.createdAt,delete B.updatedAt,await M.post("/offer-templates",B),T.success("Template duplicated successfully"),Pe()}catch{T.error("Failed to duplicate template")}},ot=async(z,B)=>{try{await M.put(`/offer-templates/${z}/status`,{status:B}),T.success(`Template ${B==="active"?"activated":"deactivated"} successfully`),Pe()}catch{T.error("Failed to update template status")}},I=l;return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Employee Onboarding"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Manage comprehensive candidate onboarding process"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[r==="onboarding"&&v.overdue>0&&e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-red-900/20 border border-red-800 rounded-lg",children:[e.jsx(we,{size:16,className:"text-red-400"}),e.jsxs("span",{className:"text-sm text-red-400",children:[v.overdue," Overdue"]})]}),r==="onboarding"&&e.jsxs("span",{className:"text-sm text-gray-400",children:["Total: ",v.total||0]}),r==="templates"&&e.jsxs("button",{onClick:()=>{_(null),K(!0)},className:"btn-primary flex items-center space-x-2",children:[e.jsx(Ae,{size:18}),e.jsx("span",{children:"Create Template"})]})]})]}),e.jsx("div",{className:"card p-1",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>s("onboarding"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors ${r==="onboarding"?"bg-primary-600 text-white":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(he,{size:18}),e.jsx("span",{children:"Onboarding List"})]})}),e.jsx("button",{onClick:()=>s("templates"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors ${r==="templates"?"bg-primary-600 text-white":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(Gs,{size:18}),e.jsx("span",{children:"Offer Templates"})]})})]})}),r==="onboarding"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Object.entries(v.byStatus||{}).map(([z,B])=>{const q=qe[z];return q?e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${q.color}`,children:tt.createElement(q.icon,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:q.label}),e.jsx("p",{className:"text-xl font-bold text-white",children:B})]})]})},z):null})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{size:16,className:"text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search candidates...",value:j,onChange:z=>x(z.target.value),className:"input-field w-64"})]}),e.jsxs("select",{value:p,onChange:z=>m(z.target.value),className:"input-field w-48",children:[e.jsx("option",{value:"",children:"All Status"}),Object.entries(qe).map(([z,B])=>e.jsx("option",{value:z,children:B.label},z))]}),e.jsx("button",{onClick:()=>{m(""),f(""),x("")},className:"btn-outline text-sm",children:"Clear Filters"})]})}),e.jsx("div",{className:"space-y-4",children:I.map(z=>e.jsx(kl,{item:z,canEdit:n,onUpdateStatus:Ne,onSendOffer:ge,onSetJoiningDate:Re,onComplete:Me,onOpenSendOfferModal:B=>{re(B),X(!0)},onViewDetails:B=>{w(B),N(!0)},onRequestDocuments:Ve,onSkipStage:ne},z._id))}),I.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(he,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"No onboarding records found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:j||p?"Try adjusting your filters":"Candidates will appear here when sent to onboarding"})]}),F&&A&&e.jsx(Sl,{onboarding:A,onClose:()=>{N(!1),w(null)},verifyingDoc:P,onAcceptDocument:rt,onRejectDocument:nt}),e.jsx(Dl,{isOpen:b,onClose:()=>{c(!1),R(null),g("")},document:C,rejectionNotes:E,setRejectionNotes:g,onSubmit:lt,isSubmitting:P!==null})]}),r==="templates"&&e.jsx(Al,{templates:Q,loading:te,filter:Y,setFilter:se,onEdit:z=>{_(z),K(!0)},onDelete:it,onDuplicate:Ue,onUpdateStatus:ot}),W&&e.jsx(Fl,{template:L,onClose:()=>{K(!1),_(null)},onSave:We}),D&&Z&&e.jsx(El,{candidate:Z,onClose:()=>{X(!1),re(null)},onSend:ge})]})},kl=({item:t,onUpdateStatus:a,onSendOffer:n,onSetJoiningDate:r,onComplete:s,onViewDetails:l,onOpenSendOfferModal:i,onRequestDocuments:d,onSkipStage:h,canEdit:p=!0})=>{var b;const[m,o]=u.useState(!1),[f,j]=u.useState(!1),[x,v]=u.useState(""),k=qe[t.status],A=()=>{switch(t.status){case"preboarding":return[{label:"Send Offer",action:()=>i(t),color:"btn-primary"}];case"offer_sent":return[{label:"Mark Accepted",action:()=>a(t._id,"offer_accepted"),color:"btn-success"},{label:"Mark Rejected",action:()=>a(t._id,"rejected"),color:"btn-danger"}];case"offer_accepted":return[{label:"Request Documents",action:()=>a(t._id,"docs_pending"),color:"btn-primary"}];case"docs_pending":return[{label:"Verify Documents",action:()=>a(t._id,"docs_verified"),color:"btn-success"}];case"docs_verified":return[{label:"Set Joining Date",action:()=>w(),color:"btn-primary"}];case"ready_for_joining":return[{label:"Complete Onboarding",action:()=>s(t._id),color:"btn-success"}];default:return[]}},w=()=>{j(!0);const c=new Date().toISOString().split("T")[0];v(c)},F=()=>{x&&(r(t._id,x),j(!1),v(""))},N=A();return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:t.candidateName}),e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${k.color} text-white`,children:[tt.createElement(k.icon,{size:12,className:"mr-1"}),k.label]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Se,{size:14}),e.jsx("span",{children:t.candidateEmail})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{size:14}),e.jsx("span",{children:t.candidatePhone})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(he,{size:14}),e.jsx("span",{children:t.position})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>l(t),className:"btn-outline text-sm",children:e.jsx(st,{size:16})}),p&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>o(!m),className:"btn-outline text-sm",children:e.jsx(Ga,{size:16})}),m&&e.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-gray-800 border border-gray-700 rounded-lg shadow-lg z-10",children:N.map((c,C)=>e.jsx("button",{onClick:()=>{c.action(),o(!1)},className:"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-700 first:rounded-t-lg last:rounded-b-lg",children:c.label},C))})]}),!p&&e.jsx("div",{className:"text-xs text-gray-500 bg-gray-800 px-2 py-1 rounded",children:"View Only"})]})]}),e.jsx(ka,{status:t.status,onSkipStage:h,itemId:t._id,canEdit:p}),t.joiningDate&&e.jsx("div",{className:"mb-4 p-3 bg-green-900/20 border border-green-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{size:16,className:"text-green-400"}),e.jsxs("span",{className:"text-sm text-green-400",children:["Joining Date: ",new Date(t.joiningDate).toLocaleDateString()]})]})}),((b=t.offer)==null?void 0:b.expiryDate)&&t.status==="offer_sent"&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-900/20 border border-yellow-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{size:16,className:"text-yellow-400"}),e.jsxs("span",{className:"text-sm text-yellow-400",children:["Offer expires: ",new Date(t.offer.expiryDate).toLocaleDateString()]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",t.onboardingId," • Created: ",new Date(t.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>d(t._id),className:"btn-outline text-sm flex items-center space-x-1",title:"Send document upload link to candidate",children:[e.jsx(ve,{size:14}),e.jsx("span",{children:"Request Documents"})]}),N.slice(0,2).map((c,C)=>e.jsx("button",{onClick:c.action,className:`${c.color} text-sm`,children:c.label},C))]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 border border-dark-700 rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Set Joining Date"}),e.jsx("button",{onClick:()=>{j(!1),v("")},className:"text-gray-400 hover:text-white",children:e.jsx(oe,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Joining Date"}),e.jsx("input",{type:"date",value:x,onChange:c=>v(c.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 bg-dark-800 border border-dark-700 rounded-lg text-white focus:border-primary-600 focus:outline-none"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:F,className:"flex-1 btn-primary",disabled:!x,children:[e.jsx(fe,{size:16,className:"mr-2"}),"Set Date"]}),e.jsx("button",{onClick:()=>{j(!1),v("")},className:"flex-1 btn-outline",children:"Cancel"})]})]})]})})]})},Sl=({onboarding:t,onClose:a,verifyingDoc:n,onAcceptDocument:r,onRejectDocument:s})=>{var p;const l=qe[t.status],i=m=>m?new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",d=m=>m?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(m):"N/A",h=m=>{if(!m)return"";if(m.startsWith("http://")||m.startsWith("https://"))return m;const o=De.apiBaseUrl.replace("/api","");return m.startsWith("/uploads/")?`${o}${m}`:m.startsWith("/")?m:`${o}/uploads/${m}`};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 border border-dark-700 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-dark-700 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:t.candidateName}),e.jsxs("p",{className:"text-gray-400 mt-1",children:["Onboarding ID: ",t.onboardingId]})]}),e.jsx("button",{onClick:a,className:"btn-outline p-2",children:e.jsx(oe,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Current Status"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${l.color}`,children:tt.createElement(l.icon,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:l.label}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Updated: ",i(t.updatedAt)]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(ka,{status:t.status})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Se,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Email"}),e.jsx("p",{className:"text-white",children:t.candidateEmail})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx($e,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Phone"}),e.jsx("p",{className:"text-white",children:t.candidatePhone})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(be,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Position"}),e.jsx("p",{className:"text-white",children:t.position})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ka,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Department"}),e.jsx("p",{className:"text-white",children:((p=t.department)==null?void 0:p.name)||"N/A"})]})]})]})]}),t.offer&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Offer Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(be,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Offered Designation"}),e.jsx("p",{className:"text-white",children:t.offer.offeredDesignation||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(yt,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Offered CTC"}),e.jsx("p",{className:"text-white",children:d(t.offer.offeredCTC)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(fe,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Start Date"}),e.jsx("p",{className:"text-white",children:i(t.offer.startDate)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ye,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Offer Sent"}),e.jsx("p",{className:"text-white",children:i(t.offer.sentAt)})]})]}),t.offer.expiryDate&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(we,{size:18,className:"text-yellow-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Offer Expires"}),e.jsx("p",{className:"text-white",children:i(t.offer.expiryDate)})]})]})]}),t.offer.salary&&e.jsxs("div",{className:"mt-4 p-4 bg-dark-800 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-400 mb-3",children:"Salary Breakdown"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Basic"}),e.jsx("p",{className:"text-white font-medium",children:d(t.offer.salary.basic)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"HRA"}),e.jsx("p",{className:"text-white font-medium",children:d(t.offer.salary.hra)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Allowances"}),e.jsx("p",{className:"text-white font-medium",children:d(t.offer.salary.allowances)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total"}),e.jsx("p",{className:"text-white font-medium",children:d(t.offer.salary.total)})]})]})]})]}),t.joiningDate&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Joining Information"}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(fe,{size:18,className:"text-primary-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Joining Date"}),e.jsx("p",{className:"text-white font-medium text-lg",children:i(t.joiningDate)})]})]})]}),t.auditTrail&&t.auditTrail.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Activity Timeline"}),e.jsx("div",{className:"space-y-3",children:t.auditTrail.slice().reverse().map((m,o)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-dark-800 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full mt-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:m.action.replace(/_/g," ").toUpperCase()}),e.jsx("p",{className:"text-gray-400 text-sm",children:m.description}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:i(m.timestamp)})]})]},o))})]}),t.documents&&t.documents.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Documents"}),e.jsx("div",{className:"space-y-3",children:t.documents.map((m,o)=>e.jsxs("div",{className:"p-4 bg-dark-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ve,{size:18,className:"text-primary-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:m.name}),e.jsx("p",{className:"text-gray-400 text-sm",children:m.type})]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${m.status==="verified"?"bg-green-500/20 text-green-400":m.status==="rejected"?"bg-red-500/20 text-red-400":m.status==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:m.status||"uploaded"})]}),m.rejectionReason&&e.jsxs("div",{className:"mb-3 p-2 bg-red-500/10 border border-red-500/20 rounded text-sm text-red-400",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",m.rejectionReason]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-2",children:m.url&&e.jsxs("a",{href:h(m.url),target:"_blank",rel:"noreferrer",className:"text-sm text-primary-400 hover:text-primary-300 flex items-center space-x-1",children:[e.jsx(st,{size:14}),e.jsx("span",{children:"View"})]})}),m.status!=="verified"&&m.url&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>r(m._id),disabled:n===m._id,className:"flex items-center space-x-1 px-3 py-1.5 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded text-sm font-medium transition-colors disabled:opacity-50",children:[e.jsx(Ya,{size:14}),e.jsx("span",{children:n===m._id?"Processing...":"Accept"})]}),e.jsxs("button",{onClick:()=>s(m),disabled:n===m._id,className:"flex items-center space-x-1 px-3 py-1.5 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded text-sm font-medium transition-colors disabled:opacity-50",children:[e.jsx(oe,{size:14}),e.jsx("span",{children:"Reject"})]})]})]})]},o))})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-dark-900 border-t border-dark-700 p-6 flex justify-end",children:e.jsx("button",{onClick:a,className:"btn-primary",children:"Close"})})]})})},Al=({templates:t,loading:a,filter:n,setFilter:r,onEdit:s,onDelete:l,onDuplicate:i,onUpdateStatus:d})=>a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fe,{size:16,className:"text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search templates...",value:n.search,onChange:h=>r({...n,search:h.target.value}),className:"input-field w-64"})]}),e.jsxs("select",{value:n.status,onChange:h=>r({...n,status:h.target.value}),className:"input-field w-40",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"draft",children:"Draft"})]}),e.jsxs("select",{value:n.category,onChange:h=>r({...n,category:h.target.value}),className:"input-field w-40",children:[e.jsx("option",{value:"",children:"All Categories"}),e.jsx("option",{value:"full-time",children:"Full Time"}),e.jsx("option",{value:"part-time",children:"Part Time"}),e.jsx("option",{value:"contract",children:"Contract"}),e.jsx("option",{value:"intern",children:"Intern"}),e.jsx("option",{value:"executive",children:"Executive"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(h=>e.jsxs("div",{className:"card p-4 hover:border-primary-500 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:h.name}),e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:h.description})]}),h.isDefault&&e.jsx("span",{className:"px-2 py-1 bg-primary-500/20 text-primary-400 text-xs font-medium rounded",children:"Default"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Category:"}),e.jsx("span",{className:"text-white capitalize",children:h.category})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Status:"}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${h.status==="active"?"bg-green-500/20 text-green-400":h.status==="inactive"?"bg-gray-500/20 text-gray-400":"bg-yellow-500/20 text-yellow-400"}`,children:h.status})]}),h.usageCount>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Used:"}),e.jsxs("span",{className:"text-white",children:[h.usageCount," times"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>s(h),className:"flex-1 btn-outline text-sm py-2",children:[e.jsx(Hs,{size:14,className:"inline mr-1"}),"Edit"]}),e.jsx("button",{onClick:()=>i(h),className:"btn-outline p-2",title:"Duplicate",children:e.jsx(Xa,{size:16})}),e.jsx("button",{onClick:()=>d(h._id,h.status==="active"?"inactive":"active"),className:`btn-outline p-2 ${h.status==="active"?"text-yellow-400":"text-green-400"}`,title:h.status==="active"?"Deactivate":"Activate",children:h.status==="active"?e.jsx(ye,{size:16}):e.jsx(xe,{size:16})}),e.jsx("button",{onClick:()=>l(h._id),className:"btn-outline p-2 text-red-400 hover:bg-red-500/10",title:"Delete",children:e.jsx(is,{size:16})})]})]},h._id))}),t.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Gs,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"No templates found"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:n.search||n.status||n.category?"Try adjusting your filters":"Create your first offer template to get started"})]})]}),Fl=({template:t,onClose:a,onSave:n})=>{const[r,s]=u.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",category:(t==null?void 0:t.category)||"full-time",subject:(t==null?void 0:t.subject)||"",content:(t==null?void 0:t.content)||"",status:(t==null?void 0:t.status)||"draft",isDefault:(t==null?void 0:t.isDefault)||!1,variables:(t==null?void 0:t.variables)||[],expiryDays:(t==null?void 0:t.expiryDays)||1,reminderDays:(t==null?void 0:t.reminderDays)||[]}),[l,i]=u.useState({}),d=()=>{const o={};return r.name.trim()||(o.name="Template name is required"),r.subject.trim()||(o.subject="Email subject is required"),r.content.trim()||(o.content="Template content is required"),r.expiryDays<1&&(o.expiryDays="Expiry days must be at least 1"),i(o),Object.keys(o).length===0},h=o=>{o.preventDefault(),d()&&n(r)},p=o=>{s({...r,content:r.content+`{{${o}}}`})},m=["candidateName","candidateEmail","position","department","offeredCTC","startDate","joiningDate","companyName","hrName","hrEmail","hrPhone"];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 border border-dark-700 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-dark-700 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:t?"Edit Template":"Create New Template"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Design your offer letter template"})]}),e.jsx("button",{onClick:a,className:"btn-outline p-2",children:e.jsx(oe,{size:20})})]}),e.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Template Name *"}),e.jsx("input",{type:"text",value:r.name,onChange:o=>s({...r,name:o.target.value}),className:`input-field w-full ${l.name?"border-red-500":""}`,placeholder:"e.g., Full-Time Offer Letter"}),l.name&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category *"}),e.jsxs("select",{value:r.category,onChange:o=>s({...r,category:o.target.value}),className:"input-field w-full",children:[e.jsx("option",{value:"full-time",children:"Full Time"}),e.jsx("option",{value:"part-time",children:"Part Time"}),e.jsx("option",{value:"contract",children:"Contract"}),e.jsx("option",{value:"intern",children:"Intern"}),e.jsx("option",{value:"executive",children:"Executive"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:o=>s({...r,description:o.target.value}),className:"input-field w-full",rows:"2",placeholder:"Brief description of this template"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Subject *"}),e.jsx("input",{type:"text",value:r.subject,onChange:o=>s({...r,subject:o.target.value}),className:`input-field w-full ${l.subject?"border-red-500":""}`,placeholder:"e.g., Offer Letter - {{position}} at {{companyName}}"}),l.subject&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.subject})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Template Content *"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Insert Variable:"}),e.jsxs("select",{onChange:o=>{o.target.value&&(p(o.target.value),o.target.value="")},className:"input-field text-xs py-1",children:[e.jsx("option",{value:"",children:"Select..."}),m.map(o=>e.jsx("option",{value:o,children:o},o))]})]})]}),e.jsx("textarea",{value:r.content,onChange:o=>s({...r,content:o.target.value}),className:`input-field w-full font-mono text-sm ${l.content?"border-red-500":""}`,rows:"12",placeholder:`Dear {{candidateName}},

We are pleased to offer you the position of {{position}} at {{companyName}}...

Use {{variableName}} to insert dynamic content.`}),l.content&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.content}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Use double curly braces for variables, e.g., ","{{candidateName}}"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{value:r.status,onChange:o=>s({...r,status:o.target.value}),className:"input-field w-full",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Offer Expiry (Days) *"}),e.jsx("input",{type:"number",min:"1",value:r.expiryDays,onChange:o=>s({...r,expiryDays:parseInt(o.target.value)}),className:`input-field w-full ${l.expiryDays?"border-red-500":""}`}),l.expiryDays&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.expiryDays})]}),e.jsx("div",{className:"flex items-center pt-8",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.isDefault,onChange:o=>s({...r,isDefault:o.target.checked}),className:"w-4 h-4 rounded border-gray-600 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Set as Default"})]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-dark-700",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-outline",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[e.jsx(Qa,{size:18}),e.jsx("span",{children:t?"Update Template":"Create Template"})]})]})]})]})})},El=({candidate:t,onClose:a,onSend:n})=>{const[r,s]=u.useState({candidateName:t.candidateName||"",salary:"",templateId:"",designation:t.position||"",startDate:""}),[l,i]=u.useState({}),[d,h]=u.useState(!1),[p,m]=u.useState([]),[o,f]=u.useState(!0),[j,x]=u.useState(null);u.useEffect(()=>{(async()=>{var F;try{f(!0);const b=(await M.get("/offer-templates",{params:{status:"active"}})).data.data||[];m(b);const c=b.find(C=>C.isDefault);c?s(C=>({...C,templateId:c._id})):b.length>0&&s(C=>({...C,templateId:b[0]._id}))}catch(N){console.error("Failed to load templates:",N);const b=[{_id:"default-template-1",name:"Full-Time Offer Template",category:"full-time",description:"Standard full-time employment offer template",subject:"🎉 Congratulations! Offer Letter - {{position}} at {{companyName}}",content:`Dear {{candidateName}},

We are thrilled to extend an offer for the position of {{position}} at {{companyName}}!

OFFER DETAILS:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Position: {{position}}
Department: {{department}}
Employment Type: Full-Time
Annual CTC: ₹{{offeredCTC}}
Proposed Start Date: {{startDate}}

This offer is valid until {{expiryDate}}. Please confirm your acceptance by replying to this email.

We look forward to welcoming you to our team!

Best regards,
{{hrName}}
{{companyName}}
{{hrEmail}} | {{hrPhone}}`,status:"active",isDefault:!0,expiryDays:7,version:"1.0",usageCount:0},{_id:"default-template-2",name:"Internship Offer Template",category:"intern",description:"Internship offer template with stipend details",subject:"Welcome Aboard! Internship Offer - {{position}} at {{companyName}}",content:`Dear {{candidateName}},

Congratulations! We are excited to offer you an internship position as {{position}} at {{companyName}}.

INTERNSHIP DETAILS:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Position: {{position}}
Department: {{department}}
Type: Internship
Monthly Stipend: ₹{{offeredCTC}}
Start Date: {{startDate}}

LEARNING OPPORTUNITIES:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• Work on real-world projects
• Learn from experienced professionals
• Mentorship and guidance

ACCEPTANCE DEADLINE:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Please confirm your acceptance by {{expiryDate}} by replying to this email.

We're excited to have you join our team!

Best regards,
{{hrName}}
{{companyName}}
{{hrEmail}} | {{hrPhone}}`,status:"active",isDefault:!1,expiryDays:7,version:"1.0",usageCount:0}];m(b),s(c=>({...c,templateId:b[0]._id})),((F=N.response)==null?void 0:F.status)!==404?T.error("Failed to load email templates, using default templates"):console.warn("⚠️ Offer templates API not available, using fallback templates for testing")}finally{f(!1)}})()},[]);const v=()=>{const w={};return r.candidateName.trim()||(w.candidateName="Candidate name is required"),(!r.salary||r.salary<=0)&&(w.salary="Valid salary is required"),r.templateId||(w.templateId="Please select an email template"),r.designation.trim()||(w.designation="Designation is required"),r.startDate||(w.startDate="Start date is required"),i(w),Object.keys(w).length===0},k=async w=>{if(w.preventDefault(),!!v()){h(!0);try{await n(t._id,{templateId:r.templateId,offerDetails:{designation:r.designation,offeredCTC:parseFloat(r.salary),ctc:parseFloat(r.salary),salary:parseFloat(r.salary),startDate:r.startDate}}),a()}catch{T.error("Failed to send offer")}finally{h(!1)}}},A=w=>{s({...r,templateId:w});const F=p.find(N=>N._id===w);x(F)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-900 border border-dark-700 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-dark-900 border-b border-dark-700 p-6 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Send Offer Letter Email"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Select a template and fill in the offer details"})]}),e.jsx("button",{onClick:a,className:"btn-outline p-2",children:e.jsx(oe,{size:20})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-dark-800 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Position:"}),e.jsx("span",{className:"text-white font-medium",children:t.position})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Email:"}),e.jsx("span",{className:"text-white",children:t.candidateEmail})]}),t.department&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Department:"}),e.jsx("span",{className:"text-white",children:t.department.name||t.department})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Email Template *"}),o?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-primary-600 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"ml-2 text-gray-400 text-sm",children:"Loading templates..."})]}):p.length===0?e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3",children:e.jsx("p",{className:"text-yellow-400 text-sm",children:"No active templates available. Please create an offer template first."})}):e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:r.templateId,onChange:w=>A(w.target.value),className:`input-field w-full ${l.templateId?"border-red-500":""}`,children:[e.jsx("option",{value:"",children:"Select a template..."}),p.map(w=>e.jsxs("option",{value:w._id,children:[w.name," - ",w.category,w.isDefault&&" (Default)"]},w._id))]}),l.templateId&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.templateId}),j&&e.jsxs("div",{className:"mt-2 p-3 bg-dark-800 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Template Preview:"}),e.jsx("p",{className:"text-sm text-white font-medium mb-1",children:j.subject}),e.jsx("p",{className:"text-xs text-gray-500",children:j.description})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Candidate Name *"}),e.jsx("input",{type:"text",value:r.candidateName,onChange:w=>s({...r,candidateName:w.target.value}),className:`input-field w-full ${l.candidateName?"border-red-500":""}`,placeholder:"Enter candidate's full name"}),l.candidateName&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.candidateName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Designation *"}),e.jsx("input",{type:"text",value:r.designation,onChange:w=>s({...r,designation:w.target.value}),className:`input-field w-full ${l.designation?"border-red-500":""}`,placeholder:"e.g., Senior Software Engineer"}),l.designation&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.designation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Annual CTC (₹) *"}),e.jsx("input",{type:"number",min:"0",step:"1000",value:r.salary,onChange:w=>s({...r,salary:w.target.value}),className:`input-field w-full ${l.salary?"border-red-500":""}`,placeholder:"e.g., 500000"}),l.salary&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.salary}),r.salary&&e.jsxs("p",{className:"text-gray-400 text-xs mt-1",children:["₹",parseFloat(r.salary).toLocaleString("en-IN")," per annum"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Proposed Start Date *"}),e.jsx("input",{type:"date",value:r.startDate,onChange:w=>s({...r,startDate:w.target.value}),min:new Date().toISOString().split("T")[0],className:`input-field w-full ${l.startDate?"border-red-500":""}`}),l.startDate&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:l.startDate})]}),e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3",children:e.jsxs("p",{className:"text-blue-400 text-sm",children:[e.jsx(Se,{size:14,className:"inline mr-1"}),e.jsx("strong",{children:"Note:"})," The offer email will be sent to ",t.candidateEmail," using the selected template."]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-dark-700",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-outline",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex items-center space-x-2",disabled:d||o||p.length===0,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Sending..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{size:18}),e.jsx("span",{children:"Send Offer Email"})]})})]})]})]})})},Dl=({isOpen:t,onClose:a,document:n,rejectionNotes:r,setRejectionNotes:s,onSubmit:l,isSubmitting:i})=>t?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-dark-800 rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Reject Document"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white",children:e.jsx(oe,{size:20})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-gray-300 mb-2",children:["Document: ",e.jsx("strong",{children:(n==null?void 0:n.name)||(n==null?void 0:n.type)})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Please provide a reason for rejecting this document. The candidate will receive an email with your notes."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Rejection Reason ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{value:r,onChange:d=>s(d.target.value),placeholder:"e.g., Document is not clear, please upload a better quality scan...",className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:a,disabled:i,className:"px-4 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:l,disabled:!r.trim()||i,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Sending...":"Reject & Send Email"})]})]})})}):null,Tl=()=>{const[t,a]=u.useState({requiredSkills:[],preferredSkills:[],minimumExperience:0,candidateIds:[],maxResults:10,includeAllCandidates:!1,currentCTCMin:"",currentCTCMax:"",expectedCTCMin:"",expectedCTCMax:"",currentLocation:"",preferredLocation:""}),[n,r]=u.useState(""),[s,l]=u.useState(""),[i,d]=u.useState([]),[h,p]=u.useState(!1),[m,o]=u.useState(""),[f,j]=u.useState(!1),[x,v]=u.useState(null),k=["JavaScript","Python","Java","React","Node.js","Angular","Vue.js","AWS","Azure","GCP","Docker","Kubernetes","MongoDB","PostgreSQL","MySQL","Redis","REST APIs","GraphQL","Microservices","Git","Agile","Scrum","Machine Learning","Deep Learning","TensorFlow","TypeScript","HTML","CSS","DevOps","CI/CD","Terraform","Ansible"],A=(c,C)=>{if(!c.trim())return;const R=C==="required"?"requiredSkills":"preferredSkills",E=t[R];E.includes(c.trim())||a(g=>({...g,[R]:[...E,c.trim()]})),C==="required"?r(""):l("")},w=(c,C)=>{const R=C==="required"?"requiredSkills":"preferredSkills";a(E=>({...E,[R]:E[R].filter(g=>g!==c)}))},F=async()=>{var c,C;p(!0),o(""),d([]);try{const R={requiredSkills:t.requiredSkills,preferredSkills:t.preferredSkills,minimumExperience:t.minimumExperience,candidateIds:t.candidateIds,maxResults:t.maxResults,includeAllCandidates:t.includeAllCandidates};t.currentCTCMin&&(R.currentCTCMin=Number(t.currentCTCMin)),t.currentCTCMax&&(R.currentCTCMax=Number(t.currentCTCMax)),t.expectedCTCMin&&(R.expectedCTCMin=Number(t.expectedCTCMin)),t.expectedCTCMax&&(R.expectedCTCMax=Number(t.expectedCTCMax)),t.currentLocation&&(R.currentLocation=t.currentLocation),t.preferredLocation&&(R.preferredLocation=t.preferredLocation);const E=await M.post("/ai-analysis/resume-search",R);E.data.success?d(E.data.data):o(E.data.message||"Search failed")}catch(R){o(((C=(c=R.response)==null?void 0:c.data)==null?void 0:C.message)||"Failed to search resumes")}finally{p(!1)}},N=c=>c>=80?"text-green-400":c>=60?"text-yellow-400":c>=40?"text-orange-400":"text-red-400",b=c=>c>=80?"bg-green-500/20 border-green-500":c>=60?"bg-yellow-500/20 border-yellow-500":c>=40?"bg-orange-500/20 border-orange-500":"bg-red-500/20 border-red-500";return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Resume Search & Shortlisting"}),e.jsx("p",{className:"text-gray-400",children:"AI-powered candidate screening and matching"})]}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl border border-gray-800 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Search Criteria"}),e.jsxs("button",{onClick:()=>j(!f),className:"flex items-center gap-2 text-[#A88BFF] hover:text-[#B89CFF] transition-colors",children:[e.jsx(ls,{className:"w-4 h-4"}),f?"Hide Filters":"Show Filters",e.jsx(Bs,{className:`w-4 h-4 transition-transform ${f?"rotate-180":""}`})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Required Skills ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:n,onChange:c=>r(c.target.value),onKeyPress:c=>c.key==="Enter"&&A(n,"required"),placeholder:"Add required skill (e.g., React, Node.js)",className:"flex-1 px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"}),e.jsx("button",{onClick:()=>A(n,"required"),className:"px-4 py-2 bg-[#A88BFF] text-white rounded-lg hover:bg-[#B89CFF] transition-colors",children:e.jsx(Ae,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.requiredSkills.map(c=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-[#A88BFF]/20 text-[#A88BFF] rounded-full text-sm",children:[c,e.jsx("button",{onClick:()=>w(c,"required"),className:"hover:text-white",children:e.jsx(oe,{className:"w-3 h-3"})})]},c))}),t.requiredSkills.length===0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Common skills:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.slice(0,8).map(c=>e.jsx("button",{onClick:()=>A(c,"required"),className:"px-2 py-1 text-xs bg-[#1E1E2A] border border-gray-700 rounded text-gray-400 hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors",children:c},c))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preferred Skills (Optional)"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:s,onChange:c=>l(c.target.value),onKeyPress:c=>c.key==="Enter"&&A(s,"preferred"),placeholder:"Add preferred skill",className:"flex-1 px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"}),e.jsx("button",{onClick:()=>A(s,"preferred"),className:"px-4 py-2 bg-[#A88BFF] text-white rounded-lg hover:bg-[#B89CFF] transition-colors",children:e.jsx(Ae,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.preferredSkills.map(c=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm",children:[c,e.jsx("button",{onClick:()=>w(c,"preferred"),className:"hover:text-white",children:e.jsx(oe,{className:"w-3 h-3"})})]},c))})]}),f&&e.jsxs("div",{className:"space-y-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Minimum Experience (years)"}),e.jsx("input",{type:"number",min:"0",value:t.minimumExperience,onChange:c=>a(C=>({...C,minimumExperience:parseInt(c.target.value)||0})),className:"w-full px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Results"}),e.jsxs("select",{value:t.maxResults,onChange:c=>a(C=>({...C,maxResults:parseInt(c.target.value)})),className:"w-full px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white focus:outline-none focus:border-[#A88BFF]",children:[e.jsx("option",{value:5,children:"5 Results"}),e.jsx("option",{value:10,children:"10 Results"}),e.jsx("option",{value:20,children:"20 Results"}),e.jsx("option",{value:50,children:"50 Results"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-300 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.includeAllCandidates,onChange:c=>a(C=>({...C,includeAllCandidates:c.target.checked})),className:"w-4 h-4 text-[#A88BFF] bg-[#1E1E2A] border-gray-700 rounded focus:ring-[#A88BFF]"}),"Search all candidates"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"CTC Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current CTC Min (₹)"}),e.jsx("input",{type:"number",min:"0",value:t.currentCTCMin,onChange:c=>a(C=>({...C,currentCTCMin:c.target.value})),placeholder:"Min",className:"w-full px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current CTC Max (₹)"}),e.jsx("input",{type:"number",min:"0",value:t.currentCTCMax,onChange:c=>a(C=>({...C,currentCTCMax:c.target.value})),placeholder:"Max",className:"w-full px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expected CTC Min (₹)"}),e.jsx("input",{type:"number",min:"0",value:t.expectedCTCMin,onChange:c=>a(C=>({...C,expectedCTCMin:c.target.value})),placeholder:"Min",className:"w-full px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expected CTC Max (₹)"}),e.jsx("input",{type:"number",min:"0",value:t.expectedCTCMax,onChange:c=>a(C=>({...C,expectedCTCMax:c.target.value})),placeholder:"Max",className:"w-full px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Location Filters"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Location"}),e.jsx("input",{type:"text",value:t.currentLocation,onChange:c=>a(C=>({...C,currentLocation:c.target.value})),placeholder:"e.g., Mumbai, Bangalore, Delhi",className:"w-full px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preferred Location"}),e.jsx("input",{type:"text",value:t.preferredLocation,onChange:c=>a(C=>({...C,preferredLocation:c.target.value})),placeholder:"e.g., Mumbai, Bangalore, Delhi",className:"w-full px-4 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"})]})]})]})]}),e.jsx("button",{onClick:F,disabled:h||t.requiredSkills.length===0,className:"w-full py-3 bg-[#A88BFF] text-white rounded-lg hover:bg-[#B89CFF] disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 animate-spin"}),"Searching Candidates..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4"}),"Search & Shortlist Candidates"]})})]}),m&&e.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-400",children:m})}),i.length>0&&e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl border border-gray-800 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Shortlisted Candidates"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[i.length," candidates found"]})]}),e.jsx("div",{className:"space-y-4",children:i.map((c,C)=>e.jsxs("div",{className:"bg-[#1E1E2A] rounded-xl border border-gray-700 p-6 hover:border-[#A88BFF]/50 transition-colors",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:c.name}),e.jsx("div",{className:`px-3 py-1 rounded-full border ${b(c.score)}`,children:e.jsxs("span",{className:`text-sm font-medium ${N(c.score)}`,children:[c.score,"% Match"]})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[c.email&&e.jsx("span",{children:c.email}),c.currentCompany&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(be,{className:"w-3 h-3"}),c.currentCompany]}),c.currentDesignation&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(he,{className:"w-3 h-3"}),c.currentDesignation]}),c.experience&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"w-3 h-3"}),c.experience]})]})]})}),c.matchedSkills&&c.matchedSkills.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300 mb-2",children:"Matched Skills:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.matchedSkills.map((R,E)=>e.jsx("span",{className:"px-2 py-1 bg-[#A88BFF]/20 text-[#A88BFF] rounded text-sm",children:R},E))})]}),c.summary&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300 mb-2",children:"Why this candidate is relevant:"}),e.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:c.summary})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>v(c),className:"px-4 py-2 bg-[#A88BFF] text-white rounded-lg hover:bg-[#B89CFF] transition-colors text-sm",children:"View Details"}),e.jsx("button",{className:"px-4 py-2 bg-[#1E1E2A] border border-gray-700 text-gray-300 rounded-lg hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors text-sm",children:"Contact Candidate"})]})]},c.candidateId||C))})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-6 z-50",children:e.jsx("div",{className:"bg-[#2A2A3A] rounded-2xl border border-gray-800 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Candidate Details"}),e.jsx("button",{onClick:()=>v(null),className:"text-gray-400 hover:text-white",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:x.name}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Email:"}),e.jsx("p",{className:"text-white",children:x.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Phone:"}),e.jsx("p",{className:"text-white",children:x.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Experience:"}),e.jsx("p",{className:"text-white",children:x.experience||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Location:"}),e.jsx("p",{className:"text-white",children:x.location||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Current Company:"}),e.jsx("p",{className:"text-white",children:x.currentCompany||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Current Role:"}),e.jsx("p",{className:"text-white",children:x.currentDesignation||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-white font-medium mb-3",children:"All Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(x.allSkills||[]).map((c,C)=>e.jsx("span",{className:"px-2 py-1 bg-[#1E1E2A] border border-gray-700 rounded text-sm text-gray-300",children:c},C))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-white font-medium mb-3",children:"Matched Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.matchedSkills.map((c,C)=>e.jsx("span",{className:"px-2 py-1 bg-[#A88BFF]/20 text-[#A88BFF] rounded text-sm",children:c},C))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-white font-medium mb-3",children:"AI Summary"}),e.jsx("p",{className:"text-gray-300 leading-relaxed",children:x.summary})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-700",children:[e.jsx("button",{className:"px-4 py-2 bg-[#A88BFF] text-white rounded-lg hover:bg-[#B89CFF] transition-colors",children:"Schedule Interview"}),e.jsx("button",{className:"px-4 py-2 bg-[#1E1E2A] border border-gray-700 text-gray-300 rounded-lg hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors",children:"Send Message"}),e.jsx("button",{className:"px-4 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors",children:"Shortlist"})]})]})]})})})]})},Rl=()=>{var x,v,k,A,w,F,N,b,c,C,R,E,g,P,O;const[t,a]=u.useState(null),[n,r]=u.useState(!1),[s,l]=u.useState(null),[i,d]=u.useState(!1),[h,p]=u.useState(!1),m=Q=>{const H=Q.target.files[0];if(H){if(!["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"].includes(H.type)){T.error("Please select a PDF, DOC, or DOCX file");return}if(H.size>10*1024*1024){T.error("File size must be less than 10MB");return}a(H)}},o=async()=>{var H,te,J,W,K,L;if(!t){T.error("Please select a resume file first");return}r(!0);const Q=new FormData;Q.append("resume",t);try{const _=await M.post("/candidates/upload-resume",Q,{headers:{"Content-Type":"multipart/form-data"},timeout:3e5});_.data.success?(l(_.data.data),d(!0),((H=_.data.data.metadata)==null?void 0:H.source)==="reducto"?T.success("Resume parsed successfully with AI!"):((te=_.data.data.metadata)==null?void 0:te.source)==="local-parser"?T.success("Resume parsed with local parser!"):T.success("Resume uploaded successfully!")):(console.log("Resume parsing failed, showing manual entry form:",_.data),l({extractedData:_.data.data||{firstName:"",lastName:"",email:"",phone:"",appliedFor:"",currentLocation:"",preferredLocation:"",source:"",experienceYears:null,experienceMonths:null,currentCompany:"",currentDesignation:"",currentCTC:null,expectedCTC:null,noticePeriod:"",skills:[],stage:null,notes:_.data.message||"Resume parsing failed. Please enter details manually."},rawText:_.data.rawText||"",confidence:_.data.confidence||{},metadata:_.data.metadata||{}}),d(!0),((W=(J=_.data.data)==null?void 0:J.metadata)==null?void 0:W.source)==="local-parser"?T.error("AI parsing unavailable, but local parsing worked!"):T.error(_.data.message||"Parsing failed, but you can enter details manually"))}catch(_){console.error("Upload error:",_),T.error(((L=(K=_.response)==null?void 0:K.data)==null?void 0:L.message)||"Failed to upload resume")}finally{r(!1)}},f=async()=>{var Q,H,te,J,W,K;if(!(s!=null&&s.extractedData)){T.error("No data to save");return}p(!0);try{const L=s.extractedData||{},_={firstName:L.firstName||null,lastName:L.lastName||null,email:L.email||null,phone:L.phone||null,alternatePhone:L.alternatePhone||null,appliedFor:L.appliedFor||null,appliedForTitle:L.appliedFor||null,currentLocation:L.currentLocation||null,preferredLocation:Array.isArray(L.preferredLocation)?L.preferredLocation:[],source:L.source||"other",experience:{years:L.experienceYears?parseInt(L.experienceYears):0,months:L.experienceMonths?parseInt(L.experienceMonths):0},currentCompany:L.currentCompany||null,currentDesignation:L.currentDesignation||null,currentCTC:L.currentCTC?parseFloat(L.currentCTC):null,expectedCTC:L.expectedCTC?parseFloat(L.expectedCTC):null,noticePeriod:L.noticePeriod||null,skills:Array.isArray(L.skills)?L.skills:[],notes:L.notes||null,stage:"applied",status:"active",resumeParsing:{rawText:s.rawText,confidence:s.confidence,parsedAt:new Date,parserVersion:((Q=s.metadata)==null?void 0:Q.version)||"1.0",parsingSource:(H=s.metadata)!=null&&H.fallback?"manual":"reducto",parsingMetadata:{fileName:t==null?void 0:t.name,fileSize:t==null?void 0:t.size,mimeType:t==null?void 0:t.type,fallback:((te=s.metadata)==null?void 0:te.fallback)||!1,error:(J=s.metadata)==null?void 0:J.error}}};console.log("Sending candidate data to save:",_);const Y=await M.post("/candidates",_);Y.data.success?(T.success("Candidate saved successfully!"),a(null),l(null),d(!1)):T.error(Y.data.message||"Failed to save candidate")}catch(L){console.error("Save error:",L),T.error(((K=(W=L.response)==null?void 0:W.data)==null?void 0:K.message)||"Failed to save candidate")}finally{p(!1)}},j=(Q,H,te,J=null)=>{const W=H&&H!==""&&H!==null,K=J>=.8?"text-green-600":J>=.6?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:te}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:Q}),e.jsx("div",{className:"text-sm text-gray-900",children:W?H:e.jsx("span",{className:"text-gray-400 italic",children:"Not found"})})]}),J!==null&&e.jsxs("div",{className:`text-xs font-medium ${K}`,children:[Math.round(J*100),"% confident"]})]})};return e.jsx("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(ve,{className:"w-6 h-6 mr-2 text-blue-600"}),"Resume Parser"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Upload a resume to automatically extract candidate information using AI"})]}),e.jsx("div",{className:"p-6",children:i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Extracted Information"}),((x=s==null?void 0:s.metadata)==null?void 0:x.source)==="local-parser"&&e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"🔄 Using local parser - limited AI capabilities"}),((v=s==null?void 0:s.metadata)==null?void 0:v.source)==="manual-entry"&&e.jsx("p",{className:"text-sm text-orange-600 mt-1",children:"⚠️ All parsing failed - please enter details manually"}),((k=s==null?void 0:s.metadata)==null?void 0:k.source)==="reducto"&&!((A=s==null?void 0:s.metadata)!=null&&A.fallback)&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"✅ AI parsing successful"})]}),e.jsx("button",{onClick:()=>d(!1),className:"text-sm text-gray-600 hover:text-gray-900",children:"← Back to upload"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[j("Full Name",`${s.extractedData.firstName||""} ${s.extractedData.lastName||""}`.trim()||null,e.jsx(Ze,{className:"w-5 h-5 text-blue-600"}),((w=s.confidence)==null?void 0:w.firstName)||null),j("Email",s.extractedData.email,e.jsx(Se,{className:"w-5 h-5 text-green-600"}),((F=s.confidence)==null?void 0:F.email)||null),j("Phone",s.extractedData.phone,e.jsx($e,{className:"w-5 h-5 text-purple-600"}),((N=s.confidence)==null?void 0:N.phone)||null),j("Location",s.extractedData.currentLocation,e.jsx(ns,{className:"w-5 h-5 text-orange-600"}),((b=s.confidence)==null?void 0:b.currentLocation)||null),j("Job Title",s.extractedData.appliedFor,e.jsx(be,{className:"w-5 h-5 text-indigo-600"}),((c=s.confidence)==null?void 0:c.appliedFor)||null),j("Current Company",s.extractedData.currentCompany,e.jsx(be,{className:"w-5 h-5 text-teal-600"}),((C=s.confidence)==null?void 0:C.currentCompany)||null),j("Experience",s.extractedData.experienceYears?`${s.extractedData.experienceYears} years${s.extractedData.experienceMonths?` ${s.extractedData.experienceMonths} months`:""}`:null,e.jsx(fe,{className:"w-5 h-5 text-red-600"}),((R=s.confidence)==null?void 0:R.experienceYears)||null),j("Skills",(E=s.extractedData.skills)==null?void 0:E.join(", "),e.jsx(Za,{className:"w-5 h-5 text-pink-600"}),((g=s.confidence)==null?void 0:g.skills)||null),j("Current CTC",s.extractedData.currentCTC?`₹${s.extractedData.currentCTC.toLocaleString()}`:null,e.jsx(yt,{className:"w-5 h-5 text-yellow-600"}),((P=s.confidence)==null?void 0:P.currentCTC)||null),j("Expected CTC",s.extractedData.expectedCTC?`₹${s.extractedData.expectedCTC.toLocaleString()}`:null,e.jsx(yt,{className:"w-5 h-5 text-emerald-600"}),((O=s.confidence)==null?void 0:O.expectedCTC)||null)]}),s.rawText&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"text-md font-medium text-gray-900 flex items-center",children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),"Extracted Text Preview"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.rawText.length," characters"]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-40 overflow-y-auto",children:e.jsxs("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:[s.rawText.substring(0,500),"..."]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:f,disabled:h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Save Candidate"]})})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx("input",{type:"file",onChange:m,accept:".pdf,.doc,.docx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/msword",className:"hidden",id:"resume-upload"}),e.jsxs("label",{htmlFor:"resume-upload",className:"cursor-pointer",children:[e.jsx(Je,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:t?t.name:"Choose a resume file"}),e.jsx("div",{className:"text-sm text-gray-500 mb-4",children:"PDF, DOC, or DOCX up to 10MB"}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",onClick:()=>document.getElementById("resume-upload").click(),children:"Select File"})]})]}),t&&e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:o,disabled:n,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Extracting candidate details... (this may take a few minutes)"]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Parse Resume"]})})})]})})]})})},Pl=()=>{var ie,me,Be;const[t,a]=u.useState([]),[n,r]=u.useState([]),[s,l]=u.useState(!1),[i,d]=u.useState(""),[h,p]=u.useState(1),[m,o]=u.useState(1),[f,j]=u.useState(0),[x,v]=u.useState(""),[k,A]=u.useState(!1),[w,F]=u.useState(!1),[N,b]=u.useState(!1),[c,C]=u.useState(null),[R,E]=u.useState(null),[g,P]=u.useState(null),[O,Q]=u.useState(!1),[H,te]=u.useState(!1),[J,W]=u.useState(null),[K,L]=u.useState({status:"active",processingStatus:"",minExperience:"",maxExperience:""}),[_,Y]=u.useState({name:"",email:"",phone:"",rawText:"",tags:""}),[se,D]=u.useState({file:null,name:"",email:"",phone:"",tags:""}),[X,Z]=u.useState(!1),re=20,ae=(y={})=>{var $,U,V,ce,ue;return{id:y._id,type:"resume",name:y.name||"Unnamed Candidate",email:y.email||"",phone:y.phone||"",experience:{years:((U=($=y.parsedData)==null?void 0:$.experience)==null?void 0:U.years)??y.experienceYears??null,months:((ce=(V=y.parsedData)==null?void 0:V.experience)==null?void 0:ce.months)??y.experienceMonths??null},skills:((ue=y.parsedData)==null?void 0:ue.skills)||[],statusLabel:y.processingStatus||"pending",statusType:"processing",tags:y.tags||[],source:y.fileName||"Resume Upload",rawText:y.rawText||"",createdAt:y.createdAt||y.updatedAt,appliedRole:null,stage:null,relevanceScore:y.relevanceScore||null,matchedSkills:y.matchedSkills||[],matchReason:y.matchReason||null,original:y}},Ne=(y={})=>{var $,U,V,ce,ue,pe;return{id:y._id,type:"candidate",name:`${y.firstName||""} ${y.lastName||""}`.trim()||"Unnamed Candidate",email:y.email||"",phone:y.phone||"",experience:{years:(($=y.experience)==null?void 0:$.years)??null,months:((U=y.experience)==null?void 0:U.months)??null},skills:Array.isArray(y.skills)?y.skills:[],statusLabel:y.stage||y.status||"applied",statusType:"stage",tags:[y.source,(V=y.appliedFor)==null?void 0:V.title].filter(Boolean),source:(ce=y.appliedFor)!=null&&ce.title?`Applied for ${y.appliedFor.title}`:"Job Applicant",rawText:"",createdAt:y.createdAt,appliedRole:((ue=y.appliedFor)==null?void 0:ue.title)||"",stage:y.stage||"",resumeUrl:(pe=y.resume)==null?void 0:pe.url,original:y}},ne=(y,$=1)=>{const U=y.length,V=Math.max(1,Math.ceil(U/re)),ce=Math.min(Math.max($,1),V),ue=(ce-1)*re;r(y.slice(ue,ue+re)),p(ce),o(V),j(U)},ge=async(y={})=>{var U,V,ce,ue;l(!0),d("");const $=y.page||1;try{const pe={page:1,limit:re,status:K.status};K.processingStatus&&(pe.processingStatus=K.processingStatus),K.minExperience&&(pe.minExperience=K.minExperience),K.maxExperience&&(pe.maxExperience=K.maxExperience);const pt=x.trim()?M.post("/resume-pool/search",{query:x.trim(),page:1,limit:re,filters:{}}):M.get("/resume-pool",{params:pe}),ct={};x.trim()&&(ct.search=x.trim());const[At,Ft]=await Promise.all([pt,M.get("/candidates",{params:ct})]),Sa=Array.isArray((U=At==null?void 0:At.data)==null?void 0:U.data)?At.data.data:[],Aa=Array.isArray((V=Ft==null?void 0:Ft.data)==null?void 0:V.data)?Ft.data.data:[],Fa=Sa.map(ae),ms=[...Aa.map(Ne),...Fa].sort((Ge,Ke)=>{if(Ge.relevanceScore!==null&&Ge.relevanceScore!==void 0&&Ke.relevanceScore!==null&&Ke.relevanceScore!==void 0)return Ke.relevanceScore-Ge.relevanceScore;if(Ge.relevanceScore!==null&&Ge.relevanceScore!==void 0)return-1;if(Ke.relevanceScore!==null&&Ke.relevanceScore!==void 0)return 1;const Ea=Ge.createdAt?new Date(Ge.createdAt).getTime():0;return(Ke.createdAt?new Date(Ke.createdAt).getTime():0)-Ea});a(ms),ne(ms,$)}catch(pe){d(((ue=(ce=pe.response)==null?void 0:ce.data)==null?void 0:ue.message)||"Failed to load candidate pool")}finally{l(!1)}};u.useEffect(()=>{ge({page:1})},[]);const Re=()=>{ge({page:1})},Me=(y,$)=>{L(U=>({...U,[y]:$})),setTimeout(()=>ge({page:1}),0)},Ve=y=>{y<1||y>m||ne(t,y)},rt=()=>{Y({name:"",email:"",phone:"",rawText:"",tags:""}),A(!0)},nt=()=>{D({file:null,name:"",email:"",phone:"",tags:""}),F(!0)},lt=async()=>{var y,$;if(!(!_.name.trim()||!_.rawText.trim())){Z(!0),d("");try{const U={name:_.name.trim(),email:_.email.trim()||void 0,phone:_.phone.trim()||void 0,rawText:_.rawText,tags:_.tags?_.tags.split(",").map(ce=>ce.trim()).filter(Boolean):[]},V=await M.post("/resume-pool/text",U);V.data.success?(A(!1),await fetchResumes({page:1})):d(V.data.message||"Failed to add resume")}catch(U){d((($=(y=U.response)==null?void 0:y.data)==null?void 0:$.message)||"Failed to add resume")}finally{Z(!1)}}},Pe=async()=>{var y,$;if(se.file){Z(!0),d("");try{const U=new FormData;U.append("resume",se.file),se.name&&U.append("name",se.name),se.email&&U.append("email",se.email),se.phone&&U.append("phone",se.phone),se.tags&&U.append("tags",se.tags);const V=await M.post("/resume-pool/file",U,{headers:{"Content-Type":"multipart/form-data"}});V.data.success?(F(!1),await fetchResumes({page:1})):d(V.data.message||"Failed to upload resume file")}catch(U){d((($=(y=U.response)==null?void 0:y.data)==null?void 0:$.message)||"Failed to upload resume file")}finally{Z(!1)}}},We=y=>{var V,ce,ue,pe;if(!y)return"N/A";if(y.type==="candidate"){const pt=((V=y.experience)==null?void 0:V.years)||0,ct=((ce=y.experience)==null?void 0:ce.months)||0;return!pt&&!ct?"N/A":ct?`${pt} yrs ${ct} mo`:`${pt} yrs`}const $=((ue=y.experience)==null?void 0:ue.years)||0,U=((pe=y.experience)==null?void 0:pe.months)||0;return!$&&!U?"N/A":U?`${$} yrs ${U} mo`:`${$} yrs`},it=y=>{if(!y)return"text-gray-400 border-gray-700";if(y.type==="candidate")switch(y.statusLabel){case"shortlisted":case"interview-scheduled":return"border-green-500/50 text-green-300 bg-green-500/10";case"offer-extended":case"offer-accepted":return"border-blue-500/50 text-blue-300 bg-blue-500/10";case"rejected":return"border-red-500/50 text-red-300 bg-red-500/10";default:return"border-[#A88BFF]/50 text-[#C7B6FF] bg-[#A88BFF]/10"}switch(y.statusLabel){case"completed":return"border-green-500/50 text-green-300 bg-green-500/10";case"failed":return"border-red-500/50 text-red-300 bg-red-500/10";case"processing":return"border-blue-500/50 text-blue-300 bg-blue-500/10";default:return"border-[#A88BFF]/50 text-[#C7B6FF] bg-[#A88BFF]/10"}},Ue=y=>{if(!y)return[];if(y.type==="candidate"){const $=y.tags||[];return $.length?$:["Job Applicant"]}return y.tags||[]},ot=y=>{C(y)},I=()=>{C(null)},z=y=>{const $=y.target.files[0];if($){const U=$.name.split(".").pop().toLowerCase();if(!["xlsx","xls","csv"].includes(U)){d("Please upload Excel (.xlsx, .xls) or CSV file");return}E($),P(null),W(null)}},B=async()=>{var y,$,U,V,ce;if(!R){d("Please select a file");return}Q(!0),d("");try{const ue=new FormData;ue.append("file",R);const pe=await M.post("/candidates/bulk/validate",ue,{headers:{"Content-Type":"multipart/form-data"}});pe.data.success?(console.log("Validation result received:",pe.data.data),console.log("Validated data sample:",(y=pe.data.data.validatedData)==null?void 0:y.slice(0,2)),P(pe.data.data),T.success(`Validation complete: ${pe.data.data.validRows} valid rows`)):d(pe.data.message||"Validation failed")}catch(ue){d(((U=($=ue.response)==null?void 0:$.data)==null?void 0:U.message)||"Failed to validate file"),(ce=(V=ue.response)==null?void 0:V.data)!=null&&ce.errors&&console.error("Validation errors:",ue.response.data.errors)}finally{Q(!1)}},q=async()=>{var y,$,U;if(!g||!g.validatedData||g.validatedData.length===0){d("No validated data to import");return}te(!0),d("");try{console.log("Sending import request with validatedData:",(y=g.validatedData)==null?void 0:y.slice(0,2));const V=await M.post("/candidates/bulk/import",{validatedData:g.validatedData,jobMapping:{}});V.data.success?(W(V.data.data),T.success(`Import complete: ${V.data.data.success.length} imported`),b(!1),E(null),P(null),await ge({page:1})):d(V.data.message||"Import failed")}catch(V){d(((U=($=V.response)==null?void 0:$.data)==null?void 0:U.message)||"Failed to import candidates")}finally{te(!1)}},G=async()=>{var y,$;try{const U=await M.get("/candidates/bulk/template",{responseType:"blob"}),V=window.URL.createObjectURL(new Blob([U.data])),ce=document.createElement("a");ce.href=V,ce.setAttribute("download","candidate_bulk_upload_template.xlsx"),document.body.appendChild(ce),ce.click(),ce.remove(),window.URL.revokeObjectURL(V),T.success("Template downloaded successfully")}catch(U){d((($=(y=U.response)==null?void 0:y.data)==null?void 0:$.message)||"Failed to download template")}};return e.jsxs("div",{className:"min-h-screen bg-[#1E1E2A] p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx(he,{className:"w-7 h-7 text-[#A88BFF]"}),"Candidate Pool"]}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Unified view of all applicants and uploaded resumes across roles and sources."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:rt,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-[#A88BFF] text-white text-sm font-medium hover:bg-[#B89CFF] transition-colors",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Add Raw Text"]}),e.jsxs("button",{onClick:nt,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-[#1E1E2A] border border-gray-700 text-gray-200 text-sm font-medium hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors",children:[e.jsx(ht,{className:"w-4 h-4"}),"Upload Resume File"]}),e.jsxs("button",{onClick:()=>b(!0),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-[#1E1E2A] border border-gray-700 text-gray-200 text-sm font-medium hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors",children:[e.jsx(us,{className:"w-4 h-4"}),"Bulk Upload"]})]})]}),e.jsx("div",{className:"bg-[#2A2A3A] rounded-2xl border border-gray-800 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fe,{className:"w-4 h-4 text-gray-500 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search by name, skills, text...",value:x,onChange:y=>v(y.target.value),onKeyDown:y=>y.key==="Enter"&&Re(),className:"w-full pl-9 pr-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"})]}),e.jsxs("button",{onClick:Re,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-[#A88BFF] text-white text-sm font-medium hover:bg-[#B89CFF] transition-colors",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Search"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[e.jsx(ls,{className:"w-3 h-3"}),"Filters"]}),e.jsxs("select",{value:K.processingStatus,onChange:y=>Me("processingStatus",y.target.value),className:"px-3 py-1.5 bg-[#1E1E2A] border border-gray-700 rounded-lg text-xs text-gray-200 focus:outline-none focus:border-[#A88BFF]",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsx("input",{type:"number",placeholder:"Min Exp",value:K.minExperience,onChange:y=>Me("minExperience",y.target.value),className:"w-20 px-2 py-1.5 bg-[#1E1E2A] border border-gray-700 rounded-lg text-xs text-gray-200 placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"}),e.jsx("input",{type:"number",placeholder:"Max Exp",value:K.maxExperience,onChange:y=>Me("maxExperience",y.target.value),className:"w-20 px-2 py-1.5 bg-[#1E1E2A] border border-gray-700 rounded-lg text-xs text-gray-200 placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]"})]})]})}),i&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/40 text-red-300 text-sm rounded-xl px-4 py-3 mb-4",children:i}),e.jsxs("div",{className:"bg-[#2A2A3A] rounded-2xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[e.jsx(he,{className:"w-4 h-4 text-[#A88BFF]"}),e.jsx("span",{children:"Candidate Pool"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",n.length," shown of ",f,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(ye,{className:"w-3 h-3"}),"Recruiting + AI parsed resumes, combined automatically"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#232334] text-xs uppercase text-gray-400",children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Contact"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Experience"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Key Skills"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Source"}),e.jsx("th",{className:"px-4 py-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10 text-center text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5 animate-spin text-[#A88BFF]"}),e.jsx("span",{children:"Loading candidate pool..."})]})})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10 text-center text-gray-500 text-sm",children:"No candidates found yet. Adjust filters or add resumes manually."})}):n.map(y=>e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-[#1E1E2A]/60 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-white font-medium flex items-center gap-2",children:[y.name,y.type==="candidate"&&e.jsx("span",{className:"px-2 py-0.5 text-[10px] rounded-full bg-blue-500/10 text-blue-300 border border-blue-500/30",children:"Applicant"}),y.type==="resume"&&e.jsx("span",{className:"px-2 py-0.5 text-[10px] rounded-full bg-purple-500/10 text-purple-300 border border-purple-500/30",children:"Resume"}),y.relevanceScore!==null&&y.relevanceScore!==void 0&&e.jsxs("span",{className:`px-2 py-0.5 text-[10px] rounded-full font-medium ${y.relevanceScore>=80?"bg-green-500/20 text-green-300 border border-green-500/30":y.relevanceScore>=60?"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30":"bg-gray-500/20 text-gray-300 border border-gray-500/30"}`,children:[y.relevanceScore,"% match"]})]}),y.appliedRole&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Applied for: ",y.appliedRole]}),y.source&&y.type==="resume"&&e.jsx("span",{className:"text-xs text-gray-500",children:y.source}),y.matchReason&&e.jsx("span",{className:"text-xs text-green-400 mt-1",title:y.matchReason,children:y.matchReason.length>60?y.matchReason.substring(0,60)+"...":y.matchReason})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col text-xs text-gray-300",children:[y.email&&e.jsx("span",{children:y.email}),y.phone&&e.jsx("span",{className:"text-gray-500",children:y.phone})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-xs text-gray-300",children:We(y)})}),e.jsx("td",{className:"px-4 py-3 max-w-xs",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[(y.skills||[]).slice(0,5).map(($,U)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-[#1E1E2A] border border-gray-700 text-[11px] text-gray-200",children:$},U)),(y.skills||[]).length>5&&e.jsxs("span",{className:"text-[11px] text-gray-500",children:["+",y.skills.length-5," more"]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full border text-[11px] ${it(y)}`,children:y.statusLabel||"pending"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:Ue(y).slice(0,3).map(($,U)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-[#1E1E2A] border border-gray-700 text-[11px] text-gray-400",children:$},U))})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("button",{onClick:()=>ot(y),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg bg-[#1E1E2A] border border-gray-700 text-xs text-gray-200 hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors",children:[e.jsx(ve,{className:"w-3 h-3"}),"View"]})})]},y.id))})]})}),m>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-800 text-xs text-gray-400",children:[e.jsxs("span",{children:["Page ",h," of ",m]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Ve(h-1),disabled:h===1,className:"px-2 py-1 rounded border border-gray-700 disabled:opacity-40 disabled:cursor-not-allowed hover:border-[#A88BFF] hover:text-[#A88BFF]",children:"Prev"}),e.jsx("button",{onClick:()=>Ve(h+1),disabled:h===m,className:"px-2 py-1 rounded border border-gray-700 disabled:opacity-40 disabled:cursor-not-allowed hover:border-[#A88BFF] hover:text-[#A88BFF]",children:"Next"})]})]})]}),k&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"w-full max-w-3xl bg-[#2A2A3A] border border-gray-800 rounded-2xl shadow-xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-[#A88BFF]"}),"Add Resume (Raw Text)"]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Paste full resume text. We will auto-parse skills and experience."})]}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-white",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-5 py-4 space-y-4 overflow-y-auto max-h-[70vh]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:["Candidate Name ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:_.name,onChange:y=>Y($=>({...$,name:y.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]",placeholder:"e.g. Sarah Chen"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:_.email,onChange:y=>Y($=>({...$,email:y.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]",placeholder:"candidate@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:"Phone"}),e.jsx("input",{type:"text",value:_.phone,onChange:y=>Y($=>({...$,phone:y.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]",placeholder:"+91 98765 43210"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:"Tags (comma separated)"}),e.jsx("input",{type:"text",value:_.tags,onChange:y=>Y($=>({...$,tags:y.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]",placeholder:"e.g. Java, Backend, 6 years"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:["Resume Text ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{rows:10,value:_.rawText,onChange:y=>Y($=>({...$,rawText:y.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF] resize-none",placeholder:"Paste full resume content here..."})]})]}),e.jsxs("div",{className:"px-5 py-4 border-t border-gray-800 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Tip: You can copy-paste from PDF or Word. The system will auto-extract skills & experience."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 rounded-lg border border-gray-700 text-xs text-gray-300 hover:border-gray-500 hover:text-white",children:"Cancel"}),e.jsx("button",{onClick:lt,disabled:X||!_.name.trim()||!_.rawText.trim(),className:"px-4 py-2 rounded-lg bg-[#A88BFF] text-xs text-white font-medium hover:bg-[#B89CFF] disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:X?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-3 h-3"}),"Add to Pool"]})})]})]})]})}),w&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"w-full max-w-xl bg-[#2A2A3A] border border-gray-800 rounded-2xl shadow-xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-white flex items-сenter gap-2",children:[e.jsx(ht,{className:"w-4 h-4 text-[#A88BFF]"}),"Upload Resume File"]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Upload PDF or DOCX files. We will parse them automatically."})]}),e.jsx("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-white",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"px-5 py-4 space-y-4 overflow-y-auto max-h-[70vh]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:"Candidate Name (optional)"}),e.jsx("input",{type:"text",value:se.name,onChange:y=>D($=>({...$,name:y.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]",placeholder:"If empty, system will try to detect"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:"Tags (comma separated)"}),e.jsx("input",{type:"text",value:se.tags,onChange:y=>D($=>({...$,tags:y.target.value})),className:"w-full px-3 py-2 bg-[#1E1E2A] border border-gray-700 rounded-lg text-sm text-white placeholder-gray-500 focus:outline-none focus:border-[#A88BFF]",placeholder:"e.g. Backend, Senior, React"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-300 mb-2",children:["Resume File ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("label",{className:"flex flex-col items-center justify-center gap-2 px-4 py-8 border-2 border-dashed border-gray-700 rounded-xl bg-[#1E1E2A] text-gray-400 cursor-pointer hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors text-center text-xs",children:[e.jsx(ht,{className:"w-5 h-5"}),se.file?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-200 text-sm",children:se.file.name}),e.jsx("span",{children:"Click to change file"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-200 text-sm",children:"Click to upload PDF or DOCX"}),e.jsx("span",{children:"Max 10MB per file"})]}),e.jsx("input",{type:"file",className:"hidden",accept:"application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:y=>{var U;const $=(U=y.target.files)==null?void 0:U[0];$&&D(V=>({...V,file:$}))}})]})]})]}),e.jsxs("div",{className:"px-5 py-4 border-t border-gray-800 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Files are stored in the resume pool and auto-parsed for skills & experience."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 rounded-lg border border-gray-700 text-xs text-gray-300 hover:border-gray-500 hover:text-white",children:"Cancel"}),e.jsx("button",{onClick:Pe,disabled:X||!se.file,className:"px-4 py-2 rounded-lg bg-[#A88BFF] text-xs text-white font-medium hover:bg-[#B89CFF] disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:X?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ht,{className:"w-3 h-3"}),"Upload"]})})]})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"w-full max-w-4xl bg-[#2A2A3A] border border-gray-800 rounded-2xl shadow-xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4 text-[#A88BFF]"}),c.name]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:c.type==="candidate"?c.appliedRole?`Job Applicant • Applied for ${c.appliedRole}`:"Job Applicant":c.source||"Resume Pool"})]}),e.jsx("button",{onClick:I,className:"text-gray-400 hover:text-white",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 px-5 py-4 overflow-y-auto max-h-[70vh]",children:[e.jsxs("div",{className:"space-y-4 lg:col-span-1",children:[e.jsxs("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-xl p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Basic Info"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-300",children:[c.email&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Email: "}),e.jsx("span",{children:c.email})]}),c.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Phone: "}),e.jsx("span",{children:c.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Experience: "}),e.jsx("span",{children:We(c)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Status: "}),e.jsx("span",{className:"capitalize",children:c.statusLabel||"pending"})]}),Ue(c).length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Tags: "}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:Ue(c).map((y,$)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-[#1E1E2A] border border-gray-700 text-[11px] text-gray-300",children:y},$))})]})]})]}),e.jsxs("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-xl p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Skills"}),e.jsxs("div",{className:"flex flex-wrap gap-1 text-xs",children:[(c.skills||[]).map((y,$)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-[#232334] text-gray-200 border border-gray-700",children:y},$)),(!c.skills||c.skills.length===0)&&e.jsx("span",{className:"text-gray-500",children:"No parsed skills available."})]})]}),c.type==="resume"&&((ie=c.original)==null?void 0:ie.aiAnalysis)&&e.jsxs("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-xl p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"AI Insights"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-300",children:[c.original.aiAnalysis.overallFit&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Overall Fit: "}),e.jsx("span",{className:"capitalize",children:c.original.aiAnalysis.overallFit})]}),c.original.aiAnalysis.keyHighlights&&c.original.aiAnalysis.keyHighlights.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Highlights:"}),e.jsx("ul",{className:"mt-1 list-disc list-inside space-y-1",children:c.original.aiAnalysis.keyHighlights.map((y,$)=>e.jsx("li",{children:y},$))})]})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:c.type==="resume"?e.jsxs("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-xl p-4 h-full flex flex-col",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4 text-[#A88BFF]"}),"Raw Resume Text"]}),e.jsx("div",{className:"flex-1 overflow-y-auto rounded-lg bg-[#11111C] border border-gray-900 p-3 text-xs text-gray-300 whitespace-pre-wrap leading-relaxed",children:c.rawText||"No raw text available."})]}):e.jsxs("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-xl p-4 h-full flex flex-col",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4 text-[#A88BFF]"}),"Candidate Overview"]}),e.jsxs("div",{className:"flex-1 overflow-y-auto rounded-lg bg-[#11111C] border border-gray-900 p-3 text-xs text-gray-300 space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block mb-1",children:"Stage"}),e.jsx("span",{className:"capitalize",children:c.stage||c.statusLabel||"applied"})]}),((me=c.original)==null?void 0:me.professionalExperience)&&c.original.professionalExperience.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block mb-1",children:"Experience Highlights"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:c.original.professionalExperience.slice(0,5).map((y,$)=>e.jsxs("li",{children:[e.jsxs("span",{className:"text-white",children:[y.designation||"Role"," @ ",y.company||"Company"]}),y.startDate&&e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",new Date(y.startDate).toLocaleDateString()," - ",y.currentlyWorking?"Present":y.endDate?new Date(y.endDate).toLocaleDateString():"Unknown",")"]})]},$))})]}),((Be=c.original)==null?void 0:Be.timeline)&&c.original.timeline.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block mb-1",children:"Recent Timeline"}),e.jsx("ul",{className:"space-y-1",children:c.original.timeline.slice(-4).reverse().map((y,$)=>e.jsxs("li",{className:"text-gray-300",children:[e.jsx("span",{className:"text-white",children:y.action}),e.jsx("span",{className:"ml-2 text-gray-500 text-[11px]",children:new Date(y.timestamp).toLocaleString()}),y.description&&e.jsx("div",{className:"text-gray-400 text-[11px]",children:y.description})]},$))})]})]})]})})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"w-full max-w-4xl bg-[#2A2A3A] border border-gray-800 rounded-2xl shadow-xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(us,{className:"w-5 h-5 text-[#A88BFF]"}),"Bulk Upload Candidates"]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Upload Excel or CSV file with candidate data"})]}),e.jsx("button",{onClick:()=>{b(!1),E(null),P(null),W(null),d("")},className:"text-gray-400 hover:text-white",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-5 overflow-y-auto max-h-[70vh]",children:[!g&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Step 1: Upload File"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Upload your Excel or CSV file"})]}),e.jsxs("button",{onClick:G,className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg bg-[#1E1E2A] border border-gray-700 text-gray-200 text-xs font-medium hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors",children:[e.jsx(Js,{className:"w-3 h-3"}),"Download Template"]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-700 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:z,className:"hidden",id:"bulk-upload-file"}),e.jsxs("label",{htmlFor:"bulk-upload-file",className:"cursor-pointer flex flex-col items-center gap-2",children:[e.jsx(ht,{className:"w-8 h-8 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-300",children:R?R.name:"Click to select file or drag and drop"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Excel (.xlsx, .xls) or CSV files only"})]})]}),R&&e.jsx("button",{onClick:B,disabled:O,className:"w-full px-4 py-2 rounded-lg bg-[#A88BFF] text-white text-sm font-medium hover:bg-[#B89CFF] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:O?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 animate-spin"}),"Validating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"w-4 h-4"}),"Validate File"]})})]}),g&&!J&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Step 2: Validation Results"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Review validation results before importing"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-[#1E1E2A] border border-gray-800 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Total Rows"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:g.totalRows})]}),e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-green-400 mb-1",children:"Valid Rows"}),e.jsx("div",{className:"text-lg font-semibold text-green-300",children:g.validRows})]}),e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-red-400 mb-1",children:"Invalid Rows"}),e.jsx("div",{className:"text-lg font-semibold text-red-300",children:g.invalidRows})]})]}),g.errors&&g.errors.length>0&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(we,{className:"w-4 h-4 text-red-400"}),e.jsx("h4",{className:"text-sm font-semibold text-red-300",children:"Errors"})]}),e.jsxs("div",{className:"max-h-32 overflow-y-auto text-xs text-red-200 space-y-1",children:[g.errors.slice(0,10).map((y,$)=>e.jsx("div",{children:y},$)),g.errors.length>10&&e.jsxs("div",{className:"text-red-400",children:["... and ",g.errors.length-10," more errors"]})]})]}),g.warnings&&g.warnings.length>0&&e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(we,{className:"w-4 h-4 text-yellow-400"}),e.jsx("h4",{className:"text-sm font-semibold text-yellow-300",children:"Warnings"})]}),e.jsxs("div",{className:"max-h-32 overflow-y-auto text-xs text-yellow-200 space-y-1",children:[g.warnings.slice(0,10).map((y,$)=>e.jsx("div",{children:y},$)),g.warnings.length>10&&e.jsxs("div",{className:"text-yellow-400",children:["... and ",g.warnings.length-10," more warnings"]})]})]}),g.validRows>0&&e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:q,disabled:H,className:"flex-1 px-4 py-2 rounded-lg bg-[#A88BFF] text-white text-sm font-medium hover:bg-[#B89CFF] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:H?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"w-4 h-4"}),"Import ",g.validRows," Candidates"]})}),e.jsx("button",{onClick:()=>{P(null),E(null)},className:"px-4 py-2 rounded-lg bg-[#1E1E2A] border border-gray-700 text-gray-200 text-sm font-medium hover:border-[#A88BFF] hover:text-[#A88BFF] transition-colors",children:"Cancel"})]})]}),J&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Import Complete"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Review import results"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-green-400 mb-1",children:"Imported"}),e.jsx("div",{className:"text-lg font-semibold text-green-300",children:J.success.length})]}),e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-red-400 mb-1",children:"Failed"}),e.jsx("div",{className:"text-lg font-semibold text-red-300",children:J.failed.length})]}),e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-yellow-400 mb-1",children:"Duplicates"}),e.jsx("div",{className:"text-lg font-semibold text-yellow-300",children:J.duplicates.length})]})]}),e.jsx("button",{onClick:()=>{b(!1),E(null),P(null),W(null)},className:"w-full px-4 py-2 rounded-lg bg-[#A88BFF] text-white text-sm font-medium hover:bg-[#B89CFF] transition-colors",children:"Close"})]}),i&&e.jsx("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-sm text-red-300",children:i})]})]})})]})};function Ll(){return e.jsx(Mn,{children:e.jsx($n,{children:e.jsxs(Ra,{children:[e.jsx(er,{position:"top-right",toastOptions:{duration:5e3,style:{background:"#1e293b",color:"#f1f5f9",border:"1px solid #334155"},success:{iconTheme:{primary:"#10b981",secondary:"#f1f5f9"}},error:{iconTheme:{primary:"#ef4444",secondary:"#f1f5f9"}}}}),e.jsxs(Pa,{children:[e.jsx(de,{path:"/login",element:e.jsx(Gn,{})}),e.jsx(de,{path:"/login/company-select",element:e.jsx(Kn,{})}),e.jsx(de,{path:"/login/spc-management",element:e.jsx(rl,{})}),e.jsx(de,{path:"/login/:companySlug",element:e.jsx(sl,{})}),e.jsx(de,{path:"/careers",element:e.jsx(Rs,{})}),e.jsx(de,{path:"/jobs",element:e.jsx(Rs,{})}),e.jsx(de,{path:"/candidate-documents",element:e.jsx(il,{})}),e.jsx(de,{path:"/public/upload-documents/:token",element:e.jsx(ml,{})}),e.jsx(de,{path:"/unauthorized",element:e.jsx(xl,{})}),e.jsx(de,{path:"/super-admin/*",element:e.jsx(He,{to:"/unauthorized",replace:!0})}),e.jsx(de,{path:"/",element:e.jsx(Hn,{})}),e.jsxs(de,{path:"/*",element:e.jsx(ft,{roles:["admin","company_admin"],children:e.jsx(Dt,{})}),children:[e.jsx(de,{path:"dashboard",element:e.jsx(ul,{})}),e.jsx(de,{path:"candidates",element:e.jsx(pl,{})}),e.jsx(de,{path:"hr-management",element:e.jsx(hl,{})})]}),e.jsxs(de,{path:"/employee/*",element:e.jsx(ft,{roles:["hr","company_admin"],children:e.jsx(Vn,{})}),children:[e.jsx(de,{path:"hr/candidate-pool",element:e.jsx(Pl,{})}),e.jsx(de,{path:"hr/resume-search",element:e.jsx(Tl,{})}),e.jsx(de,{path:"hr/resume-parser",element:e.jsx(Rl,{})})]}),e.jsxs(de,{path:"/job-desk/*",element:e.jsx(ft,{roles:["hr","company_admin"],children:e.jsx(Dt,{})}),children:[e.jsx(de,{index:!0,element:e.jsx(bl,{})}),e.jsx(de,{path:":jobId/applicants",element:e.jsx(jl,{})})]}),e.jsx(de,{path:"/candidates/*",element:e.jsx(ft,{roles:["hr","company_admin"],children:e.jsx(Dt,{})}),children:e.jsx(de,{path:":candidateId/timeline",element:e.jsx(wl,{})})}),e.jsx(de,{path:"/employees/*",element:e.jsx(ft,{roles:["hr","company_admin"],children:e.jsx(Dt,{})}),children:e.jsx(de,{path:"onboarding",element:e.jsx(Cl,{})})})]})]})})})}Zt.createRoot(document.getElementById("root")).render(e.jsx(tt.StrictMode,{children:e.jsx(Ll,{})}));
